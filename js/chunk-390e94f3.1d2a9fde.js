(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-390e94f3"],{"1fb2":function(e,t,a){"use strict";var l={name:"publish_original",props:["data"],data:function(){return{original:~~this.data}},model:{prop:"data",event:"update"},watch:{data:function(e){this.original=~~e},original:{deep:!0,handler:function(e){this.$emit("update",~~e)}}},computed:{},methods:{},mounted:function(){},components:{}},n=a("2877"),o=Object(n.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-publish-original"},[t("el-form-item",{attrs:{label:"原创"}},[t("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:e.original,callback:function(t){e.original=t},expression:"original"}})],1),e._t("default")],2)}),[],!1,null,null,null);t.a=o.exports},2483:function(e,t,a){"use strict";a("7f06")},"505f":function(e,t,a){"use strict";var l=a("52da"),n={name:"publish_client",props:["data","forbidAll"],data:function(){return{client:this.data}},model:{prop:"data",event:"update"},watch:{data:function(e){this.client=e},client:{deep:!0,handler:function(e){this.$emit("update",e)}}},computed:{},methods:{handleChange:function(){l.a.$emit("changeClient",this.client)}},mounted:function(){},components:{}},o=a("2877"),i=Object(o.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-publish-client"},[t("el-form-item",{attrs:{label:"版本"}},[t("el-radio-group",{on:{change:e.handleChange},model:{value:e.client,callback:function(t){e.client=t},expression:"client"}},[t("el-radio",{attrs:{label:"std"}},[e._v("重制")]),t("el-radio",{attrs:{label:"origin"}},[e._v("缘起")]),e.forbidAll?e._e():t("el-radio",{attrs:{label:"all"}},[e._v("双端")])],1)],1),e._t("default")],2)}),[],!1,null,null,null);t.a=i.exports},"52da":function(e,t,a){"use strict";var l=new(a("2b0e").default);t.a=l},"7af0":function(e,t,a){},"7f06":function(e,t,a){},abe2:function(e,t,a){"use strict";a("d810")},b13e:function(e,t,a){"use strict";var l={name:"post_banner",components:{uploadImage:a("5571").a},props:["data"],data:function(){return{banner:this.data}},model:{prop:"data",event:"update"},watch:{data:function(e){this.banner=e},banner:function(e){this.$emit("update",e)}}},n=(a("2483"),a("2877")),o=Object(n.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-publish-banner"},[t("el-divider",{attrs:{"content-position":"left"}},[e._v("海报")]),t("uploadImage",{attrs:{info:"非必选。首页海报尺寸1600*280（推荐3200*560支持高分屏），最大20M。"},model:{value:e.banner,callback:function(t){e.banner=t},expression:"banner"}})],1)}),[],!1,null,null,null);t.a=o.exports},cac2:function(e,t,a){"use strict";a("7af0")},d0a1:function(e,t,a){"use strict";var l={name:"publish_title",props:["data","hideDiv","placeholder"],data:function(){return{title:this.data}},model:{prop:"data",event:"update"},watch:{data:function(e){this.title=e},title:{deep:!0,handler:function(e){this.$emit("update",e)}}},computed:{},methods:{},mounted:function(){},components:{}},n=a("2877"),o=Object(n.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-publish-title"},[e.hideDiv?e._e():t("el-divider",{attrs:{"content-position":"left"}},[e._v("标题")]),t("el-input",{attrs:{maxlength:50,minlength:2,"show-word-limit":"",required:"",placeholder:e.placeholder||"请填写标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._t("default")],2)}),[],!1,null,null,null);t.a=o.exports},d810:function(e,t,a){},e4b0:function(e,t,a){"use strict";a.r(t);a("d3b7"),a("99af");var l=a("41cb");var n=a("ef77"),o=a("d0a1"),i=a("1fb2"),s=a("505f"),r=(a("a9e3"),a("fb6a"),a("e9c4"),a("d4f4")),u={name:"paid_attachment",props:{body:{type:Number,default:2},describe:{type:String,default:"个人收藏"}},data:function(){return{data:{id:"4",uuid:"",json:""}}},methods:{uploadData:function(e){var t,a=this,n=new FormData,o=e.target.files[0];n.append("jx3dat",o,"data.jx3dat"),n.append("body",this.body),n.append("describe",this.describe),(t=n,Object(l.c)().post("/api/face/file-upload",t)).then((function(e){a.data.uuid=e.data.data.uuid,a.data.id=e.data.data.id,a.$message({message:"上传成功",type:"success"}),a.$emit("update:data",a.data)})),e.target.value="",this.parseData(o)},selectData:function(){document.getElementById("face_file").dispatchEvent(new MouseEvent("click"))},parseData:function(e){var t=this;if(FileReader){var a=new FileReader;a.readAsText(e),a.onload=function(e){console.log("读取成功...开始执行分析...");var a=e.target.result;a=a.slice(a.indexOf("return {"));try{console.log(0),t.object=Object(r.parse)(a),t.data.json=JSON.stringify(Object(r.parse)(a)),t.$notify({title:"成功",message:"脸型数据解析成功",type:"success"}),t.$emit("update:data",this.data)}catch(e){console.log(e),t.$notify.error({title:"错误",message:"无法解析脸型数据"})}},a.onerror=function(e){t.$notify.error({title:"错误",message:"无法解析脸型数据"})}}}}},c=(a("cac2"),a("2877")),d=Object(c.a)(u,(function(){var e=this._self._c;return e("div",{staticClass:"m-paid_attachment"},[e("input",{staticClass:"u-data-input",attrs:{type:"file",id:"face_file"},on:{change:this.uploadData}}),e("el-button",{attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:this.selectData}},[this._v("上传脸型数据")]),e("span",{directives:[{name:"show",rawName:"v-show",value:this.data.uuid,expression:"data.uuid"}],staticClass:"u-data-ready"},[e("i",{staticClass:"el-icon-success"}),this._v(" 已上传 ")])],1)}),[],!1,null,"2ce57d89",null).exports,p=a("7b4a"),f=a("b13e"),h={name:"face",components:{publishHeader:n.a,publishTitle:o.a,publishOriginal:i.a,publishClient:s.a,faceAttachment:d,UploadAlbum:p.a,publishBanner:f.a},data:function(){return{post:{original:0,author_name:"",author_link:"",title:"",remark:"",banner:"",client:"std",body_type:2,data:'{"tBone":{"CHEEK_Y":-32,"CHEEK_Z":-5,"EYEBOW_DIRC":42,"EYEBOW_OUT":46,"EYEBOW_POS":-56,"EYECROW_Y":-7,"EYE_DIRC":-42,"EYE_DIST":38,"EYE_OPEN":14,"EYE_POS":-18,"EYE_SIZE":18,"FACE_SCALE":-50,"FACE_Y":113,"FACE_Z":-57,"JAW_END":-39,"JAW_LENGTH":-14,"JAW_POS":-31,"JAW_ROT":-4,"JAW_WIDTH":-10,"LOW_FACE":23,"LOW_LID_POS":34,"LOW_LIP":-39,"LOW_LIP_OUT":-6,"LOW_LIP_POS":89,"MOUTH_END":4,"MOUTH_END_L":6,"MOUTH_END_R":6,"MOUTH_OPEN":-14,"MOUTH_OUT":-68,"MOUTH_POS":13,"MOUTH_ROT":0,"MOUTH_SIZE":-8,"NOSEBOW_BEND":55,"NOSEBOW_WIDTH":-78,"NOSETOP_POS_Y":14,"NOSETOP_POS_Z":-77,"NOSETOP_UP":62,"NOSETOP_WIDTH":-67,"NOSE_HEIGHT":-44,"NOSE_SIZE":-92,"OUT":-110,"PUPIL_DIRC":15,"PUPIL_SIZE":-63,"RIDGE_Y":-9,"UP_FACE":-107,"UP_LID_POS":18,"UP_LIP":-23,"UP_LIP_OUT":10,"UP_LIP_POS":25},"nDecorationID":0,"tDecal":{"EYE_SHADOW_FLASH2":{"fValue1":-1,"nColorID":0,"fValue2":-1,"fValue3":-1,"nShowID":0,"bUse":false},"EYE_SHADOW1":{"fValue1":-1,"nColorID":0,"bUse":false,"nShowID":0,"fValue3":-1,"fValue2":-1},"LIP_LIGHT":{"fValue1":-1,"nColorID":0,"fValue2":-1,"fValue3":-1,"nShowID":0,"bUse":false},"BLUSHER_MOUSTACHE":{"fValue1":-0.0099999997764826,"nColorID":0,"fValue2":-0.0099999997764826,"fValue3":-0.0099999997764826,"nShowID":0,"bUse":false},"EYE_LINE":{"fValue1":2,"nColorID":3,"fValue2":0.5,"fValue3":1,"nShowID":2,"bUse":true},"EYE_SHADOW_FLASH1":{"fValue1":-1,"nColorID":0,"bUse":false,"nShowID":0,"fValue3":-1,"fValue2":-1},"DECAL":{"fValue1":-1,"nColorID":0,"bUse":false,"nShowID":0,"fValue3":-1,"fValue2":-1},"BROW":{"fValue1":2,"nColorID":9,"bUse":true,"nShowID":25,"fValue3":1,"fValue2":0.55},"EYE_LIGHT":{"fValue1":-1,"nColorID":0,"bUse":false,"nShowID":7,"fValue3":-1,"fValue2":-1},"LIP_FLASH":{"fValue1":-1,"nColorID":0,"fValue2":-1,"fValue3":-1,"nShowID":0,"bUse":false},"EYE_SHADOW4":{"fValue1":-0.0099999997764826,"nColorID":0,"fValue2":-0.0099999997764826,"fValue3":-0.0099999997764826,"nShowID":0,"bUse":false},"IRIS_RIGHT":{"fValue1":2,"nColorID":2,"fValue2":0.6,"fValue3":1,"nShowID":4,"bUse":true},"EYE_SHADOW":{"fValue1":1,"nColorID":17,"bUse":true,"nShowID":2,"fValue3":1,"fValue2":0.4},"IRIS_LEFT":{"fValue1":2,"nColorID":2,"bUse":true,"nShowID":4,"fValue3":1,"fValue2":0.6},"EYE_SHADOW2":{"fValue1":1,"nColorID":20,"fValue2":0.7,"fValue3":0,"nShowID":15,"bUse":true},"BASE":{"fValue1":-1,"nColorID":0,"bUse":false,"nShowID":3,"fValue3":-1,"fValue2":-1},"EYE_SHADOW_FLASH3":{"fValue1":-0.0099999997764826,"nColorID":0,"fValue2":-0.0099999997764826,"fValue3":-0.0099999997764826,"nShowID":0,"bUse":false},"LIP_GLOSS":{"fValue1":1,"nColorID":4,"fValue2":0.7,"fValue3":0,"nShowID":8,"bUse":true},"EYE_SHADOW_FLASH4":{"fValue1":-0.0099999997764826,"nColorID":0,"fValue2":-0.0099999997764826,"fValue3":-0.0099999997764826,"nShowID":0,"bUse":false},"EYE_SHADOW3":{"fValue1":-1,"nColorID":0,"bUse":false,"nShowID":0,"fValue3":-1,"fValue2":-1},"LIP_OVERLAP":{"fValue1":-0.0099999997764826,"nColorID":0,"fValue2":-0.0099999997764826,"fValue3":-0.0099999997764826,"nShowID":0,"bUse":false}},"nMajorVersion":1,"nRoleType":1,"nVersion":5}',file:"d8a1319dbb424e47950339c42c6fd527",cover:"",images:[],related:[],price_type:"0",price_count:0},loading:!1,processing:!1,fileId:"",postId:"",postType:"face"}},computed:{id:function(){return this.$route.params.id}},mounted:function(){this.init()},methods:{init:function(){this.id&&this.getData()},getData:function(){var e,t=this;this.loading=!0,(e=this.id,Object(l.c)().get("/api/face/".concat(e))).then((function(e){t.post=e.data.data,t.loading=!1}))},handleFaceChange:function(e){var t=e.json,a=e.uuid,l=e.id;this.post.data=t||"",this.post.file=a||"",this.fileId=l||""},publish:function(){var e,t=this;this.processing=!0,(e=this.post,Object(l.c)().post("/api/face",e)).then((function(e){t.$message({message:"发布成功",type:"success"}),t.afterPublish(e.data.data.id).finally((function(){t.processing=!1,setTimeout((function(){location.href=getLink(t.postType,e.data.data.id)}),500)}))}))},afterPublish:function(e){return this.fileId?function(e,t,a){return Object(l.c)().post("/api/charge_attachment/".concat(e,"/link-to/").concat(t,"/").concat(a))}(this.fileId,this.postType,e):Promise.resolve()}}},b=Object(c.a)(h,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"m-publish-box m-publish-box-face"},[t("publish-header",{attrs:{name:"捏脸分享"}}),t("el-form",{attrs:{"label-position":"left","label-width":"90px"}},[t("publish-title",{model:{value:e.post.title,callback:function(t){e.$set(e.post,"title",t)},expression:"post.title"}}),t("div",{staticClass:"m-publish-info"},[t("el-divider",{attrs:{"content-position":"left"}},[e._v("信息")]),t("publish-client",{attrs:{forbidAll:!0},model:{value:e.post.client,callback:function(t){e.$set(e.post,"client",t)},expression:"post.client"}}),t("publish-original",{model:{value:e.post.original,callback:function(t){e.$set(e.post,"original",t)},expression:"post.original"}}),e.post.original?[t("el-form-item",{attrs:{label:"原作者名称",prop:"author_name"}},[t("el-input",{attrs:{placeholder:"输入原作者名称"},model:{value:e.post.author_name,callback:function(t){e.$set(e.post,"author_name",t)},expression:"post.author_name"}})],1),t("el-form-item",{attrs:{label:"原作者链接",prop:"author_link"}},[t("el-input",{attrs:{placeholder:"输入原作者链接"},model:{value:e.post.author_link,callback:function(t){e.$set(e.post,"author_link",t)},expression:"post.author_link"}})],1)]:e._e(),t("el-form-item",{attrs:{label:"价格类型"}},[t("el-radio-group",{model:{value:e.post.price_type,callback:function(t){e.$set(e.post,"price_type",t)},expression:"post.price_type"}},[t("el-radio",{attrs:{label:"0"}},[e._v("免费")]),t("el-radio",{attrs:{label:"1"}},[e._v("盒币")]),t("el-radio",{attrs:{label:"2"}},[e._v("金箔")])],1)],1),"0"!=e.post.price_type?t("el-form-item",{attrs:{label:"价格"}},[t("el-input-number",{model:{value:e.post.price_count,callback:function(t){e.$set(e.post,"price_count",t)},expression:"post.price_count"}})],1):e._e(),t("el-form-item",{attrs:{label:"体型"}},[t("el-radio-group",{model:{value:e.post.body_type,callback:function(t){e.$set(e.post,"body_type",t)},expression:"post.body_type"}},[t("el-radio",{attrs:{label:1}},[e._v("成男")]),t("el-radio",{attrs:{label:2}},[e._v("成女")]),t("el-radio",{attrs:{label:5}},[e._v("正太")]),t("el-radio",{attrs:{label:6}},[e._v("小女孩")])],1)],1),t("el-form-item",{attrs:{label:"数据"}},[t("face-attachment",{attrs:{body:e.post.body_type},on:{"update:data":e.handleFaceChange}})],1),t("el-form-item",{attrs:{label:"描述"}},[t("publish-title",{attrs:{hideDiv:!0,placeholder:"请填写描述"},model:{value:e.post.remark,callback:function(t){e.$set(e.post,"remark",t)},expression:"post.remark"}})],1),t("el-divider",{attrs:{"content-position":"left"}},[e._v("扩展")]),t("el-form-item",{attrs:{label:"图片列表"}},[t("UploadAlbum",{model:{value:e.post.images,callback:function(t){e.$set(e.post,"images",t)},expression:"post.images"}})],1),t("publish-banner",{model:{value:e.post.banner,callback:function(t){e.$set(e.post,"banner",t)},expression:"post.banner"}})],2),t("div",{staticClass:"m-publish-buttons"},[t("el-button",{attrs:{type:"primary",disabled:e.processing},on:{click:e.publish}},[e._v("发    布")])],1)],1)],1)}),[],!1,null,null,null);t.default=b.exports},ef77:function(e,t,a){"use strict";a("b0c0");var l={name:"publish_header",props:["name"],data:function(){return{}},computed:{},methods:{goBack:function(){window.history.length?this.$router.go(-1):this.$router.push("/")}},mounted:function(){},components:{}},n=(a("abe2"),a("2877")),o=Object(n.a)(l,(function(){var e=this._self._c;return e("div",{staticClass:"m-publish-header"},[e("el-page-header",{attrs:{content:this.name},on:{back:this.goBack}}),this._t("default")],2)}),[],!1,null,null,null);t.a=o.exports}}]);
//# sourceMappingURL=chunk-390e94f3.1d2a9fde.js.map