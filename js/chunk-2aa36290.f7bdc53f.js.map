{"version":3,"sources":["webpack:///./src/service/item_plan.js","webpack:///./src/components/publish_icon.vue?d47b","webpack:///./src/post/item_plan.vue?b89c","webpack:///./src/components/publish_header.vue?4823","webpack:///./src/service/item.js","webpack:///./src/components/publish_icon.vue?677b","webpack:///./src/components/publish_icon.vue?c3c8","webpack:///src/components/publish_icon.vue","webpack:///./src/components/publish_icon.vue?f0b6","webpack:///./src/components/publish_icon.vue","webpack:///src/post/item_plan.vue","webpack:///./src/post/item_plan.vue?b8fa","webpack:///./src/post/item_plan.vue?ddb1","webpack:///./src/post/item_plan.vue","webpack:///./src/components/publish_header.vue?6f8c","webpack:///src/components/publish_header.vue","webpack:///./src/components/publish_header.vue?3a87","webpack:///./src/components/publish_header.vue"],"names":["getMyPlans","params","$cms","get","then","res","data","getPlanByID","id","concat","addMyPlans","post","postMyPlans","put","delMyPlans","delete","search_items","keyword","length","fields","is_equip","arguments","undefined","limit","$node","searchItems","get_item","item_id","name","props","source","computed","client","$store","state","components","Item","methods","get_data","_this","item","Object","keys","show","Genre","item_border","Quality","__imgPath","item_border_quest","IsQuest","icon_url","iconLink","watch","immediate","handler","_vm","this","_c","_self","attrs","click_trigger","dishoverable","on","slot","staticClass","style","backgroundImage","opacity","IconID","class","_v","_s","Name","_e","default_plan","title","public","type","description","relation","default_equip","label","AucGenre","list","AucSubType","draggable","header","ItemSimple","itemIcon","assign","relationList","equipList","loading","per","page","total","searchList","plan_id","$route","search_params","apply","resetPages","deep","loadItems","map","count","addRelation","unshift","moveHandle","e","to","classList","contains","getAttribute","result","draggedContext","element","getPlanData","_this2","extractID","console","log","toEquipList","el","_typeof","equipItem","key","_obj","hasOwnProperty","toEquip","obj","forEach","submit","_this3","$message","message","$router","push","finally","created","_t","model","value","callback","$$v","$set","expression","trim","pull","_l","index","$event","splice","_n","equip","eq","goBack","window","history","go","mounted","component"],"mappings":"8HAAA,oMAuCA,SAASA,EAAWC,GACnB,OAAOC,cACLC,IAAI,8BAA+B,CAAEF,WACrCG,MAAK,SAACC,GACN,OAAOA,EAAIC,KAAKA,QAGnB,SAASC,EAAYC,GACpB,OAAON,cACLC,IAAI,0BAADM,OAA2BD,IAC9BJ,MAAK,SAACC,GACN,OAAOA,EAAIC,KAAKA,QAInB,SAASI,EAAWT,GACnB,OAAOC,cAAOS,KAAK,yBAA0BV,GAG9C,SAASW,EAAYJ,EAAIP,GACxB,OAAOC,cAAOW,IAAI,0BAADJ,OAA2BD,GAAMP,GAGnD,SAASa,EAAWN,GACnB,OAAON,cAAOa,OAAO,0BAADN,OAA2BD,M,kCC/DhD,W,oCCAA,W,2GCAA,W,kCCAA,sHAGA,SAASQ,EAAaC,EAASC,EAAQC,GAAyB,IAAjBC,EAAQC,UAAAH,OAAA,QAAAI,IAAAD,UAAA,GAAAA,UAAA,GAAG,KACrDpB,EAAS,CAAEgB,QAASA,EAASM,MAAOL,EAAQC,OAAQA,GAGxD,OAFiB,OAAbC,IAAmBnB,EAAOmB,SAAWA,EAAW,EAAI,GAEjDI,cAAQrB,IAAI,eAAgB,CAC5BF,WAKR,SAASwB,EAAYxB,GACpB,OAAOuB,cACLrB,IAAI,eAAgB,CAAEF,WACtBG,MAAK,SAACC,GACN,OAAOA,EAAIC,KAAKA,QAKnB,SAASoB,EAASC,GACjB,GAAKA,EACL,OAAOH,cAAQrB,IAAI,YAADM,OAAakB,M,kCCxBhC,W,gQCAgZ,ECuBjY,CACfC,KAAA,WACAC,MAAA,kDACAvB,KAAA,WACA,OACAwB,OAAA,OAGAC,SAAA,CACAC,OAAA,WACA,YAAAC,OAAAC,MAAAF,SAGAG,WAAA,CACA,WAAAC,KAEAC,QAAA,CACAC,SAAA,SAAAX,GAAA,IAAAY,EAAA,KACAZ,GACAD,YAAAC,GAAAvB,MAAA,SAAAC,GACA,IACAmC,EADAnC,EAAAC,KACAA,KAAAkC,KACAC,OAAAC,KAAAF,GAAAtB,SAAAqB,EAAAT,OAAAU,OAIAG,KAAA,WACA,KAAAb,aAAA,SAAAA,OAAAc,OACA,KAAAN,SAAA,KAAAR,OAAAtB,KAGAqC,YAAA,SAAAL,GACA,OAAAA,EAAAM,SACA,OACA,aAAArC,OAAAsC,YAAA,wBACA,OACA,aAAAtC,OAAAsC,YAAA,0BACA,OACA,aAAAtC,OAAAsC,YAAA,0BACA,QACA,WAGAC,kBAAA,SAAAR,GACA,OAAAA,EAAAS,QAAA,SAAAxC,OAAAsC,YAAA,yBACA,IAEAG,SAAA,SAAA1C,GAEA,OAAA2C,mBAAA3C,KAGA4C,MAAA,CACAZ,KAAA,CACAa,WAAA,EACAC,QAAA,WACA,KAAAxB,OAAA,KAAAU,OAGAb,QAAA,CACA0B,WAAA,EACAC,QAAA,WACA,KAAAhB,SAAA,KAAAX,a,kCCjEe,EAXC,YACd,GCVW,WAAkB,IAAI4B,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAQF,EAAIzB,OAAQ2B,EAAG,aAAa,CAACE,MAAM,CAAC,UAAY,cAAc,MAAQ,OAAO,QAAUJ,EAAIK,cAAgB,QAAU,QAAQ,SAAWL,EAAIM,aAAa,eAAe,oBAAoB,iBAAgB,EAAM,WAAa,OAAO,cAAc,GAAGC,GAAG,CAAC,KAAOP,EAAIZ,OAAO,CAACc,EAAG,WAAW,CAACM,KAAK,aAAa,CAACN,EAAG,MAAM,CAACO,YAAY,eAAe,CAACP,EAAG,MAAM,CAACO,YAAY,eAAe,CAACP,EAAG,MAAM,CAACO,YAAY,WAAWC,MAAO,CAAEC,gBAAiBX,EAAIV,YAAYU,EAAIzB,QAASqC,QAA+B,GAAtBZ,EAAIzB,OAAOgB,QAAe,GAAM,KAAOW,EAAG,MAAM,CAACO,YAAY,iBAAiBC,MAAO,CAAEC,gBAAiBX,EAAIP,kBAAkBO,EAAIzB,WAAa2B,EAAG,MAAM,CAACO,YAAY,cAAcL,MAAM,CAAC,IAAMJ,EAAIL,SAASK,EAAIzB,OAAOsC,aAAaX,EAAG,MAAM,CAACO,YAAY,SAASK,MAAK,WAAA5D,OAAY8C,EAAIzB,OAAOgB,UAAW,CAACS,EAAIe,GAAGf,EAAIgB,GAAGhB,EAAIzB,OAAO0C,aAAaf,EAAG,WAAW,CAACE,MAAM,CAAC,KAAOJ,EAAIzB,WAAW,GAAGyB,EAAIkB,OAEh5B,IDWpB,EACA,KACA,WACA,M,yCEiFFC,EAAA,CACAlE,GAAA,GACAmE,MAAA,GACAC,OAAA,EACAC,KAAA,IACAC,YAAA,GACAC,SAAA,IAEAC,EAAA,CACA,CACA,CAAAL,MAAA,eAAAM,MAAA,KAAAC,SAAA,EAAAC,KAAA,IACA,CAAAR,MAAA,eAAAM,MAAA,KAAAC,SAAA,EAAAC,KAAA,KAEA,CACA,CAAAR,MAAA,OAAAM,MAAA,KAAAC,SAAA,EAAAE,WAAA,EAAAD,KAAA,IACA,CAAAR,MAAA,QAAAM,MAAA,KAAAC,SAAA,EAAAE,WAAA,EAAAD,KAAA,IACA,CAAAR,MAAA,QAAAM,MAAA,KAAAC,SAAA,EAAAE,WAAA,EAAAD,KAAA,KAEA,CACA,CAAAR,MAAA,SAAAM,MAAA,KAAAC,SAAA,EAAAE,WAAA,EAAAD,KAAA,IACA,CAAAR,MAAA,QAAAM,MAAA,KAAAC,SAAA,EAAAE,WAAA,EAAAD,KAAA,IACA,CAAAR,MAAA,QAAAM,MAAA,KAAAC,SAAA,EAAAE,WAAA,EAAAD,KAAA,KAEA,CACA,CAAAR,MAAA,SAAAM,MAAA,KAAAC,SAAA,EAAAE,WAAA,EAAAD,KAAA,IACA,CAAAR,MAAA,UAAAM,MAAA,KAAAC,SAAA,EAAAE,WAAA,EAAAD,KAAA,IACA,CAAAR,MAAA,SAAAM,MAAA,KAAAC,SAAA,EAAAE,WAAA,EAAAD,KAAA,IACA,CAAAR,MAAA,SAAAM,MAAA,KAAAC,SAAA,EAAAE,WAAA,EAAAD,KAAA,MC5H6Y,ED+H9X,CACfvD,KAAA,OACAO,WAAA,CACAkD,cACA,iBAAAC,IACA,kBAAAC,IACAC,YAEAlF,KAAA,WACA,OAEAA,KAAAmC,OAAAgD,OAAA,GAAAf,GAEAgB,aAAA,GACAC,UAAA,GAAAlF,OAAAuE,GAGAY,SAAA,EACA3E,QAAA,GACA4E,IAAA,GACAC,KAAA,EACAC,MAAA,EACAC,WAAA,GAEArE,QAAA,KAGAI,SAAA,CACAkE,QAAA,WACA,YAAAC,OAAAjG,OAAAgG,SAGAE,cAAA,WACA,IAAAlG,EAAA,CACA6F,KAAA,KAAAA,KACAvE,MAAA,KAAAsE,IACAzE,SAAA,QAAAd,KAAAuE,KAAA,IACA1D,OAAA,uEACAiF,MAAA,GAGA,OADA,KAAAnF,UAAAhB,EAAAgB,QAAA,KAAAA,SACAhB,IAGAmD,MAAA,CAEAnC,QAAA,WACA,KAAAoF,cAGAF,cAAA,CACA9C,WAAA,EACAiD,MAAA,EACAhD,QAAA,WACA,KAAAiD,eAKAlE,QAAA,CAIAkE,UAAA,eAAAhE,EAAA,KACAd,YAAA,KAAA0E,eAAA/F,MAAA,SAAAC,GACAA,EAAAC,KAAAkG,KAAA,SAAAhE,GAAA,OAAAA,EAAAiE,MAAA,KACAlE,EAAAyD,WAAA3F,EAAAC,KACAiC,EAAAwD,MAAA1F,EAAA0F,UAIAM,WAAA,WACA,KAAAP,KAAA,GAGA3C,oBAKAuD,YAAA,WACA,KAAApG,KAAAyE,SAAA4B,QAAA,CACAhC,MAAA,GACArE,KAAA,MAIAsG,WAAA,SAAAC,GACA,IAAAA,EAAAC,GAAAC,UAAAC,SAAA,gBACA,IAAA9B,EAAA2B,EAAAC,GAAAG,aAAA,iBACA7B,EAAAyB,EAAAC,GAAAG,aAAA,mBACAC,EAAAL,EAAAM,eAAAC,QAAAlC,YAEA,OADA,OAAAE,IAAA8B,KAAAL,EAAAM,eAAAC,QAAAhC,eACA8B,IAMAG,YAAA,eAAAC,EAAA,KACA/G,YAAA,KAAA0F,SAAA7F,MAAA,SAAAC,GACAA,EAAAiH,EAAAC,UAAAlH,GACAmH,QAAAC,IAAApH,GACAiH,EAAAhH,KAAAD,EACA,GAAAiH,EAAAhH,KAAAuE,MAAAyC,EAAAI,YAAAJ,EAAAhH,KAAAyE,cAIAwC,UAAA,SAAAjH,GAaA,OAZA,GAAAA,EAAAuE,KACAvE,EAAAyE,SAAAzE,EAAAyE,SAAAyB,KAAA,SAAAhE,GAMA,OALAA,EAAAlC,KAAAkC,EAAAlC,KAAAkG,KAAA,SAAAmB,GAGA,MAFA,iBAAAA,MAAA,CAAAnH,GAAAmH,EAAAlB,MAAA,IACA,UAAAmB,YAAAD,OAAA,CAAAnH,GAAAmH,EAAAnH,GAAAiG,MAAAkB,EAAAlB,QACAkB,KAEAnF,KAGAlC,EAAAyE,SAAA,KAAA8C,UAAAvH,EAAAyE,UAEAzE,GAGAuH,UAAA,SAAAvH,GACA,QAAAwH,KAAAxH,EACAA,EAAAwH,GAAAxH,EAAAwH,GAAAtB,KAAA,SAAAhE,GAEA,MADA,UAAAoF,YAAApF,SAAAhC,IACAgC,KAGA,OAAAlC,GAGAoH,YAAA,SAAAK,GACA,KAAApC,UAAAa,KAAA,SAAArB,GACAA,EAAAqB,KAAA,SAAAmB,GACAI,EAAAC,eAAAL,EAAAhD,SACAgD,EAAAxC,KAAA4C,EAAAJ,EAAAhD,eAMAsD,QAAA,WACA,IAAAC,EAAA,GACA,KAAAvC,UAAAwC,SAAA,SAAAhD,GACAA,EAAAgD,SAAA,SAAAR,GACAO,EAAAP,EAAAhD,OAAAgD,EAAAxC,WAGA+C,EAAA,KAAAL,UAAAK,GACA,KAAA5H,KAAAyE,SAAAmD,GAIAE,OAAA,eAAAC,EAAA,KACA,QAAA/H,KAAAuE,MAAA,KAAAoD,UAEA,KAAArC,SAAA,EACA,KAAAK,QACArF,YAAA,KAAAqF,QAAA,KAAA3F,MACAF,MAAA,WACAiI,EAAAC,SAAA,CAAAC,QAAA,WAAA1D,KAAA,YACAwD,EAAAG,QAAAC,KAAA,CAAA7G,KAAA,SAAA3B,OAAA,CAAA4E,KAAA,kBAEA6D,SAAA,WACAL,EAAAzC,SAAA,KAEAlF,YAAA,KAAAJ,MACAF,MAAA,WACAiI,EAAAC,SAAA,CAAAC,QAAA,WAAA1D,KAAA,YACAwD,EAAAG,QAAAC,KAAA,CAAA7G,KAAA,SAAA3B,OAAA,CAAA4E,KAAA,kBAEA6D,SAAA,WACAL,EAAAzC,SAAA,OAIA+C,QAAA,WACA,KAAA1C,SAAA,KAAAoB,gBE3SI,G,UAAY,YACd,GCTW,WAAkB,IAAI9D,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACO,YAAY,iBAAiB,CAACP,EAAG,iBAAiB,CAACE,MAAM,CAAC,KAAO,OAAO,YAAa,IAAQ,CAACJ,EAAIqF,GAAG,WAAW,GAAGnF,EAAG,UAAU,CAACO,YAAY,SAASL,MAAM,CAAC,iBAAiB,OAAO,cAAc,SAAS,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,YAAc,aAAa,UAAY,KAAK,kBAAkB,IAAIkF,MAAM,CAACC,MAAOvF,EAAIjD,KAAKqE,MAAOoE,SAAS,SAAUC,GAAMzF,EAAI0F,KAAK1F,EAAIjD,KAAM,QAAS0I,IAAME,WAAW,iBAAiB,GAAGzF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,QAAQ,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,GAAGkF,MAAM,CAACC,MAAOvF,EAAIjD,KAAKsE,OAAQmE,SAAS,SAAUC,GAAMzF,EAAI0F,KAAK1F,EAAIjD,KAAM,SAAU0I,IAAME,WAAW,gBAAgB,CAAC3F,EAAIe,GAAG,QAAQb,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,GAAGkF,MAAM,CAACC,MAAOvF,EAAIjD,KAAKsE,OAAQmE,SAAS,SAAUC,GAAMzF,EAAI0F,KAAK1F,EAAIjD,KAAM,SAAU0I,IAAME,WAAW,gBAAgB,CAAC3F,EAAIe,GAAG,SAAS,GAAGb,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,WAAW,KAAO,EAAE,YAAc,eAAe,UAAY,IAAK,kBAAkB,IAAIkF,MAAM,CAACC,MAAOvF,EAAIjD,KAAKwE,YAAaiE,SAAS,SAAUC,GAAMzF,EAAI0F,KAAK1F,EAAIjD,KAAM,cAAe0I,IAAME,WAAW,uBAAuB,GAAGzF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,CAACF,EAAG,iBAAiB,CAACE,MAAM,CAAC,KAAO,UAAUG,GAAG,CAAC,OAASP,EAAI8C,YAAYwC,MAAM,CAACC,MAAOvF,EAAIjD,KAAKuE,KAAMkE,SAAS,SAAUC,GAAMzF,EAAI0F,KAAK1F,EAAIjD,KAAM,OAAQ0I,IAAME,WAAW,cAAc,CAACzF,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,MAAM,CAACJ,EAAIe,GAAG,UAAUb,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,MAAM,CAACJ,EAAIe,GAAG,WAAW,GAAGb,EAAG,YAAY,CAACO,YAAY,aAAaL,MAAM,CAAC,KAAO,SAAS,KAAO,gBAAgBG,GAAG,CAAC,MAAQP,EAAImD,cAAc,CAACnD,EAAIe,GAAG,WAAW,GAAGb,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,CAACF,EAAG,MAAM,CAACO,YAAY,eAAe,CAAET,EAAIyC,WAAW9E,OAAQuC,EAAG,MAAM,CAACO,YAAY,iBAAiB,CAACP,EAAG,WAAW,CAACO,YAAY,UAAUL,MAAM,CAAC,YAAc,kBAAkB,cAAc,kBAAkBkF,MAAM,CAACC,MAAOvF,EAAItC,QAAS8H,SAAS,SAAUC,GAAMzF,EAAItC,QAAwB,iBAAR+H,EAAkBA,EAAIG,OAAQH,GAAME,WAAW,aAAazF,EAAG,YAAY,CAACE,MAAM,CAAC,UAAY,YAAY,KAAOJ,EAAIqD,WAAW,MAAQ,CAAEhF,KAAM,iBAAkBwH,KAAM,QAASvI,KAAK,IAASgI,MAAM,CAACC,MAAOvF,EAAIyC,WAAY+C,SAAS,SAAUC,GAAMzF,EAAIyC,WAAWgD,GAAKE,WAAW,eAAe3F,EAAI8F,GAAI9F,EAAIyC,YAAY,SAASxD,EAAK8G,GAAO,OAAO7F,EAAG,kBAAkB,CAACqE,IAAIwB,EAAMtF,YAAY,WAAWL,MAAM,CAAC,KAAOnB,QAAU,GAAGiB,EAAG,gBAAgB,CAACO,YAAY,kBAAkBL,MAAM,CAAC,MAAQ,GAAG,WAAa,GAAG,OAAS,4BAA4B,uBAAsB,EAAK,YAAYJ,EAAIsC,IAAI,MAAQtC,EAAIwC,MAAM,eAAexC,EAAIuC,KAAK,KAAO,QAAQhC,GAAG,CAAC,qBAAqB,SAASyF,GAAQhG,EAAIuC,KAAKyD,GAAQ,sBAAsB,SAASA,GAAQhG,EAAIuC,KAAKyD,OAAY,GAAGhG,EAAIkB,KAAuB,KAAjBlB,EAAIjD,KAAKuE,KAAapB,EAAG,SAAS,CAACO,YAAY,aAAaL,MAAM,CAAC,OAAS,KAAKJ,EAAI8F,GAAI9F,EAAIjD,KAAKyE,UAAU,SAASA,EAASuE,GAAO,OAAO7F,EAAG,SAAS,CAACqE,IAAIwB,EAAM3F,MAAM,CAAC,KAAO,IAAI,CAACF,EAAG,MAAM,CAACO,YAAY,UAAU,CAACP,EAAG,IAAI,CAACO,YAAY,oCAAoCF,GAAG,CAAC,MAAQ,SAASyF,GAAQ,OAAOhG,EAAIjD,KAAKyE,SAASyE,OAAOF,EAAO,OAAO7F,EAAG,WAAW,CAACO,YAAY,UAAUL,MAAM,CAAC,KAAO,OAAO,YAAc,YAAY,UAAY,KAAK,kBAAkB,IAAIkF,MAAM,CAACC,MAAO/D,EAASJ,MAAOoE,SAAS,SAAUC,GAAMzF,EAAI0F,KAAKlE,EAAU,QAASiE,IAAME,WAAW,oBAAoBzF,EAAG,YAAY,CAACO,YAAY,cAAcL,MAAM,CAAC,KAAOoB,EAASzE,KAAK,MAAQ,iBAAiB,cAAc,UAAU,CAAEyE,EAASzE,MAAQyE,EAASzE,KAAKY,OAAQqC,EAAI8F,GAAItE,EAASzE,MAAM,SAASkC,EAAKsF,GAAK,OAAOrE,EAAG,MAAM,CAACqE,IAAIA,EAAI9D,YAAY,+CAA+C,CAACP,EAAG,WAAW,CAACO,YAAY,SAASL,MAAM,CAAC,QAAUnB,EAAKhC,MAAMiD,EAAG,MAAM,CAACO,YAAY,WAAW,CAACP,EAAG,OAAO,CAACF,EAAIe,GAAG,SAASb,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,OAAO,IAAM,EAAE,MAAQ,MAAMkF,MAAM,CAACC,MAAOtG,EAAKiE,MAAOsC,SAAS,SAAUC,GAAMzF,EAAI0F,KAAKzG,EAAM,QAASe,EAAIkG,GAAGT,KAAOE,WAAW,iBAAiB,GAAGzF,EAAG,IAAI,CAACO,YAAY,+BAA+BF,GAAG,CAAC,MAAQ,SAASyF,GAAQ,OAAOxE,EAASzE,KAAKkJ,OAAO1B,EAAK,QAAQ,MAAKrE,EAAG,MAAM,CAACO,YAAY,YAAY,CAACT,EAAIe,GAAG,gBAAgB,IAAI,QAAO,GAAGb,EAAG,SAAS,CAACO,YAAY,0BAA0BL,MAAM,CAAC,OAAS,KAAKJ,EAAI8F,GAAI9F,EAAIoC,WAAW,SAAS+D,EAAMJ,GAAO,OAAO7F,EAAG,SAAS,CAACqE,IAAIwB,EAAM3F,MAAM,CAAC,KAAO,IAAIJ,EAAI8F,GAAIK,GAAO,SAASC,EAAG7B,GAAK,OAAOrE,EAAG,MAAM,CAACqE,IAAIA,EAAI9D,YAAY,UAAU,CAACP,EAAG,MAAM,CAACO,YAAY,WAAW,CAACT,EAAIe,GAAGf,EAAIgB,GAAGoF,EAAG1E,UAAUxB,EAAG,YAAY,CAACE,MAAM,CAAC,KAAOgG,EAAGxE,KAAK,KAAO5B,EAAIqD,WAAW,gBAAgB+C,EAAGzE,SAAS,kBAAkByE,EAAGvE,WAAW,MAAQ,iBAAiB,cAAc,UAAU,CAAEuE,EAAGxE,MAAQwE,EAAGxE,KAAKjE,OAAQqC,EAAI8F,GAAIM,EAAGxE,MAAM,SAAS3C,EAAKsF,GAAK,OAAOrE,EAAG,MAAM,CAACqE,IAAIA,EAAI9D,YAAY,+CAA+C,CAAiB,iBAARxB,EAAkBiB,EAAG,WAAW,CAACO,YAAY,SAASL,MAAM,CAAC,QAAUnB,KAAQe,EAAIkB,KAAqB,UAAfmD,YAAOpF,GAAkBiB,EAAG,WAAW,CAACO,YAAY,SAASL,MAAM,CAAC,KAAOnB,KAAQe,EAAIkB,KAAKhB,EAAG,IAAI,CAACO,YAAY,+BAA+BF,GAAG,CAAC,MAAQ,SAASyF,GAAQ,OAAOI,EAAGxE,KAAKqE,OAAO1B,EAAK,QAAQ,MAAKrE,EAAG,MAAM,CAACO,YAAY,YAAY,CAACT,EAAIe,GAAG,gBAAgB,IAAI,MAAK,MAAK,IAAI,KAAKb,EAAG,eAAe,CAACA,EAAG,YAAY,CAACO,YAAY,YAAYL,MAAM,CAAC,KAAO,sBAAsB,KAAO,UAAU,QAAUJ,EAAIqC,SAAS9B,GAAG,CAAC,MAAQP,EAAI6E,SAAS,CAAC7E,EAAIe,GAAG,aAAa,IAAI,IAAI,KAElwK,IDUpB,EACA,KACA,WACA,OAIa,Y,mEEnBmY,ECQnY,CACf1C,KAAA,iBACAC,MAAA,SACAvB,KAAA,WACA,UAGAyB,SAAA,GACAM,QAAA,CACAuH,OAAA,WACAC,OAAAC,QAAA5I,OACA,KAAAsH,QAAAuB,IAAA,GAEA,KAAAvB,QAAAC,KAAA,OAIAuB,QAAA,aACA7H,WAAA,I,wBClBI8H,EAAY,YACd,GCTW,WAAkB,IAAaxG,EAALD,KAAYE,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACO,YAAY,oBAAoB,CAACP,EAAG,iBAAiB,CAACE,MAAM,CAAC,QAAnGH,KAAiH5B,MAAMkC,GAAG,CAAC,KAA3HN,KAAsIoG,UAAtIpG,KAAoJoF,GAAG,YAAY,KAEpL,IDUpB,EACA,KACA,KACA,MAIa,IAAAqB,E","file":"js/chunk-2aa36290.f7bdc53f.js","sourcesContent":["import { $helper, $cms, $_https, __cms } from \"@jx3box/jx3box-common/js/https.js\";\nimport qs from \"qs\";\n\nfunction get_item_plan(plan_id) {\n\treturn $helper()({\n\t\tmethod: \"GET\",\n\t\turl: `/api/item_plan/${plan_id}`,\n\t});\n}\n\n// 提交物品清单\nfunction save_item_plan(params) {\n\tlet action = params.id ? \"update\" : \"create\";\n\tlet data = { action: action, plan: params };\n\n\treturn $helper()({\n\t\tmethod: \"POST\",\n\t\turl: `/api/item_plan`,\n\t\tdata: qs.stringify(data),\n\t});\n}\n\n// 获取我的清单-old\nfunction get_my_item_plans(params) {\n\treturn $helper()({\n\t\tmethod: \"GET\",\n\t\turl: `/api/my/item_plans`,\n\t\tparams: params,\n\t});\n}\nfunction delete_item_plan(plan_id) {\n\treturn $helper()({\n\t\tmethod: \"PUT\",\n\t\turl: `/api/item_plan/remove`,\n\t\tdata: qs.stringify({ plan_id: plan_id }),\n\t});\n}\n\n// 获取我的清单\nfunction getMyPlans(params) {\n\treturn $cms()\n\t\t.get(`/api/cms/app/item-plan/mine`, { params })\n\t\t.then((res) => {\n\t\t\treturn res.data.data;\n\t\t});\n}\nfunction getPlanByID(id) {\n\treturn $cms()\n\t\t.get(`/api/cms/app/item-plan/${id}`)\n\t\t.then((res) => {\n\t\t\treturn res.data.data;\n\t\t});\n}\n// 新增清单\nfunction addMyPlans(params) {\n\treturn $cms().post(`/api/cms/app/item-plan`, params);\n}\n// 修改我的清单\nfunction postMyPlans(id, params) {\n\treturn $cms().put(`/api/cms/app/item-plan/${id}`, params);\n}\n// 删除我的清单\nfunction delMyPlans(id) {\n\treturn $cms().delete(`/api/cms/app/item-plan/${id}`);\n}\n\nexport { get_item_plan, save_item_plan, get_my_item_plans, delete_item_plan, getMyPlans, delMyPlans, addMyPlans, postMyPlans, getPlanByID };\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_icon.vue?vue&type=style&index=1&id=409202d7&prod&lang=less&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./item_plan.vue?vue&type=style&index=0&id=68adcb47&prod&scoped=true&lang=less\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less\"","import { $node } from \"@jx3box/jx3box-common/js/https.js\";\n\n// 物品搜索\nfunction search_items(keyword, length, fields, is_equip = null) {\n\tlet params = { keyword: keyword, limit: length, fields: fields };\n\tif (is_equip !== null) params.is_equip = is_equip ? 1 : 0;\n\n\treturn $node().get(`/item/search`, {\n        params\n    })\n}\n\n// 物品搜索\nfunction searchItems(params) {\n\treturn $node()\n\t\t.get(`/item/search`, { params })\n\t\t.then((res) => {\n\t\t\treturn res.data.data;\n\t\t});\n}\n\n// 获取物品\nfunction get_item(item_id) {\n\tif (!item_id) return;\n\treturn $node().get(`/item/id/${item_id}`);\n}\nexport { search_items, get_item, searchItems };\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_icon.vue?vue&type=style&index=0&id=409202d7&prod&lang=less\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_icon.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_icon.vue?vue&type=script&lang=js\"","<template>\n\t<el-popover v-if=\"source\" placement=\"right-start\" width=\"auto\" :trigger=\"click_trigger ? 'click' : 'hover'\" :disabled=\"dishoverable\" popper-class=\"m-item-icon-popup\" :visible-arrow=\"false\" transition=\"none\" :close-delay=\"0\" @show=\"show\">\n\t\t<template slot=\"reference\">\n\t\t\t<div class=\"m-item-icon\">\n\t\t\t\t<div class=\"u-item-icon\">\n\t\t\t\t\t<div class=\"u-border\" :style=\"{ backgroundImage: item_border(source), opacity: source.Quality == 5 ? 0.9 : 1 }\"></div>\n\t\t\t\t\t<div class=\"u-border-quest\" :style=\"{ backgroundImage: item_border_quest(source) }\"></div>\n\t\t\t\t\t<img class=\"u-item-icon\" :src=\"icon_url(source.IconID)\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"u-name\" :class=\"`quality-${source.Quality}`\">{{ source.Name }}</div>\n\t\t\t</div>\n\t\t</template>\n\n\t\t<jx3-item :item=\"source\" />\n\t</el-popover>\n</template>\n\n<script>\nimport Item from \"@jx3box/jx3box-editor/src/Item\";\nimport { get_item } from \"../service/item.js\";\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport { iconLink } from \"@jx3box/jx3box-common/js/utils\";\n\nexport default {\n\tname: \"ItemIcon\",\n\tprops: [\"item\", \"item_id\", \"dishoverable\", \"click_trigger\"],\n\tdata() {\n\t\treturn {\n\t\t\tsource: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tclient: function () {\n\t\t\treturn this.$store.state.client;\n\t\t},\n\t},\n\tcomponents: {\n\t\t\"jx3-item\": Item,\n\t},\n\tmethods: {\n\t\tget_data(item_id) {\n\t\t\tif (item_id) {\n\t\t\t\tget_item(item_id).then((res) => {\n\t\t\t\t\tlet data = res.data;\n\t\t\t\t\tlet item = data.data.item;\n\t\t\t\t\tif (Object.keys(item).length) this.source = item;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tshow() {\n\t\t\tif (!this.source || typeof this.source.Genre === \"undefined\") {\n\t\t\t\tthis.get_data(this.source.id);\n\t\t\t}\n\t\t},\n\t\titem_border(item) {\n\t\t\tswitch (item.Quality) {\n\t\t\t\tcase 3:\n\t\t\t\t\treturn `url(${__imgPath}image/item/blue.png)`;\n\t\t\t\tcase 4:\n\t\t\t\t\treturn `url(${__imgPath}image/item/purple.png)`;\n\t\t\t\tcase 5:\n\t\t\t\t\treturn `url(${__imgPath}image/item/orange.gif)`;\n\t\t\t\tdefault:\n\t\t\t\t\treturn \"\";\n\t\t\t}\n\t\t},\n\t\titem_border_quest(item) {\n\t\t\tif (item.IsQuest > 0) return `url(${__imgPath}image/item/renwu.png)`;\n\t\t\treturn \"\";\n\t\t},\n\t\ticon_url: function (id) {\n\t\t\t// return iconLink(id, this.client);\n\t\t\treturn iconLink(id); //收藏跨正式服/怀旧服\n\t\t},\n\t},\n\twatch: {\n\t\titem: {\n\t\t\timmediate: true,\n\t\t\thandler() {\n\t\t\t\tthis.source = this.item;\n\t\t\t},\n\t\t},\n\t\titem_id: {\n\t\t\timmediate: true,\n\t\t\thandler() {\n\t\t\t\tthis.get_data(this.item_id);\n\t\t\t},\n\t\t},\n\t},\n};\n</script>\n\n<style lang=\"less\">\n.m-item-icon-popup {\n\tmin-width: initial;\n\tpadding: 0;\n\tborder: none;\n\tbox-shadow: none;\n\tbackground-color: transparent;\n\ttransform: translateY(-10px);\n}\n</style>\n<style lang=\"less\" scoped>\n.m-item-icon {\n\t.flex;\n\talign-items: center;\n\t.u-name {\n\t\t.ml(10px);\n\t}\n\t.quality-1 {\n\t\tcolor: #fff;\n\t}\n\t.quality-2 {\n\t\tcolor: #00d24b;\n\t}\n\t.quality-3 {\n\t\tcolor: #007eff;\n\t}\n\t.quality-4 {\n\t\tcolor: #ff2dff;\n\t}\n\t.quality-5 {\n\t\tcolor: #ffa500;\n\t}\n}\n.u-item-icon {\n\t.pr;\n\t.dbi;\n\n\t.u-border,\n\t.u-border-quest {\n\t\t.pa;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\t.w(100%);\n\t\t.h(100%);\n\t\tbox-sizing: border-box;\n\t\tbackground-size: contain;\n\t\t.z(2);\n\t}\n\n\t.u-border-quest {\n\t\t.z(3);\n\t}\n\n\t.u-item-icon {\n\t\t.pr;\n\t\t.db;\n\t\t.w(36px);\n\t\t.h(auto);\n\t\tmax-height: 36px;\n\t\t.z(1);\n\t}\n}\n</style>\n","import { render, staticRenderFns } from \"./publish_icon.vue?vue&type=template&id=409202d7&scoped=true\"\nimport script from \"./publish_icon.vue?vue&type=script&lang=js\"\nexport * from \"./publish_icon.vue?vue&type=script&lang=js\"\nimport style0 from \"./publish_icon.vue?vue&type=style&index=0&id=409202d7&prod&lang=less\"\nimport style1 from \"./publish_icon.vue?vue&type=style&index=1&id=409202d7&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"409202d7\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.source)?_c('el-popover',{attrs:{\"placement\":\"right-start\",\"width\":\"auto\",\"trigger\":_vm.click_trigger ? 'click' : 'hover',\"disabled\":_vm.dishoverable,\"popper-class\":\"m-item-icon-popup\",\"visible-arrow\":false,\"transition\":\"none\",\"close-delay\":0},on:{\"show\":_vm.show}},[_c('template',{slot:\"reference\"},[_c('div',{staticClass:\"m-item-icon\"},[_c('div',{staticClass:\"u-item-icon\"},[_c('div',{staticClass:\"u-border\",style:({ backgroundImage: _vm.item_border(_vm.source), opacity: _vm.source.Quality == 5 ? 0.9 : 1 })}),_c('div',{staticClass:\"u-border-quest\",style:({ backgroundImage: _vm.item_border_quest(_vm.source) })}),_c('img',{staticClass:\"u-item-icon\",attrs:{\"src\":_vm.icon_url(_vm.source.IconID)}})]),_c('div',{staticClass:\"u-name\",class:`quality-${_vm.source.Quality}`},[_vm._v(_vm._s(_vm.source.Name))])])]),_c('jx3-item',{attrs:{\"item\":_vm.source}})],2):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"m-publish-box\">\n\t\t<!-- 返回 -->\n\t\t<publish-header name=\"物品清单\" :localDraft=\"false\">\n\t\t\t<slot name=\"header\"></slot>\n\t\t</publish-header>\n\t\t<!-- 表单 -->\n\t\t<el-form class=\"u-form\" label-position=\"left\" label-width=\"80px\">\n\t\t\t<!-- 清单名称 -->\n\t\t\t<el-form-item label=\"标题\">\n\t\t\t\t<el-input v-model=\"data.title\" placeholder=\"请输入物品清单的标题\" maxlength=\"20\" show-word-limit></el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item label=\"可见性\">\n\t\t\t\t<el-radio v-model=\"data.public\" :label=\"1\">公开</el-radio>\n\t\t\t\t<el-radio v-model=\"data.public\" :label=\"0\">私有</el-radio>\n\t\t\t</el-form-item>\n\t\t\t<!-- 清单描述 -->\n\t\t\t<el-form-item label=\"描述\">\n\t\t\t\t<el-input type=\"textarea\" :rows=\"3\" v-model=\"data.description\" placeholder=\"简单说明一下你的物品清单\" :maxlength=\"2000\" show-word-limit></el-input>\n\t\t\t</el-form-item>\n\t\t\t<!-- 清单类型 -->\n\t\t\t<el-form-item label=\"类型\">\n\t\t\t\t<el-radio-group v-model=\"data.type\" size=\"medium\" @change=\"resetPages\">\n\t\t\t\t\t<el-radio-button label=\"1\">道具清单</el-radio-button>\n\t\t\t\t\t<el-radio-button label=\"2\">装备清单</el-radio-button>\n\t\t\t\t</el-radio-group>\n\t\t\t\t<el-button class=\"u-add-plan\" size=\"medium\" icon=\"el-icon-plus\" @click=\"addRelation\">新增分组</el-button>\n\t\t\t</el-form-item>\n\t\t\t<!-- 制作清单 -->\n\t\t\t<el-form-item label=\"清单\">\n\t\t\t\t<div class=\"m-plan-list\">\n\t\t\t\t\t<!-- 搜索物品 -->\n\t\t\t\t\t<div class=\"u-list-search\" v-if=\"searchList.length\">\n\t\t\t\t\t\t<el-input class=\"u-title\" placeholder=\"请输入物品名称（可适配中括号）\" prefix-icon=\"el-icon-search\" v-model.lazy.trim=\"keyword\"></el-input>\n\t\t\t\t\t\t<draggable v-model=\"searchList\" draggable=\".u-change\" :move=\"moveHandle\" :group=\"{ name: 'draggable-item', pull: 'clone', put: false }\">\n\t\t\t\t\t\t\t<jx3-item-simple class=\"u-change\" v-for=\"(item, index) in searchList\" :key=\"index\" :item=\"item\" />\n\t\t\t\t\t\t</draggable>\n\n\t\t\t\t\t\t<el-pagination small class=\"m-archive-pages\" background layout=\"prev, pager, next, jumper\" :hide-on-single-page=\"true\" :page-size=\"per\" :total=\"total\" :current-page.sync=\"page\" size=\"mini\"></el-pagination>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- 物品子清单 -->\n\t\t\t\t\t<el-row v-if=\"data.type == '1'\" class=\"u-list-box\" :gutter=\"20\">\n\t\t\t\t\t\t<el-col v-for=\"(relation, index) in data.relation\" :key=\"index\" :span=\"6\">\n\t\t\t\t\t\t\t<div class=\"u-list\">\n\t\t\t\t\t\t\t\t<i class=\"u-list-close el-icon-circle-close\" @click=\"data.relation.splice(index, 1)\"></i>\n\t\t\t\t\t\t\t\t<el-input class=\"u-title\" type=\"text\" placeholder=\"子清单标题（选填）\" v-model=\"relation.title\" maxlength=\"20\" show-word-limit></el-input>\n\t\t\t\t\t\t\t\t<draggable class=\"u-item-drag\" :list=\"relation.data\" group=\"draggable-item\" ghost-class=\"ghost\">\n\t\t\t\t\t\t\t\t\t<template v-if=\"relation.data && relation.data.length\">\n\t\t\t\t\t\t\t\t\t\t<div v-for=\"(item, key) in relation.data\" :key=\"key\" class=\"u-selected u-selected-item u-selected-count\">\n\t\t\t\t\t\t\t\t\t\t\t<itemIcon class=\"u-icon\" :item_id=\"item.id\" />\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"u-count\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span>数量：</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<el-input-number size=\"mini\" v-model.number=\"item.count\" :min=\"1\" label=\"数字\"></el-input-number>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"u-close el-icon-circle-close\" @click=\"relation.data.splice(key, 1)\"></i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<div class=\"u-normal\" v-else>拖拽所需道具到此处</div>\n\t\t\t\t\t\t\t\t</draggable>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-col>\n\t\t\t\t\t</el-row>\n\t\t\t\t\t<!-- 装备子清单 -->\n\t\t\t\t\t<el-row v-else class=\"u-list-box u-list-equip\" :gutter=\"20\">\n\t\t\t\t\t\t<el-col v-for=\"(equip, index) in equipList\" :key=\"index\" :span=\"6\">\n\t\t\t\t\t\t\t<div v-for=\"(eq, key) in equip\" :key=\"key\" class=\"u-list\">\n\t\t\t\t\t\t\t\t<div class=\"u-title\">{{ eq.label }}</div>\n\t\t\t\t\t\t\t\t<draggable :list=\"eq.list\" :move=\"moveHandle\" :data-AucGenre=\"eq.AucGenre\" :data-AucSubType=\"eq.AucSubType\" group=\"draggable-item\" ghost-class=\"ghost\">\n\t\t\t\t\t\t\t\t\t<template v-if=\"eq.list && eq.list.length\">\n\t\t\t\t\t\t\t\t\t\t<div v-for=\"(item, key) in eq.list\" :key=\"key\" class=\"u-selected u-selected-item u-selected-equip\">\n\t\t\t\t\t\t\t\t\t\t\t<itemIcon class=\"u-icon\" v-if=\"typeof item == 'string'\" :item_id=\"item\" />\n\t\t\t\t\t\t\t\t\t\t\t<itemIcon class=\"u-icon\" v-if=\"typeof item == 'object'\" :item=\"item\" />\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"u-close el-icon-circle-close\" @click=\"eq.list.splice(key, 1)\"></i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<div class=\"u-normal\" v-else>拖拽所需道具到此处</div>\n\t\t\t\t\t\t\t\t</draggable>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-col>\n\t\t\t\t\t</el-row>\n\t\t\t\t</div>\n\t\t\t</el-form-item>\n\t\t\t<!-- 提交表单 -->\n\t\t\t<el-form-item>\n\t\t\t\t<el-button class=\"u-publish\" icon=\"el-icon-s-promotion\" type=\"primary\" @click=\"submit\" :loading=\"loading\">提交物品清单</el-button>\n\t\t\t</el-form-item>\n\t\t</el-form>\n\t</div>\n</template>\n<script>\nimport header from \"@/components/publish_header.vue\";\nimport ItemSimple from \"@jx3box/jx3box-editor/src/ItemSimple\";\nimport itemIcon from \"@/components/publish_icon.vue\";\nimport draggable from \"vuedraggable\";\nimport { searchItems } from \"../service/item\";\nimport { getPlanByID, postMyPlans, addMyPlans } from \"../service/item_plan\";\nimport { iconLink } from \"@jx3box/jx3box-common/js/utils\";\nconst default_plan = {\n\tid: \"\",\n\ttitle: \"\",\n\tpublic: 1,\n\ttype: \"1\",\n\tdescription: \"\",\n\trelation: [],\n};\nconst default_equip = [\n\t[\n\t\t{ title: \"melee_weapon\", label: \"武器\", AucGenre: 1, list: [] },\n\t\t{ title: \"range_weapon\", label: \"暗器\", AucGenre: 2, list: [] },\n\t],\n\t[\n\t\t{ title: \"helm\", label: \"帽子\", AucGenre: 3, AucSubType: 2, list: [] },\n\t\t{ title: \"chest\", label: \"上衣\", AucGenre: 3, AucSubType: 1, list: [] },\n\t\t{ title: \"waist\", label: \"腰带\", AucGenre: 3, AucSubType: 3, list: [] },\n\t],\n\t[\n\t\t{ title: \"bangle\", label: \"护腕\", AucGenre: 3, AucSubType: 6, list: [] },\n\t\t{ title: \"pants\", label: \"下装\", AucGenre: 3, AucSubType: 4, list: [] },\n\t\t{ title: \"boots\", label: \"鞋子\", AucGenre: 3, AucSubType: 5, list: [] },\n\t],\n\t[\n\t\t{ title: \"amulet\", label: \"项链\", AucGenre: 4, AucSubType: 1, list: [] },\n\t\t{ title: \"pendant\", label: \"腰坠\", AucGenre: 4, AucSubType: 3, list: [] },\n\t\t{ title: \"ring_1\", label: \"戒指\", AucGenre: 4, AucSubType: 2, list: [] },\n\t\t{ title: \"ring_2\", label: \"戒指\", AucGenre: 4, AucSubType: 2, list: [] },\n\t],\n];\nexport default {\n\tname: \"plan\",\n\tcomponents: {\n\t\tdraggable,\n\t\t\"publish-header\": header,\n\t\t\"jx3-item-simple\": ItemSimple,\n\t\titemIcon,\n\t},\n\tdata: function () {\n\t\treturn {\n\t\t\t// 清单\n\t\t\tdata: Object.assign({}, default_plan),\n\n\t\t\trelationList: [],\n\t\t\tequipList: [...default_equip],\n\n\t\t\t// 物品\n\t\t\tloading: false,\n\t\t\tkeyword: \"\",\n\t\t\tper: 15,\n\t\t\tpage: 1,\n\t\t\ttotal: 1,\n\t\t\tsearchList: [],\n\n\t\t\titem_id: \"\",\n\t\t};\n\t},\n\tcomputed: {\n\t\tplan_id() {\n\t\t\treturn this.$route.params.plan_id;\n\t\t},\n\t\t// 搜索参数\n\t\tsearch_params() {\n\t\t\tlet params = {\n\t\t\t\tpage: this.page,\n\t\t\t\tlimit: this.per,\n\t\t\t\tis_equip: this.data.type == 2 ? 1 : 0,\n\t\t\t\tfields: [\"id\", \"UiID\", \"Name\", \"IconID\", \"Quality\", \"AucGenre\", \"AucSubType\", \"Desc\"],\n\t\t\t\tapply: 1,\n\t\t\t};\n\t\t\tif (this.keyword) params.keyword = this.keyword;\n\t\t\treturn params;\n\t\t},\n\t},\n\twatch: {\n\t\t// 搜索物品重置\n\t\tkeyword() {\n\t\t\tthis.resetPages();\n\t\t},\n\t\t// 重新搜索\n\t\tsearch_params: {\n\t\t\timmediate: true,\n\t\t\tdeep: true,\n\t\t\thandler: function () {\n\t\t\t\tthis.loadItems();\n\t\t\t},\n\t\t},\n\t},\n\n\tmethods: {\n\t\t// 物品\n\t\t// ===================================\n\t\t// 物品搜索\n\t\tloadItems() {\n\t\t\tsearchItems(this.search_params).then((res) => {\n\t\t\t\tres.data.map((item) => (item.count = 1));\n\t\t\t\tthis.searchList = res.data;\n\t\t\t\tthis.total = res.total;\n\t\t\t});\n\t\t},\n\t\t// 重置分页\n\t\tresetPages() {\n\t\t\tthis.page = 1;\n\t\t},\n\t\t// 物品id转图片链接\n\t\ticonLink,\n\n\t\t// 清单\n\t\t// ===================================\n\t\t// 新增清单\n\t\taddRelation() {\n\t\t\tthis.data.relation.unshift({\n\t\t\t\ttitle: \"\",\n\t\t\t\tdata: [],\n\t\t\t});\n\t\t},\n\t\t// 装备清单的移动\n\t\tmoveHandle(e) {\n\t\t\tif (e.to.classList.contains(\"u-item-drag\")) return;\n\t\t\tlet AucGenre = e.to.getAttribute(\"data-AucGenre\");\n\t\t\tlet AucSubType = e.to.getAttribute(\"data-AucSubType\");\n\t\t\tlet result = e.draggedContext.element.AucGenre == AucGenre;\n\t\t\tif (AucSubType !== null) result = result && e.draggedContext.element.AucSubType == AucSubType;\n\t\t\treturn result;\n\t\t},\n\n\t\t// 数据处理\n\t\t// ===================================\n\t\t// 获取plan_id的数据\n\t\tgetPlanData() {\n\t\t\tgetPlanByID(this.plan_id).then((res) => {\n\t\t\t\tres = this.extractID(res);\n\t\t\t\tconsole.log(res);\n\t\t\t\tthis.data = res;\n\t\t\t\tif (this.data.type == 2) this.toEquipList(this.data.relation);\n\t\t\t});\n\t\t},\n\t\t//处理旧数据\n\t\textractID(data) {\n\t\t\tif (data.type == 1) {\n\t\t\t\tdata.relation = data.relation.map((item) => {\n\t\t\t\t\titem.data = item.data.map((el) => {\n\t\t\t\t\t\tif (typeof el == \"string\") el = { id: el, count: 1 };\n\t\t\t\t\t\tif (typeof el == \"object\") el = { id: el.id, count: el.count };\n\t\t\t\t\t\treturn el;\n\t\t\t\t\t});\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdata.relation = this.equipItem(data.relation);\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\t\t// 将装备object转换为string\n\t\tequipItem(data) {\n\t\t\tfor (const key in data) {\n\t\t\t\tdata[key] = data[key].map((item) => {\n\t\t\t\t\tif (typeof item == \"object\") item = item.id;\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\t\t// 装备分组\n\t\ttoEquipList(_obj) {\n\t\t\tthis.equipList.map((list) => {\n\t\t\t\tlist.map((el) => {\n\t\t\t\t\tif (_obj.hasOwnProperty(el.title)) {\n\t\t\t\t\t\tel.list = _obj[el.title];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t// 装备提交数据转换\n\t\ttoEquip() {\n\t\t\tlet obj = {};\n\t\t\tthis.equipList.forEach((list) => {\n\t\t\t\tlist.forEach((el) => {\n\t\t\t\t\tobj[el.title] = el.list;\n\t\t\t\t});\n\t\t\t});\n\t\t\tobj = this.equipItem(obj);\n\t\t\tthis.data.relation = obj;\n\t\t},\n\n\t\t// --提交清单-------\n\t\tsubmit() {\n\t\t\tif (this.data.type == 2) this.toEquip();\n\n\t\t\tthis.loading = true;\n\t\t\tthis.plan_id\n\t\t\t\t? postMyPlans(this.plan_id, this.data)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.$message({ message: \"物品清单修改成功\", type: \"success\" });\n\t\t\t\t\t\t\tthis.$router.push({ name: \"bucket\", params: { type: \"item_plan\" } });\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\t})\n\t\t\t\t: addMyPlans(this.data)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.$message({ message: \"物品清单提交成功\", type: \"success\" });\n\t\t\t\t\t\t\tthis.$router.push({ name: \"bucket\", params: { type: \"item_plan\" } });\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\t});\n\t\t},\n\t},\n\tcreated: function () {\n\t\tif (this.plan_id) this.getPlanData();\n\t},\n};\n</script>\n<style scoped lang=\"less\">\n@import \"../assets/css/item_plan.less\";\n.el-col {\n\tmin-width: 260px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./item_plan.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./item_plan.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./item_plan.vue?vue&type=template&id=68adcb47&scoped=true\"\nimport script from \"./item_plan.vue?vue&type=script&lang=js\"\nexport * from \"./item_plan.vue?vue&type=script&lang=js\"\nimport style0 from \"./item_plan.vue?vue&type=style&index=0&id=68adcb47&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68adcb47\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-box\"},[_c('publish-header',{attrs:{\"name\":\"物品清单\",\"localDraft\":false}},[_vm._t(\"header\")],2),_c('el-form',{staticClass:\"u-form\",attrs:{\"label-position\":\"left\",\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入物品清单的标题\",\"maxlength\":\"20\",\"show-word-limit\":\"\"},model:{value:(_vm.data.title),callback:function ($$v) {_vm.$set(_vm.data, \"title\", $$v)},expression:\"data.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"可见性\"}},[_c('el-radio',{attrs:{\"label\":1},model:{value:(_vm.data.public),callback:function ($$v) {_vm.$set(_vm.data, \"public\", $$v)},expression:\"data.public\"}},[_vm._v(\"公开\")]),_c('el-radio',{attrs:{\"label\":0},model:{value:(_vm.data.public),callback:function ($$v) {_vm.$set(_vm.data, \"public\", $$v)},expression:\"data.public\"}},[_vm._v(\"私有\")])],1),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":3,\"placeholder\":\"简单说明一下你的物品清单\",\"maxlength\":2000,\"show-word-limit\":\"\"},model:{value:(_vm.data.description),callback:function ($$v) {_vm.$set(_vm.data, \"description\", $$v)},expression:\"data.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"类型\"}},[_c('el-radio-group',{attrs:{\"size\":\"medium\"},on:{\"change\":_vm.resetPages},model:{value:(_vm.data.type),callback:function ($$v) {_vm.$set(_vm.data, \"type\", $$v)},expression:\"data.type\"}},[_c('el-radio-button',{attrs:{\"label\":\"1\"}},[_vm._v(\"道具清单\")]),_c('el-radio-button',{attrs:{\"label\":\"2\"}},[_vm._v(\"装备清单\")])],1),_c('el-button',{staticClass:\"u-add-plan\",attrs:{\"size\":\"medium\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addRelation}},[_vm._v(\"新增分组\")])],1),_c('el-form-item',{attrs:{\"label\":\"清单\"}},[_c('div',{staticClass:\"m-plan-list\"},[(_vm.searchList.length)?_c('div',{staticClass:\"u-list-search\"},[_c('el-input',{staticClass:\"u-title\",attrs:{\"placeholder\":\"请输入物品名称（可适配中括号）\",\"prefix-icon\":\"el-icon-search\"},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"keyword\"}}),_c('draggable',{attrs:{\"draggable\":\".u-change\",\"move\":_vm.moveHandle,\"group\":{ name: 'draggable-item', pull: 'clone', put: false }},model:{value:(_vm.searchList),callback:function ($$v) {_vm.searchList=$$v},expression:\"searchList\"}},_vm._l((_vm.searchList),function(item,index){return _c('jx3-item-simple',{key:index,staticClass:\"u-change\",attrs:{\"item\":item}})}),1),_c('el-pagination',{staticClass:\"m-archive-pages\",attrs:{\"small\":\"\",\"background\":\"\",\"layout\":\"prev, pager, next, jumper\",\"hide-on-single-page\":true,\"page-size\":_vm.per,\"total\":_vm.total,\"current-page\":_vm.page,\"size\":\"mini\"},on:{\"update:currentPage\":function($event){_vm.page=$event},\"update:current-page\":function($event){_vm.page=$event}}})],1):_vm._e(),(_vm.data.type == '1')?_c('el-row',{staticClass:\"u-list-box\",attrs:{\"gutter\":20}},_vm._l((_vm.data.relation),function(relation,index){return _c('el-col',{key:index,attrs:{\"span\":6}},[_c('div',{staticClass:\"u-list\"},[_c('i',{staticClass:\"u-list-close el-icon-circle-close\",on:{\"click\":function($event){return _vm.data.relation.splice(index, 1)}}}),_c('el-input',{staticClass:\"u-title\",attrs:{\"type\":\"text\",\"placeholder\":\"子清单标题（选填）\",\"maxlength\":\"20\",\"show-word-limit\":\"\"},model:{value:(relation.title),callback:function ($$v) {_vm.$set(relation, \"title\", $$v)},expression:\"relation.title\"}}),_c('draggable',{staticClass:\"u-item-drag\",attrs:{\"list\":relation.data,\"group\":\"draggable-item\",\"ghost-class\":\"ghost\"}},[(relation.data && relation.data.length)?_vm._l((relation.data),function(item,key){return _c('div',{key:key,staticClass:\"u-selected u-selected-item u-selected-count\"},[_c('itemIcon',{staticClass:\"u-icon\",attrs:{\"item_id\":item.id}}),_c('div',{staticClass:\"u-count\"},[_c('span',[_vm._v(\"数量：\")]),_c('el-input-number',{attrs:{\"size\":\"mini\",\"min\":1,\"label\":\"数字\"},model:{value:(item.count),callback:function ($$v) {_vm.$set(item, \"count\", _vm._n($$v))},expression:\"item.count\"}})],1),_c('i',{staticClass:\"u-close el-icon-circle-close\",on:{\"click\":function($event){return relation.data.splice(key, 1)}}})],1)}):_c('div',{staticClass:\"u-normal\"},[_vm._v(\"拖拽所需道具到此处\")])],2)],1)])}),1):_c('el-row',{staticClass:\"u-list-box u-list-equip\",attrs:{\"gutter\":20}},_vm._l((_vm.equipList),function(equip,index){return _c('el-col',{key:index,attrs:{\"span\":6}},_vm._l((equip),function(eq,key){return _c('div',{key:key,staticClass:\"u-list\"},[_c('div',{staticClass:\"u-title\"},[_vm._v(_vm._s(eq.label))]),_c('draggable',{attrs:{\"list\":eq.list,\"move\":_vm.moveHandle,\"data-AucGenre\":eq.AucGenre,\"data-AucSubType\":eq.AucSubType,\"group\":\"draggable-item\",\"ghost-class\":\"ghost\"}},[(eq.list && eq.list.length)?_vm._l((eq.list),function(item,key){return _c('div',{key:key,staticClass:\"u-selected u-selected-item u-selected-equip\"},[(typeof item == 'string')?_c('itemIcon',{staticClass:\"u-icon\",attrs:{\"item_id\":item}}):_vm._e(),(typeof item == 'object')?_c('itemIcon',{staticClass:\"u-icon\",attrs:{\"item\":item}}):_vm._e(),_c('i',{staticClass:\"u-close el-icon-circle-close\",on:{\"click\":function($event){return eq.list.splice(key, 1)}}})],1)}):_c('div',{staticClass:\"u-normal\"},[_vm._v(\"拖拽所需道具到此处\")])],2)],1)}),0)}),1)],1)]),_c('el-form-item',[_c('el-button',{staticClass:\"u-publish\",attrs:{\"icon\":\"el-icon-s-promotion\",\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.submit}},[_vm._v(\"提交物品清单\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js\"","<template>\n    <div class=\"m-publish-header\">\n        <el-page-header @back=\"goBack\" :content=\"name\"></el-page-header>\n        <slot></slot>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"publish_header\",\n    props: [\"name\"],\n    data: function() {\n        return {\n        };\n    },\n    computed: {},\n    methods: {\n        goBack: function() {\n            if(window.history.length){\n                this.$router.go(-1);\n            }else{\n                this.$router.push('/')\n            }\n        },\n    },\n    mounted: function() {},\n    components: {\n    },\n};\n</script>\n\n<style lang=\"less\">\n    .m-publish-header{\n        .pr;\n    }\n    \n</style>","import { render, staticRenderFns } from \"./publish_header.vue?vue&type=template&id=36319e52\"\nimport script from \"./publish_header.vue?vue&type=script&lang=js\"\nexport * from \"./publish_header.vue?vue&type=script&lang=js\"\nimport style0 from \"./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-header\"},[_c('el-page-header',{attrs:{\"content\":_vm.name},on:{\"back\":_vm.goBack}}),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}