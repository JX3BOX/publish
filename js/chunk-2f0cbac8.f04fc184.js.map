{"version":3,"sources":["webpack:///./src/views/cms_community.vue","webpack:///./src/views/cms_community.vue?fe25","webpack:///src/views/cms_community.vue","webpack:///./src/views/cms_community.vue?3191","webpack:///./src/service/community.js","webpack:///./src/views/cms_community.vue?607c","webpack:///./src/assets/img/works/repo.svg","webpack:///./src/utils/dateFormat.js"],"names":["staticRenderFns","_c","this","_self","staticClass","attrs","require","name","props","data","loading","total","page","per","content","client","search","statusMap","activeTab","computed","type","$route","params","title","undefined","pageSize","index","publishLink","showWujie","includes","watch","deep","immediate","handler","newval","loadPosts","methods","getStatusCn","status","_this","getMyList","then","res","list","finally","pick","getMyReplyList","edit","id","location","href","del","_this2","$alert","confirmButtonText","callback","action","$message","message","reload","draft","i","_this3","push","publish_status","post_status","publish","_this4","postLink","concat","filter","o","val","isSimpleType","simpleTypes","filters","dateFormat","Date","typeFormat","__postType","visibleFormat","console","log","__visibleMap","statusFormat","component","_vm","directives","rawName","value","expression","_v","model","$$v","slot","on","_e","length","_l","item","key","_m","_s","_f","created_at","updated_at","$event","$next","post","update","put","get","delete","pull","getMyCommentList","deleteMyComment","module","exports","polish","dt","separator","arguments","polished","year","getFullYear","month","getMonth","date","getDate","str"],"mappings":"uQAEIA,EAAkB,CAAC,WAAY,IAAaC,EAALC,KAAYC,MAAMF,GAAG,OAAOA,EAAG,IAAI,CAACG,YAAY,UAAU,CAACH,EAAG,MAAM,CAACI,MAAM,CAAC,IAAMC,EAAQ,e,sECF4Q,ECyFlY,CACfC,KAAA,OACAC,MAAA,GACAC,KAAA,WACA,OACAC,SAAA,EACAD,KAAA,GACAE,MAAA,EACAC,KAAA,EACAC,IAAA,GACAC,QAAA,GAEAC,OAAA,GACAC,OAAA,GACAC,YAEAC,UAAA,UAGAC,SAAA,CACAC,KAAA,WACA,YAAAC,OAAAC,OAAAF,MAEAE,OAAA,WACA,OACAF,KAAA,KAAAA,KACAG,MAAA,KAAAP,aAAAQ,EAEAC,SAAA,KAAAZ,IACAa,MAAA,KAAAd,KACAG,OAAA,KAAAA,SAGAY,YAAA,WACA,uBAEAC,UAAA,WACA,0BAAAC,SAAA,KAAAT,QAGAU,MAAA,CACAV,KAAA,CACAW,MAAA,EACAC,WAAA,EACAC,QAAA,SAAAC,GACA,KAAAtB,KAAA,IAGAU,OAAA,CACAS,MAAA,EACAC,WAAA,EACAC,QAAA,SAAAC,GACA,KAAAC,cAGAjB,UAAA,CACAc,WAAA,EACAC,QAAA,WACA,KAAArB,KAAA,EACA,KAAAuB,eAIAC,QAAA,CACAC,YAAA,SAAAC,GACA,OAAAA,GACA,OACA,WACA,OACA,YACA,OACA,cAEA,QACA,eAGAH,UAAA,eAAAI,EAAA,KAGA,GAFA,KAAA7B,SAAA,EACA,KAAAD,KAAA,GACA,cAAAS,UACAsB,YAAA,KAAAlB,QACAmB,MAAA,SAAAC,GACAH,EAAA9B,KAAAiC,EAAAjC,UAAAkC,KACAJ,EAAA5B,MAAA+B,EAAAjC,UAAAG,KAAAD,SAEAiC,SAAA,WACAL,EAAA7B,SAAA,SAEA,CACA,IAAAY,EAAAuB,eAAA,KAAAvB,OAAA,sBACA,KAAAN,SAAAM,EAAAR,QAAA,KAAAE,QACA8B,YAAAxB,GACAmB,MAAA,SAAAC,GACAH,EAAA9B,KAAAiC,EAAAjC,UAAAkC,KACAJ,EAAA5B,MAAA+B,EAAAjC,UAAAG,KAAAD,SAEAiC,SAAA,WACAL,EAAA7B,SAAA,OAIAqC,KAAA,SAAAC,GACAC,SAAAC,KAAA,iBAAAF,GAEAG,IAAA,SAAAH,GAAA,IAAAI,EAAA,KACA,KAAAC,OAAA,kBACAC,kBAAA,KACAC,SAAA,SAAAC,GACA,WAAAA,GACAL,YAAAH,GAAAP,MAAA,SAAAC,GACAU,EAAAK,SAAA,CACArC,KAAA,UACAsC,QAAA,SAEAT,SAAAU,gBAMAC,MAAA,SAAAZ,EAAAa,GAAA,IAAAC,EAAA,KACAC,KAAAf,EAAA,CACAgB,eAAA,UACAvB,MAAA,SAAAC,GACAoB,EAAAL,SAAA,CACArC,KAAA,UACAsC,QAAA,SAEAI,EAAArD,KAAAoD,GAAAI,YAAA,YAGAC,QAAA,SAAAlB,EAAAa,GAAA,IAAAM,EAAA,KACAJ,KAAAf,EAAA,CACAgB,eAAA,YACAvB,MAAA,SAAAC,GACAyB,EAAAV,SAAA,CACArC,KAAA,UACAsC,QAAA,SAEAS,EAAA1D,KAAAoD,GAAAI,YAAA,cAGAG,SAAA,SAAApB,GACA,oBAAAqB,OAAArB,IAEAsB,OAAA,SAAAC,GACA,KAAA3D,KAAA,EACA,KAAA2D,EAAAnD,MAAAmD,EAAAC,KAEAC,aAAA,SAAAD,GACA,OAAAE,YAAA7C,SAAA2C,KAGAG,QAAA,CACAC,WAAA,SAAAJ,GACA,OAAAI,YAAA,IAAAC,KAAAL,KAEAM,WAAA,SAAAN,GACA,OAAAO,WAAAP,IAEAQ,cAAA,SAAAR,GAEA,OADAS,QAAAC,IAAAV,GACAW,eAAAX,IAEAY,aAAA,SAAAZ,GACA,OAAAvD,EAAAuD,M,wBCvPIa,EAAY,YACd,GHTW,WAAkB,IAAIC,EAAIpF,KAAKD,EAAGqF,EAAInF,MAAMF,GAAG,OAAOA,EAAG,MAAM,CAACsF,WAAW,CAAC,CAAChF,KAAK,UAAUiF,QAAQ,YAAYC,MAAOH,EAAI5E,QAASgF,WAAW,YAAYtF,YAAY,oDAAoD,CAACH,EAAG,MAAM,CAACG,YAAY,2BAA2B,CAACH,EAAG,KAAK,CAACG,YAAY,WAAW,CAACkF,EAAIK,GAAG,QAAQ1F,EAAG,IAAI,CAACG,YAAY,0DAA0DC,MAAM,CAAC,KAAOiF,EAAI3D,cAAc,CAAC1B,EAAG,IAAI,CAACG,YAAY,qBAAqBkF,EAAIK,GAAG,cAAc1F,EAAG,UAAU,CAAC2F,MAAM,CAACH,MAAOH,EAAIpE,UAAWqC,SAAS,SAAUsC,GAAMP,EAAIpE,UAAU2E,GAAKH,WAAW,cAAc,CAACzF,EAAG,cAAc,CAACI,MAAM,CAAC,MAAQ,KAAK,KAAO,WAAWJ,EAAG,cAAc,CAACI,MAAM,CAAC,MAAQ,KAAK,KAAO,YAAY,GAAGJ,EAAG,WAAW,CAACG,YAAY,0BAA0BC,MAAM,CAAC,YAAc,WAAWuF,MAAM,CAACH,MAAOH,EAAItE,OAAQuC,SAAS,SAAUsC,GAAMP,EAAItE,OAAO6E,GAAKH,WAAW,WAAW,CAACzF,EAAG,OAAO,CAACI,MAAM,CAAC,KAAO,WAAWyF,KAAK,WAAW,CAACR,EAAIK,GAAG,SAAS1F,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,SAAS,KAAO,kBAAkByF,KAAK,YAAY,GAAqB,SAAjBR,EAAIpE,UAAsBjB,EAAG,MAAM,CAACG,YAAY,2BAA2B,CAACH,EAAG,WAAW,CAACG,YAAY,WAAWC,MAAM,CAAC,UAAYiF,EAAI1D,WAAWmE,GAAG,CAAC,OAAST,EAAIhB,WAAW,GAAGgB,EAAIU,KAAK/F,EAAG,MAAM,CAACG,YAAY,mBAAmB,CAAEkF,EAAI7E,MAAQ6E,EAAI7E,KAAKwF,OAAQhG,EAAG,KAAK,CAACG,YAAY,wBAAwBkF,EAAIY,GAAIZ,EAAI7E,MAAM,SAAS0F,EAAKtC,GAAG,OAAO5D,EAAG,KAAK,CAACmG,IAAIvC,GAAG,CAACyB,EAAIe,GAAG,GAAE,GAAMpG,EAAG,IAAI,CAACG,YAAY,UAAUC,MAAM,CAAC,OAAS,SAAS,KAAOiF,EAAIlB,SAAS+B,EAAKnD,MAAM,CAAC/C,EAAG,OAAO,CAACqF,EAAIK,GAAGL,EAAIgB,GAAGH,EAAK5E,OAAS4E,EAAKrF,SAAW,YAAYb,EAAG,MAAM,CAACG,YAAY,UAAU,CAACH,EAAG,OAAO,CAACG,YAAY,kBAAkB,CAACH,EAAG,IAAI,CAACG,YAAY,qBAAqBkF,EAAIK,GAAG,SAASL,EAAIgB,GAAGhB,EAAIiB,GAAG,aAAPjB,CAAqBa,EAAKK,aAAa,OAAOvG,EAAG,OAAO,CAACG,YAAY,kBAAkB,CAACH,EAAG,IAAI,CAACG,YAAY,oBAAoBkF,EAAIK,GAAG,SAASL,EAAIgB,GAAGhB,EAAIiB,GAAG,aAAPjB,CAAqBa,EAAKM,aAAa,OAAOxG,EAAG,OAAO,CAACG,YAAY,kBAAkB,CAACH,EAAG,IAAI,CAACG,YAAY,sBAAsBkF,EAAIK,GAAG,SAASL,EAAIgB,GAAGhB,EAAIjD,YAAY8D,EAAK7D,SAAS,SAASrC,EAAG,kBAAkB,CAACG,YAAY,YAAY,CAACH,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,eAAe,MAAQ,MAAM0F,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOpB,EAAIvC,KAAKoD,EAAKnD,QAAQ/C,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,iBAAiB,MAAQ,MAAM0F,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOpB,EAAInC,IAAIgD,EAAKnD,SAAS,IAAI,MAAK,GAAG/C,EAAG,WAAW,CAACG,YAAY,uBAAuBC,MAAM,CAAC,MAAQ,WAAW,KAAO,OAAO,OAAS,GAAG,YAAY,MAAMJ,EAAG,gBAAgB,CAACG,YAAY,wBAAwBC,MAAM,CAAC,WAAa,GAAG,YAAYiF,EAAIzE,IAAI,uBAAsB,EAAK,eAAeyE,EAAI1E,KAAK,OAAS,mCAAmC,MAAQ0E,EAAI3E,OAAOoF,GAAG,CAAC,qBAAqB,SAASW,GAAQpB,EAAI1E,KAAK8F,GAAQ,sBAAsB,SAASA,GAAQpB,EAAI1E,KAAK8F,OAAY,IAAI,KGWtyF1G,GACA,EACA,KACA,KACA,MAIa,UAAAqF,E,uVCff,SAAStB,EAAKzC,GACV,OAAOqF,cAAQC,KAAK,GAADvC,OAHJ,aAGkB,+BAA+B/C,GAGpE,SAASuF,EAAO7D,EAAI1B,GAChB,OAAOqF,cAAQG,IAAI,GAADzC,OAPH,aAOiB,wCAAAA,OAAuCrB,GAAM1B,GAGjF,SAASkB,EAAUlB,GACf,OAAOqF,cAAQI,IAAI,GAAD1C,OAXH,aAWiB,uCAAuC,CAAE/C,WAE7E,SAAS6B,EAAIH,GACT,OAAO2D,cAAQK,OAAO,GAAD3C,OAdN,aAcoB,wCAAAA,OAAuCrB,IAG9E,SAASiE,EAAKjE,GACV,OAAO2D,cAAQI,IAAI,GAAD1C,OAlBH,aAkBiB,wCAAAA,OAAuCrB,IAI3E,SAASF,EAAexB,GACpB,OAAOqF,cAAQI,IAAI,GAAD1C,OAvBH,aAuBiB,uCAAuC,CAAE/C,WAI7E,SAAS4F,EAAiB5F,GACtB,OAAOqF,cAAQI,IAAI,GAAD1C,OA5BH,aA4BiB,yCAAyC,CAAE/C,WAI/E,SAAS6F,EAAgBnE,GACrB,OAAO2D,cAAQK,OAAO,GAAD3C,OAjCN,aAiCoB,0CAAAA,OAAyCrB,M,yDCnChF,W,qBCAAoE,EAAOC,QAAU,IAA0B,yB,4CCgB3C,SAASC,EAAO9C,GACZ,OAAOA,EAAI,GAAM,IAAMA,EAAOA,EAGnBI,IAdf,SAAoB2C,GAA+B,IAA5BC,EAASC,UAAAxB,OAAA,QAAAzE,IAAAiG,UAAA,GAAAA,UAAA,GAAC,IAAIC,IAAQD,UAAAxB,OAAA,QAAAzE,IAAAiG,UAAA,KAAAA,UAAA,GACrCE,EAAOJ,EAAGK,cACVC,EAAQN,EAAGO,WAAa,EACxBC,EAAOR,EAAGS,UACVC,EAAMP,EAAW,GAAHrD,OACXsD,GAAItD,OAAGmD,GAASnD,OAAGiD,EAAOO,IAAMxD,OAAGmD,GAASnD,OAAGiD,EAAOS,IAAK,GAAA1D,OAC3DsD,GAAItD,OAAGmD,GAASnD,OAAGwD,GAAKxD,OAAGmD,GAASnD,OAAG0D,GAC9C,OAAOE","file":"js/chunk-2f0cbac8.f04fc184.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-dashboard-work m-dashboard-cms p-cms-community\"},[_c('div',{staticClass:\"m-dashboard-work-header\"},[_c('h2',{staticClass:\"u-title\"},[_vm._v(\"论坛\")]),_c('a',{staticClass:\"u-publish el-button el-button--primary el-button--small\",attrs:{\"href\":_vm.publishLink}},[_c('i',{staticClass:\"el-icon-document\"}),_vm._v(\" 发布作品 \")])]),_c('el-tabs',{model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},[_c('el-tab-pane',{attrs:{\"label\":\"主题\",\"name\":\"topic\"}}),_c('el-tab-pane',{attrs:{\"label\":\"回帖\",\"name\":\"reply\"}})],1),_c('el-input',{staticClass:\"m-dashboard-work-search\",attrs:{\"placeholder\":\"请输入搜索内容\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"关键词\")]),_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},slot:\"append\"})],1),(_vm.activeTab == 'topic')?_c('div',{staticClass:\"m-dashboard-work-filter\"},[_c('clientBy',{staticClass:\"u-client\",attrs:{\"showWujie\":_vm.showWujie},on:{\"filter\":_vm.filter}})],1):_vm._e(),_c('div',{staticClass:\"m-dashboard-box\"},[(_vm.data && _vm.data.length)?_c('ul',{staticClass:\"m-dashboard-box-list\"},_vm._l((_vm.data),function(item,i){return _c('li',{key:i},[_vm._m(0,true),_c('a',{staticClass:\"u-title\",attrs:{\"target\":\"_blank\",\"href\":_vm.postLink(item.id)}},[_c('span',[_vm._v(_vm._s(item.title || item.content || \"无标题\"))])]),_c('div',{staticClass:\"u-desc\"},[_c('time',{staticClass:\"u-desc-subitem\"},[_c('i',{staticClass:\"el-icon-finished\"}),_vm._v(\" 发布 : \"+_vm._s(_vm._f(\"dateFormat\")(item.created_at))+\" \")]),_c('time',{staticClass:\"u-desc-subitem\"},[_c('i',{staticClass:\"el-icon-refresh\"}),_vm._v(\" 更新 : \"+_vm._s(_vm._f(\"dateFormat\")(item.updated_at))+\" \")]),_c('time',{staticClass:\"u-desc-subitem\"},[_c('i',{staticClass:\"el-icon-receiving\"}),_vm._v(\" 状态 : \"+_vm._s(_vm.getStatusCn(item.status))+\" \")])]),_c('el-button-group',{staticClass:\"u-action\"},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-edit\",\"title\":\"编辑\"},on:{\"click\":function($event){return _vm.edit(item.id)}}}),_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"title\":\"删除\"},on:{\"click\":function($event){return _vm.del(item.id)}}})],1)],1)}),0):_c('el-alert',{staticClass:\"m-dashboard-box-null\",attrs:{\"title\":\"没有找到相关条目\",\"type\":\"info\",\"center\":\"\",\"show-icon\":\"\"}}),_c('el-pagination',{staticClass:\"m-dashboard-box-pages\",attrs:{\"background\":\"\",\"page-size\":_vm.per,\"hide-on-single-page\":true,\"current-page\":_vm.page,\"layout\":\"total, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"update:currentPage\":function($event){_vm.page=$event},\"update:current-page\":function($event){_vm.page=$event}}})],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('i',{staticClass:\"u-icon\"},[_c('img',{attrs:{\"src\":require(\"../assets/img/works/repo.svg\")}})])\n}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./cms_community.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./cms_community.vue?vue&type=script&lang=js\"","<template>\n    <div class=\"m-dashboard-work m-dashboard-cms p-cms-community\" v-loading=\"loading\">\n        <div class=\"m-dashboard-work-header\">\n            <h2 class=\"u-title\">论坛</h2>\n            <a :href=\"publishLink\" class=\"u-publish el-button el-button--primary el-button--small\">\n                <i class=\"el-icon-document\"></i> 发布作品\n            </a>\n        </div>\n\n        <el-tabs v-model=\"activeTab\">\n            <el-tab-pane label=\"主题\" name=\"topic\"></el-tab-pane>\n            <el-tab-pane label=\"回帖\" name=\"reply\"></el-tab-pane>\n        </el-tabs>\n\n        <el-input class=\"m-dashboard-work-search\" placeholder=\"请输入搜索内容\" v-model=\"search\">\n            <span slot=\"prepend\">关键词</span>\n            <el-button slot=\"append\" icon=\"el-icon-search\"></el-button>\n        </el-input>\n\n        <div class=\"m-dashboard-work-filter\" v-if=\"activeTab == 'topic'\">\n            <clientBy class=\"u-client\" @filter=\"filter\" :showWujie=\"showWujie\" />\n            <!-- <orderBy class=\"u-order\" @filter=\"filter\" /> -->\n        </div>\n\n        <div class=\"m-dashboard-box\">\n            <ul class=\"m-dashboard-box-list\" v-if=\"data && data.length\">\n                <li v-for=\"(item, i) in data\" :key=\"i\">\n                    <i class=\"u-icon\">\n                        <img src=\"../assets/img/works/repo.svg\" />\n                        <!-- <img v-else src=\"../assets/img/works/draft.svg\" :title=\"item.post_status | statusFormat\" /> -->\n                    </i>\n                    <a class=\"u-title\" target=\"_blank\" :href=\"postLink(item.id)\">\n                        <span>{{ item.title || item.content || \"无标题\" }}</span>\n                        <!-- <div class=\"u-tags\">\n                            <el-tag type=\"danger\" size=\"mini\" v-if=\"item.is_top == 1\">置顶</el-tag>\n                            <el-tag type=\"danger\" size=\"mini\" v-if=\"item.is_star == 1\">加精</el-tag>\n                            <el-tag type=\"danger\" size=\"mini\" v-if=\"item.is_hight == 1\">高亮</el-tag>\n                        </div> -->\n                    </a>\n                    <div class=\"u-desc\">\n                        <time class=\"u-desc-subitem\">\n                            <i class=\"el-icon-finished\"></i>\n                            发布 :\n                            {{ item.created_at | dateFormat }}\n                        </time>\n                        <time class=\"u-desc-subitem\">\n                            <i class=\"el-icon-refresh\"></i>\n                            更新 :\n                            {{ item.updated_at | dateFormat }}\n                        </time>\n                        <time class=\"u-desc-subitem\">\n                            <i class=\"el-icon-receiving\"></i>\n                            状态 :\n                            {{ getStatusCn(item.status) }}\n                        </time>\n                    </div>\n\n                    <el-button-group class=\"u-action\">\n                        <el-button size=\"mini\" icon=\"el-icon-edit\" title=\"编辑\" @click=\"edit(item.id)\"></el-button>\n                        <el-button size=\"mini\" icon=\"el-icon-delete\" title=\"删除\" @click=\"del(item.id)\"></el-button>\n                    </el-button-group>\n                </li>\n            </ul>\n            <el-alert\n                v-else\n                class=\"m-dashboard-box-null\"\n                title=\"没有找到相关条目\"\n                type=\"info\"\n                center\n                show-icon\n            ></el-alert>\n            <el-pagination\n                class=\"m-dashboard-box-pages\"\n                background\n                :page-size=\"per\"\n                :hide-on-single-page=\"true\"\n                :current-page.sync=\"page\"\n                layout=\"total, prev, pager, next, jumper\"\n                :total=\"total\"\n            ></el-pagination>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { getMyList, del, getMyReplyList } from \"@/service/community.js\";\nimport dateFormat from \"../utils/dateFormat\";\nimport statusMap from \"@/assets/data/status.json\";\nimport {pick} from \"lodash\";\nexport default {\n    name: \"work\",\n    props: [],\n    data: function () {\n        return {\n            loading: false,\n            data: [],\n            total: 1,\n            page: 1,\n            per: 10,\n            content: \"\",\n            // order: \"update\",\n            client: \"\",\n            search: \"\",\n            statusMap,\n\n            activeTab: \"topic\",\n        };\n    },\n    computed: {\n        type: function () {\n            return this.$route.params.type;\n        },\n        params: function () {\n            return {\n                type: this.type,\n                title: this.search || undefined,\n                // order: this.order,\n                pageSize: this.per,\n                index: this.page,\n                client: this.client,\n            };\n        },\n        publishLink: function () {\n            return \"./#/community\";\n        },\n        showWujie: function () {\n            return [\"bps\", \"pvp\", \"bbs\"].includes(this.type);\n        },\n    },\n    watch: {\n        type: {\n            deep: true,\n            immediate: true,\n            handler: function (newval) {\n                this.page = 1;\n            },\n        },\n        params: {\n            deep: true,\n            immediate: true,\n            handler: function (newval) {\n                this.loadPosts();\n            },\n        },\n        activeTab: {\n            immediate: true,\n            handler: function () {\n                this.page = 1;\n                this.loadPosts();\n            },\n        },\n    },\n    methods: {\n        getStatusCn: function (status) {\n            switch (status) {\n                case 1:\n                    return \"正常\";\n                case 2:\n                    return \"待审核\";\n                case 3:\n                    return \"审核未通过\";\n\n                default:\n                    return \"未知状态\";\n            }\n        },\n        loadPosts: function () {\n            this.loading = true;\n            this.data = [];\n            if (this.activeTab == 'topic') {\n                getMyList(this.params)\n                    .then((res) => {\n                        this.data = res.data.data.list;\n                        this.total = res.data.data.page.total;\n                    })\n                    .finally(() => {\n                        this.loading = false;\n                    });\n            } else {\n                const params = pick(this.params, [\"pageSize\", \"index\"]);\n                this.search && (params.content = this.search);\n                getMyReplyList(params)\n                    .then((res) => {\n                        this.data = res.data.data.list;\n                        this.total = res.data.data.page.total;\n                    })\n                    .finally(() => {\n                        this.loading = false;\n                    });\n            }\n        },\n        edit: function (id) {\n            location.href = \"./#/community/\" + id;\n        },\n        del: function (id) {\n            this.$alert(\"确定要删除吗？\", \"确认信息\", {\n                confirmButtonText: \"确定\",\n                callback: (action) => {\n                    if (action == \"confirm\") {\n                        del(id).then((res) => {\n                            this.$message({\n                                type: \"success\",\n                                message: `删除成功`,\n                            });\n                            location.reload();\n                        });\n                    }\n                },\n            });\n        },\n        draft: function (id, i) {\n            push(id, {\n                publish_status: \"draft\",\n            }).then((res) => {\n                this.$message({\n                    type: \"success\",\n                    message: `操作成功`,\n                });\n                this.data[i].post_status = \"draft\";\n            });\n        },\n        publish: function (id, i) {\n            push(id, {\n                publish_status: \"publish\",\n            }).then((res) => {\n                this.$message({\n                    type: \"success\",\n                    message: `操作成功`,\n                });\n                this.data[i].post_status = \"publish\";\n            });\n        },\n        postLink: function (id) {\n            return `/community/${id}`;\n        },\n        filter: function (o) {\n            this.page = 1;\n            this[o.type] = o.val;\n        },\n        isSimpleType: function (val) {\n            return simpleTypes.includes(val);\n        },\n    },\n    filters: {\n        dateFormat: function (val) {\n            return dateFormat(new Date(val));\n        },\n        typeFormat: function (val) {\n            return __postType[val];\n        },\n        visibleFormat: function (val) {\n            console.log(val);\n            return __visibleMap[~~val];\n        },\n        statusFormat: function (val) {\n            return statusMap[val];\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/work.less\";\n\n.p-cms-community {\n    .u-title {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        .u-tags {\n            display: flex;\n            gap: 4px;\n        }\n    }\n}\n</style>\n","import { render, staticRenderFns } from \"./cms_community.vue?vue&type=template&id=c48d1a9e\"\nimport script from \"./cms_community.vue?vue&type=script&lang=js\"\nexport * from \"./cms_community.vue?vue&type=script&lang=js\"\nimport style0 from \"./cms_community.vue?vue&type=style&index=0&id=c48d1a9e&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { $next } from \"@jx3box/jx3box-common/js/https\";\n\nconst API_PREFIX = `/api/next2`;\n// 发布\nfunction push(params) {\n    return $next().post(`${API_PREFIX}/community/discussion/topic`, params);\n}\n\nfunction update(id, params) {\n    return $next().put(`${API_PREFIX}/community/discussion/my/topic/item/${id}`, params);\n}\n\nfunction getMyList(params) {\n    return $next().get(`${API_PREFIX}/community/discussion/my/topic/list`, { params });\n}\nfunction del(id) {\n    return $next().delete(`${API_PREFIX}/community/discussion/my/topic/item/${id}`);\n}\n\nfunction pull(id) {\n    return $next().get(`${API_PREFIX}/community/discussion/my/topic/item/${id}`);\n}\n\n// 获取回帖列表\nfunction getMyReplyList(params) {\n    return $next().get(`${API_PREFIX}/community/discussion/my/reply/list`, { params });\n}\n\n// 获取评论列表\nfunction getMyCommentList(params) {\n    return $next().get(`${API_PREFIX}/community/discussion/my/comment/list`, { params });\n}\n\n// 删除我的评论\nfunction deleteMyComment(id) {\n    return $next().delete(`${API_PREFIX}/community/discussion/my/comment/item/${id}`);\n}\n\nexport { push, getMyList, del, pull, update, getMyReplyList, getMyCommentList, deleteMyComment };\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./cms_community.vue?vue&type=style&index=0&id=c48d1a9e&prod&lang=less\"","module.exports = __webpack_public_path__ + \"img/repo.e8c2e45e.svg\";","/**\n * 简单的日期格式化\n *\n * @param {*} dt Date实例\n * @param {object} opt polished:是否补齐两位,separator:连接分隔符\n */\nfunction dateFormat(dt,separator='-',polished=true){\n    let year = dt.getFullYear()\n    let month = dt.getMonth() + 1\n    let date = dt.getDate()\n    let str = polished ? \n        `${year}${separator}${polish(month)}${separator}${polish(date)}` :\n        `${year}${separator}${month}${separator}${date}`\n    return str\n}\n\nfunction polish(val){\n    return val<10 ? ('0' + val) : val\n}\n\nexport default dateFormat\n"],"sourceRoot":""}