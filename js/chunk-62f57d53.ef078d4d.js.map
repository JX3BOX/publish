{"version":3,"sources":["webpack:///./src/service/namespace.js","webpack:///./src/post/namespace.vue?8ad9","webpack:///src/post/namespace.vue","webpack:///./src/post/namespace.vue?1fc2","webpack:///./src/post/namespace.vue?5182","webpack:///./src/post/namespace.vue","webpack:///./src/components/publish_header.vue?17ab","webpack:///./node_modules/sterilizer/src/lib/_typeof.js","webpack:///./node_modules/sterilizer/src/sterilizer.js","webpack:///./src/components/publish_header.vue?814f","webpack:///src/components/publish_header.vue","webpack:///./src/components/publish_header.vue?3a87","webpack:///./src/components/publish_header.vue"],"names":["getNamespace","params","$helper","method","url","createNamespace","data","$cms","post","updateNamespace","id","put","concat","getNamespaceById","get","getNamespaceByKey","key","default_form","desc","link","name","props","form","lodash","cloneDeep","count","available","success","processing","rules","required","message","trigger","computed","source_type","isEditMode","$route","ready","methods","checkKey","val","sterilizer","kill","removeSpace","toString","key_cache","checkAvailable","checkLink","includes","replace","_this","then","res","onSubmit","_this2","profile","User","getInfo","namespace_id","onSuccess","finally","_this3","$notify","title","showClose","setTimeout","$router","push","watch","created","_this4","getAsset","namespace_card_count","mounted","_this5","_res$data$data","components","pubheader","component","_vm","this","_c","_self","staticClass","attrs","_t","_m","_v","_s","_e","model","value","callback","$$v","$set","expression","slot","on","o","Object","prototype","call","match","toLowerCase","str","Error","_symbols","$","_","symbols","keys","regs","values","_str","_type","_toRemove","join","re","RegExp","germ","undefined","Set","_detected","_germ","char","add","_sterilize","probiotics","delete","words","replacement","custom","some","item","goBack","window","history","length","go"],"mappings":"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","file":"js/chunk-62f57d53.ef078d4d.js","sourcesContent":["import { $helper } from '@jx3box/jx3box-common/js/https.js'\nimport { $cms } from '@jx3box/jx3box-common/js/https'\n\nfunction getNamespace(params) {\n  return $helper()({\n    method: 'GET',\n    url: `/api/my/namespaces`,\n    params: params,\n  })\n}\n\nfunction createNamespace(data) {\n  return $cms().post('/api/cms/namespace', data)\n}\n\nfunction updateNamespace(id, data) {\n  return $cms().put(`/api/cms/namespace/${id}`, data)\n}\n\nfunction getNamespaceById(id) {\n  return $cms().get(`/api/cms/namespace/${id}`)\n}\nfunction getNamespaceByKey(key) {\n  return $cms().get(`/api/cms/namespace-key`, {\n    params: {\n      key,\n    },\n  })\n}\n\nexport { getNamespace, getNamespaceByKey, getNamespaceById, createNamespace, updateNamespace }\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./namespace.vue?vue&type=style&index=0&id=2fce4c54&prod&lang=less&\"","<template>\n    <div class=\"m-dashboard-publish-namespace m-publish-box\">\n        <pubheader :name=\"name\" :localDraft=\"false\">\n            <slot name=\"header\"></slot>\n        </pubheader>\n        <div class=\"m-publish-namespace-box\">\n            <header class=\"m-publish-namespace-header\">\n                <div class=\"u-tip\">\n                    铭牌是一个可以通过关键词快速访问的功能，例如定义铭牌 \"某某气纯宏\"，则可以在浏览器地址栏中通过快速输入\n                    <a\n                        href=\"https://剑网3.com/某某气纯宏\"\n                        target=\"_blank\"\n                    >\n                        <b>剑网3.com/某某气纯宏</b>\n                    </a>\n                    访问你输入的链接\n                </div>\n                <div class=\"u-count\">\n                    <span class=\"u-count-txt\">\n                        当前可建铭牌数：\n                        <b>{{ count }}</b> 个\n                    </span>\n                    <a\n                        href=\"/vip/namespace?from=dashboard_namespace_create\"\n                        target=\"_blank\"\n                        class=\"u-btn-buy el-button el-button--primary el-button--mini\"\n                    >\n                        <span class=\"el-icon-shopping-cart-2\"></span>购买铭牌\n                    </a>\n                    <!-- <a\n                        href=\"/vip/namespace/?from=dashboard_namespace_create\"\n                        class=\"u-skip\"\n                        target=\"_blank\"\n                    >\n                        <span class=\"el-icon-connection\"></span>限时0.99元抢注10个铭牌\n                    </a> -->\n                </div>\n            </header>\n            <div class=\"m-namspace-tips\" v-if=\"success\">\n                <el-alert title=\"提交成功，请等待审核\" type=\"success\" show-icon></el-alert>\n            </div>\n            <el-form class=\"m-publish-namespace-form\" :rules=\"rules\" :model=\"form\">\n                <el-form-item label=\"关键词\" prop=\"key\">\n                    <el-input v-model=\"form.key\" placeholder=\"全局唯一关键词\"></el-input>\n                    <el-alert v-if=\"!available\" title=\"已有关键词，请重新输入\" type=\"error\" show-icon />\n                </el-form-item>\n                <el-form-item label=\"链接\" prop=\"link\">\n                    <el-input v-model=\"form.link\" placeholder=\"请输入跳转地址\">\n                        <template slot=\"prepend\">https://</template>\n                    </el-input>\n                </el-form-item>\n                <el-form-item label=\"描述\">\n                    <el-input\n                        v-model=\"form.desc\"\n                        placeholder=\"请输入关于铭牌的描述\"\n                        maxlength=\"30\"\n                        show-word-limit\n                    ></el-input>\n                </el-form-item>\n                <el-form-item label>\n                    <el-button\n                        class=\"u-submit\"\n                        type=\"primary\"\n                        :disabled=\"!ready || processing\"\n                        @click=\"onSubmit\"\n                    >提交</el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { sterilizer } from \"sterilizer/index.js\";\nimport pubheader from \"@/components/publish_header.vue\";\nimport {\n    getNamespaceByKey,\n    getNamespaceById,\n    createNamespace,\n    updateNamespace,\n} from \"@/service/namespace\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nimport lodash from \"lodash\";\nconst default_form = {\n    key: \"\",\n    desc: \"\",\n    link: \"\",\n};\nexport default {\n    name: \"namespace\",\n    props: [],\n    data: function () {\n        return {\n            name: \"剑三铭牌\",\n            form: lodash.cloneDeep(default_form),\n            count: 0,\n            available: false,\n            success: false,\n            processing: false,\n            rules: {\n                key: [\n                    {\n                        required: true,\n                        message: \"请输入铭牌名称\",\n                        trigger: \"blur\",\n                    },\n                ],\n                link: [\n                    {\n                        required: true,\n                        message: \"请输入链接网址\",\n                        trigger: \"blur\",\n                    },\n                ],\n            },\n        };\n    },\n    computed: {\n        data: function () {\n            return {\n                key: this.form.key,\n                desc: this.form.desc,\n                link: \"https://\" + this.form.link,\n                source_type: \"custom\",\n            };\n        },\n        isEditMode: function () {\n            return !!this.$route.params.id;\n        },\n        ready: function () {\n            if (this.isEditMode) {\n                return this.available && this.form.link;\n            }\n            return this.available && this.form.link && this.count;\n        },\n    },\n    methods: {\n        checkKey: function (val) {\n            if (!val) {\n                this.available = true;\n                return;\n            }\n            this.form.key = sterilizer(this.form.key)\n                .kill()\n                .removeSpace()\n                .toString();\n            if (this.form.key == this.key_cache) {\n                this.available = true;\n                return;\n            }\n            this.checkAvailable();\n        },\n        checkLink: function (val) {\n            if (!val) return;\n\n            const link = this.form.link;\n            if (link.includes(\"http://\") || link.includes(\"https://\")) {\n                this.form.link = link.replace(/https?\\:\\/\\//, \"\");\n            }\n        },\n\n        checkAvailable: function () {\n            getNamespaceByKey(this.form.key).then((res) => {\n                if (!res.data.data) {\n                    this.available = true;\n                } else {\n                    this.available = false;\n                }\n            });\n        },\n        onSubmit: function () {\n            if (this.form.desc == \"\") {\n                let profile = User.getInfo();\n                this.data.desc = profile.name + \"创建\";\n            }\n            this.processing = true;\n            if (this.isEditMode) {\n                updateNamespace(this.namespace_id, this.data)\n                    .then(() => {\n                        this.onSuccess();\n                    })\n                    .finally(() => {\n                        this.processing = false;\n                    });\n            } else {\n                createNamespace(this.data)\n                    .then(() => {\n                        this.onSuccess();\n                        this.count -= 1;\n                        this.form = lodash.cloneDeep(default_form);\n                    })\n                    .finally(() => {\n                        this.processing = false;\n                    });\n            }\n        },\n        onSuccess() {\n            this.success = true;\n            this.$notify.success({title: \"成功\", message: \"提交成功\", showClose: false});\n            setTimeout(() => {\n                this.$router.push({name: 'bucket_namespace'})\n            }, 500);\n        },\n    },\n    watch: {\n        \"form.key\": function (val) {\n            this.checkKey(val);\n        },\n        \"form.link\": function (val) {\n            this.checkLink(val);\n        },\n    },\n    created() {\n        User.getAsset().then((data) => {\n            this.count = data.namespace_card_count;\n        });\n    },\n    mounted: function () {\n        this.namespace_id = this.$route.params.id;\n        if (this.namespace_id) {\n            getNamespaceById(this.namespace_id).then((res) => {\n                const { key, desc, link } = res.data.data;\n                this.key_cache = key;\n                this.form = {\n                    key,\n                    desc,\n                    link,\n                };\n            });\n        }\n        if (this.form.key == \"\") {\n            this.available = true;\n        }\n    },\n\n    components: {\n        pubheader,\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/namespace.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./namespace.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./namespace.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./namespace.vue?vue&type=template&id=2fce4c54&\"\nimport script from \"./namespace.vue?vue&type=script&lang=js&\"\nexport * from \"./namespace.vue?vue&type=script&lang=js&\"\nimport style0 from \"./namespace.vue?vue&type=style&index=0&id=2fce4c54&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-dashboard-publish-namespace m-publish-box\"},[_c('pubheader',{attrs:{\"name\":_vm.name,\"localDraft\":false}},[_vm._t(\"header\")],2),_c('div',{staticClass:\"m-publish-namespace-box\"},[_c('header',{staticClass:\"m-publish-namespace-header\"},[_vm._m(0),_c('div',{staticClass:\"u-count\"},[_c('span',{staticClass:\"u-count-txt\"},[_vm._v(\" 当前可建铭牌数： \"),_c('b',[_vm._v(_vm._s(_vm.count))]),_vm._v(\" 个 \")]),_vm._m(1)])]),(_vm.success)?_c('div',{staticClass:\"m-namspace-tips\"},[_c('el-alert',{attrs:{\"title\":\"提交成功，请等待审核\",\"type\":\"success\",\"show-icon\":\"\"}})],1):_vm._e(),_c('el-form',{staticClass:\"m-publish-namespace-form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"关键词\",\"prop\":\"key\"}},[_c('el-input',{attrs:{\"placeholder\":\"全局唯一关键词\"},model:{value:(_vm.form.key),callback:function ($$v) {_vm.$set(_vm.form, \"key\", $$v)},expression:\"form.key\"}}),(!_vm.available)?_c('el-alert',{attrs:{\"title\":\"已有关键词，请重新输入\",\"type\":\"error\",\"show-icon\":\"\"}}):_vm._e()],1),_c('el-form-item',{attrs:{\"label\":\"链接\",\"prop\":\"link\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入跳转地址\"},model:{value:(_vm.form.link),callback:function ($$v) {_vm.$set(_vm.form, \"link\", $$v)},expression:\"form.link\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"https://\")])],2)],1),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入关于铭牌的描述\",\"maxlength\":\"30\",\"show-word-limit\":\"\"},model:{value:(_vm.form.desc),callback:function ($$v) {_vm.$set(_vm.form, \"desc\", $$v)},expression:\"form.desc\"}})],1),_c('el-form-item',{attrs:{\"label\":\"\"}},[_c('el-button',{staticClass:\"u-submit\",attrs:{\"type\":\"primary\",\"disabled\":!_vm.ready || _vm.processing},on:{\"click\":_vm.onSubmit}},[_vm._v(\"提交\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"u-tip\"},[_vm._v(\" 铭牌是一个可以通过关键词快速访问的功能，例如定义铭牌 \\\"某某气纯宏\\\"，则可以在浏览器地址栏中通过快速输入 \"),_c('a',{attrs:{\"href\":\"https://剑网3.com/某某气纯宏\",\"target\":\"_blank\"}},[_c('b',[_vm._v(\"剑网3.com/某某气纯宏\")])]),_vm._v(\" 访问你输入的链接 \")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('a',{staticClass:\"u-btn-buy el-button el-button--primary el-button--mini\",attrs:{\"href\":\"/vip/namespace?from=dashboard_namespace_create\",\"target\":\"_blank\"}},[_c('span',{staticClass:\"el-icon-shopping-cart-2\"}),_vm._v(\"购买铭牌 \")])\n}]\n\nexport { render, staticRenderFns }","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less&\"","/**\n * \n * @param {any} o any object to be detected\n * @return {string} the type string\n */\nfunction _typeof(o){\n    var s = Object.prototype.toString.call(o);\n    return s.match(/\\[object (.*?)\\]/)[1].toLowerCase();\n}\n\nexport default _typeof","import _typeof from \"./lib/_typeof.js\";\n\n/**\n * @desc  Remove specified symbols & charaters\n * @param {string} str string will be sterilized\n * @return {str} the clean string\n * @return {object} a sterilizer object \n */\nclass Sterilizer {\n    constructor(str) {\n\n        if(_typeof(str)!=='string'){\n            throw new Error(\n                \"[Sterilizer::init] params should be string\"\n            );\n        }\n\n        this._symbols = {\n            \"`\": \"`\",\n            \"~\": \"~\",\n            \"!\": \"!\",\n            \"@\": \"@\",\n            \"#\": \"#\",\n            $: \"\\\\$\",\n            \"%\": \"%\",\n            \"^\": \"\\\\^\",\n            \"&\": \"&\",\n            \"*\": \"\\\\*\",\n            \"-\": \"\\\\-\",\n            _: \"_\",\n            \"=\": \"=\",\n            \"+\": \"+\",\n            \"(\": \"\\\\(\",\n            \")\": \"\\\\)\",\n            \"[\": \"\\\\[\",\n            \"]\": \"\\\\]\",\n            \"{\": \"\\\\{\",\n            \"}\": \"\\\\}\",\n            \"|\": \"\\\\|\",\n            \"\\\\\": \"\\\\\\\\\",\n            \"/\": \"/\",\n            \"?\": \"\\\\?\",\n            \":\": \":\",\n            \";\": \";\",\n            \"'\": \"'\",\n            '\"': '\"',\n            \">\": \">\",\n            \"<\": \"<\",\n            \",\": \",\",\n            \".\": \"\\\\.\",\n        };\n        this.symbols = Object.keys(this._symbols);\n        this.regs = Object.values(this._symbols);\n        this.str = str;\n        this._str = str;\n    }\n\n    // output the clean string\n    toString() {\n        return this._str;\n    }\n\n    // detected the object type\n    _detected(o) {\n        let _type = _typeof(o);\n        let _iter = [\"string\", \"array\", \"set\"];\n        if (!_iter.includes(_type))\n            throw new Error(\n                \"[Sterilizer::remove] params should be string|array|set\"\n            );\n        return o;\n    }\n\n    // replaced the specified symbols by RegExp\n    _sterilize(_toRemove) {\n        _toRemove = [..._toRemove].join(\"\");\n        let re = new RegExp(`[${_toRemove}]`, \"gm\");\n        this._str = this._str.replace(re, \"\");\n        return this\n    }\n\n    // remove the specified symbols\n    kill(germ) {\n        let _toRemove = null;\n\n        // build unique toRemove set\n        if (germ == undefined) {\n            _toRemove = new Set(this.regs);\n        } else {\n            this._detected(germ);\n            _toRemove = new Set();\n            let _germ = new Set(germ);\n            for (let char of _germ) {\n                if (this.symbols.includes(char))\n                    _toRemove.add(this._symbols[char]);\n            }\n        }\n\n        return this._sterilize(_toRemove);\n    }\n\n    // remove all the symbols exclude args\n    live(probiotics) {\n        this._detected(probiotics);\n\n        // build unique toRemove set\n        let _toRemove = new Set(this.regs);\n        for (let char of probiotics) {\n            if (this.symbols.includes(char)) {\n                _toRemove.delete(this._symbols[char]);\n            }\n        }\n\n        return this._sterilize(_toRemove);\n    }\n\n    // remove htmlspecialchars + urlspecialchars\n    safe() {\n        return this.kill([\n            \"&\",\n            \"<\",\n            \">\",\n            '\"',\n            \"'\",\n            \"+\",\n            \":\",\n            \"/\",\n            \"?\",\n            \"=\",\n            \"#\",\n            \"%\",\n        ]);\n    }\n\n    // remove htmlspecialchars\n    removeHSC() {\n        return this.kill([\"&\", \"<\", \">\", '\"', \"'\"]);\n    }\n\n    // remove urlspecialchars\n    removeURL() {\n        return this.kill([\"+\", \":\", \"/\", \"?\", \"=\", \"&\", \"#\", \"%\"]);\n    }\n\n    // remove all the space\n    removeSpace() {\n        this._str = this._str.replace(/\\s/gm, \"\");\n        return this\n    }\n\n    // remove specified charaters\n    remove(words, replacement) {\n        let re = new RegExp(`${words}`, \"gm\");\n        replacement = replacement !== undefined ? replacement : \"\";\n        this._str = this._str.replace(re, replacement);\n        return this\n    }\n\n    // remove all the HTML tags\n    removeHTMLtag() {\n        this._str = this._str.replace(/<[^>]+>/gm, \"\");\n        return this\n    }\n\n    // has symbols\n    isDirty(custom){\n        if(custom){\n            return this.str.includes(custom)\n        }else{\n            return this.symbols.some((item) => {\n                return this.str.includes(item)\n            })\n        }\n    }\n}\n\nfunction sterilizer(str) {\n    return new Sterilizer(str);\n}\n\nexport { Sterilizer, sterilizer };\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"m-publish-header\">\n        <el-page-header @back=\"goBack\" :content=\"name\"></el-page-header>\n        <slot></slot>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"publish_header\",\n    props: [\"name\"],\n    data: function() {\n        return {\n        };\n    },\n    computed: {},\n    methods: {\n        goBack: function() {\n            if(window.history.length){\n                this.$router.go(-1);\n            }else{\n                this.$router.push('/')\n            }\n        },\n    },\n    mounted: function() {},\n    components: {\n    },\n};\n</script>\n\n<style lang=\"less\">\n    .m-publish-header{\n        .pr;\n    }\n    \n</style>","import { render, staticRenderFns } from \"./publish_header.vue?vue&type=template&id=36319e52&\"\nimport script from \"./publish_header.vue?vue&type=script&lang=js&\"\nexport * from \"./publish_header.vue?vue&type=script&lang=js&\"\nimport style0 from \"./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-header\"},[_c('el-page-header',{attrs:{\"content\":_vm.name},on:{\"back\":_vm.goBack}}),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}