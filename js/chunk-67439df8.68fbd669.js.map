{"version":3,"sources":["webpack:///./src/components/publish_original.vue","webpack:///./src/components/publish_original.vue?15fd","webpack:///src/components/publish_original.vue","webpack:///./src/components/publish_original.vue?5e2c","webpack:///./src/components/publish_client.vue","webpack:///./src/components/publish_client.vue?c4e0","webpack:///src/components/publish_client.vue","webpack:///./src/components/publish_client.vue?9d29","webpack:///./src/store/bus.js","webpack:///./src/service/body.js","webpack:///./src/post/face.vue?bd1c","webpack:///./src/components/publish_header.vue?4823","webpack:///./src/components/face_attachment.vue?f96a","webpack:///./src/components/face_attachment.vue?f25c","webpack:///src/components/face_attachment.vue","webpack:///./src/components/face_attachment.vue?df38","webpack:///./src/components/face_attachment.vue","webpack:///./src/components/publish_title.vue","webpack:///./src/components/publish_title.vue?ad03","webpack:///src/components/publish_title.vue","webpack:///./src/components/publish_title.vue?fc78","webpack:///./src/post/face.vue?0b06","webpack:///src/post/face.vue","webpack:///./src/post/face.vue?f4f1","webpack:///./src/post/face.vue","webpack:///./src/components/publish_header.vue?6f8c","webpack:///src/components/publish_header.vue","webpack:///./src/components/publish_header.vue?3a87","webpack:///./src/components/publish_header.vue","webpack:///./src/service/face.js"],"names":["name","props","data","original","model","prop","event","watch","newval","deep","handler","$emit","computed","methods","mounted","components","component","_vm","this","_c","_self","staticClass","attrs","value","callback","$$v","expression","_t","client","handleChange","Bus","on","_v","showMobile","_e","forbidAll","Vue","getBodyList","params","$next","get","getBody","id","concat","uploadBodyFile","post","addBody","updateBody","put","bodyOnline","bodyOffline","getAttachmentOfPost","postId","body","type","Number","default","describe","String","uuid","object","json","face","selectData","document","getElementById","dispatchEvent","MouseEvent","uploadFile","formdata","uploadFaceFile","uploadData","file","_this","FormData","append","then","res","$message","message","processFile","e","target","files","size","parseAndUpload","FileReader","vm","fr","onload","console","log","result","load","$notify","error","title","startsWith","JSON","stringify","ex","setTimeout","onerror","readAsArrayBuffer","clearData","_s","directives","rawName","hideDiv","placeholder","publishHeader","publishTitle","publishOriginal","publishClient","faceAttachment","UploadAlbum","publishBanner","is_fr","author_name","author_link","remark","banner","body_type","is_new_face","cover","images","related","price_type","price_count","is_unlimited","options","bodyMap","majorMap","faceSubtype","clients","__clients","editDetail","loading","processing","isSuperAuthor","postType","promise","faceAttachments","faceData","decalDb","cny_enable","$route","$store","state","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","init","stop","_this2","getData","DecalDatabase","User","getConfig","val","_this3","getFace","isOldPost","updated_at","showWarning","map","item","url","find","handleFaceChange","_ref","_ref$object","_ref$json","_ref$uuid","_ref$id","_ref$name","push","autoParse","validator","required","requiredMsg","i","length","warning","publish","_this4","_objectSpread","faceAttachmentIds","attachments","updateFace","success","location","href","getLink","finally","addFace","removeFile","newQueue","setMain","cloneDeep","parse","duration","nMajorVersion","bNewFace","setBodyType","canUseInCreate","game_price","getTotalPrice","changePriceType","datetime","Date","_this5","$confirm","distinguishCancelAndClose","confirmButtonText","cancelButtonText","dangerouslyUseHTMLString","action","window","origin","catch","$set","_l","key","$event","body_info","label","scopedSlots","_u","fn","staticStyle","proxy","goBack","history","$router","go","delFace","delete","getFaceList","faceOnline","faceOffline"],"mappings":"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","file":"js/chunk-67439df8.68fbd669.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-original\"},[_c('el-form-item',{attrs:{\"label\":\"原创\"}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"active-value\":1,\"inactive-value\":0},model:{value:(_vm.original),callback:function ($$v) {_vm.original=$$v},expression:\"original\"}})],1),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_original.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_original.vue?vue&type=script&lang=js\"","<template>\n    <div class=\"m-publish-original\">\n        <el-form-item label=\"原创\">\n            <el-switch v-model=\"original\" active-color=\"#13ce66\" :active-value=\"1\" :inactive-value=\"0\"></el-switch>\n        </el-form-item>\n        <slot></slot>\n    </div>\n</template>\n<script>\nexport default {\n    name: \"publish_original\",\n    props: [\"data\"],\n    data: function () {\n        return {\n            original: ~~this.data,\n        };\n    },\n    model: {\n        prop: \"data\", //向上同步数据\n        event: \"update\",\n    },\n    watch: {\n        data: function (newval) {\n            this.original = ~~newval;\n        },\n        original: {\n            deep: true,\n            handler: function (newval) {\n                this.$emit(\"update\", ~~newval);\n            },\n        },\n    },\n    computed: {},\n    methods: {},\n    mounted: function () {},\n    components: {},\n};\n</script>\n","import { render, staticRenderFns } from \"./publish_original.vue?vue&type=template&id=7086d09e\"\nimport script from \"./publish_original.vue?vue&type=script&lang=js\"\nexport * from \"./publish_original.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-client\"},[_c('el-form-item',{attrs:{\"label\":\"版本\"}},[_c('el-radio-group',{on:{\"change\":_vm.handleChange},model:{value:(_vm.client),callback:function ($$v) {_vm.client=$$v},expression:\"client\"}},[_c('el-radio',{attrs:{\"label\":\"std\"}},[_vm._v(\"重制\")]),_c('el-radio',{attrs:{\"label\":\"origin\"}},[_vm._v(\"缘起\")]),(_vm.showMobile)?_c('el-radio',{attrs:{\"label\":\"wujie\"}},[_vm._v(\"无界\")]):_vm._e(),(!_vm.forbidAll)?_c('el-radio',{attrs:{\"label\":\"all\"}},[_vm._v(\"全端\")]):_vm._e()],1)],1),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_client.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_client.vue?vue&type=script&lang=js\"","<template>\n    <div class=\"m-publish-client\">\n        <el-form-item label=\"版本\">\n            <el-radio-group v-model=\"client\" @change=\"handleChange\">\n                <el-radio label=\"std\">重制</el-radio>\n                <el-radio label=\"origin\">缘起</el-radio>\n                <el-radio label=\"wujie\" v-if=\"showMobile\">无界</el-radio>\n                <el-radio label=\"all\" v-if=\"!forbidAll\">全端</el-radio>\n            </el-radio-group>\n        </el-form-item>\n        <slot></slot>\n    </div>\n</template>\n<script>\nimport Bus from '@/store/bus.js'\nexport default {\n    name: \"publish_client\",\n    props: [\"data\",'forbidAll','showMobile'],\n    data: function () {\n        return {\n            client: this.data,\n        };\n    },\n    model: {\n        prop: \"data\", //向上同步数据\n        event: \"update\",\n    },\n    watch: {\n        data: function (newval) {\n            this.client = newval;\n        },\n        client: {\n            deep: true,\n            handler: function (newval) {\n                this.$emit(\"update\", newval);\n            },\n        },\n    },\n    computed: {},\n    methods: {\n        handleChange : function (){\n            Bus.$emit('changeClient',this.client)\n        }\n    },\n    mounted: function () {},\n    components: {},\n};\n</script>\n\n\n","import { render, staticRenderFns } from \"./publish_client.vue?vue&type=template&id=079a1aaa\"\nimport script from \"./publish_client.vue?vue&type=script&lang=js\"\nexport * from \"./publish_client.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nconst Bus = new Vue();\nexport default Bus\n\n// Use like\n// Bus.$emit(事件名,数据);\n// Bus.$on(事件名,data => {});","import { $next } from \"@jx3box/jx3box-common/js/https\";\n\n// 获取自己的捏脸列表 \nexport function getBodyList(params) {\n    return $next().get(\"/api/pvxbody/my-list\", { params });\n}\n// 获取单个体型\nexport function getBody(id) {\n    return $next().get(`/api/pvxbody/${id}`);\n}\n\n// 上传体型\nexport function uploadBodyFile(data) {\n    return $next().post(\"/api/pvxbody/file-upload\", data);\n}\n\n// 添加体型\nexport function addBody(data) {\n    return $next().post(\"/api/pvxbody\", data);\n}\n\n// 更新体型\nexport function updateBody(id, data) {\n    return $next().put(`/api/pvxbody/${id}`, data);\n}\n\n// 上架 \nexport function bodyOnline(id) {\n    return $next().put(`/api/pvxbody/${id}/online`);\n}\n\n// 下架 \nexport function bodyOffline(id) {\n    return $next().put(`/api/pvxbody/${id}/offline`);\n}\n\n//  作品关联的附件 \nexport function getAttachmentOfPost(postId) {\n    return $next().get(`/api/charge_attachment/pvxbody/${postId}/edit`);\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face.vue?vue&type=style&index=0&id=6db0375b&prod&lang=less\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face_attachment.vue?vue&type=style&index=0&id=c96940cc&prod&lang=less&scoped=true\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face_attachment.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face_attachment.vue?vue&type=script&lang=js\"","<template>\n    <div class=\"m-paid_attachment\">\n        <input class=\"u-data-input\" type=\"file\" id=\"face_file\" @change=\"processFile\" accept=\".jx3dat, .dat, .ini\" />\n        <el-button type=\"primary\" @click=\"selectData\" icon=\"el-icon-upload2\">{{ `上传${name}数据` }}</el-button>\n        <span class=\"u-data-ready\" v-show=\"data.uuid\">\n            <i class=\"el-icon-success\"></i>\n            已上传\n        </span>\n    </div>\n</template>\n\n<script>\nimport { uploadFaceFile } from \"@/service/face.js\";\nimport { uploadBodyFile } from \"@/service/body.js\";\nimport { load } from \"@jx3box/jx3box-facedat/src/DataRouter.js\";\nexport default {\n    name: \"paid_attachment\",\n    props: {\n        body: {\n            type: Number,\n            default: 2,\n        },\n        describe: {\n            type: String,\n            default: \"\",\n        },\n        type: {\n            type: String,\n            default: \"face\",\n        },\n    },\n    data() {\n        return {\n            data: {\n                id: \"\",\n                uuid: \"\",\n                object: \"\",\n                json: \"\",\n                name: \"\",\n            },\n        };\n    },\n    computed: {\n        name() {\n            const data = {\n                face: \"脸型\",\n                body: \"体型\",\n            };\n            return data[this.type];\n        },\n    },\n    methods: {\n        selectData() {\n            let fileInput = document.getElementById(\"face_file\");\n            fileInput.dispatchEvent(new MouseEvent(\"click\"));\n        },\n        uploadFile(formdata) {\n            const data = {\n                face: uploadFaceFile,\n                body: uploadBodyFile,\n            };\n            return data[this.type](formdata);\n        },\n        uploadData(file) {\n            // 上传源文件\n            let formdata = new FormData();\n            formdata.append(\"jx3dat\", file);\n            formdata.append(\"body\", this.body);\n            formdata.append(\"describe\", this.describe);\n            formdata.append(\"data\", this.data.json);\n            this.uploadFile(formdata).then((res) => {\n                this.data.uuid = res.data.data.uuid;\n                this.data.id = res.data.data.id;\n                this.data.name = res.data.data.name;\n                this.$message({\n                    message: \"数据上传成功\",\n                    type: \"success\",\n                });\n                this.$emit(\"update:data\", this.data);\n            });\n        },\n        processFile(e) {\n            let file = e.target.files[0];\n            // 大于64kb\n            if (file && file.size > 65536) {\n                this.$message({\n                    message: \"文件过大，限 64KB 以内\",\n                    type: \"error\",\n                });\n                return;\n            }\n            // 解析并上传数据\n\n            this.parseAndUpload(file);\n            e.target.value = \"\";\n        },\n        parseAndUpload(file) {\n            if (!FileReader) return;\n            if (!file) return;\n            const vm = this;\n\n            // 读入 File 转 ArrayBuffer 进行读取\n            let fr = new FileReader();\n            fr.onload = function (e) {\n                console.log(\"读取成功...开始执行分析...\");\n                let json = \"\";\n                let object = \"\";\n                try {\n                    const result = load(e.target.result);\n                    if (!result)\n                        return vm.$notify.error({\n                            title: \"错误\",\n                            message: \"数据类型解析失败\",\n                        });\n                    if (vm.type === \"body\" && result.type.startsWith(\"face\")) {\n                        return vm.$notify.error({\n                            title: \"错误\",\n                            message: \"请导入体型数据\",\n                        });\n                    }\n                    if (vm.type === \"face\" && result.type === \"body\") {\n                        return vm.$notify.error({\n                            title: \"错误\",\n                            message: \"请导入脸型数据\",\n                        });\n                    }\n                    object = result.data;\n                    console.log(object);\n                    if (object) {\n                        json = JSON.stringify(object);\n                    }\n                } catch (ex) {\n                    console.log(ex);\n                    vm.$notify.error({\n                        title: \"错误\",\n                        message: \"无法读取数据\",\n                    });\n                    return;\n                }\n\n                // 解析成功开始上传\n                if (object && json) {\n                    setTimeout(\n                        () =>\n                            vm.$notify({\n                                title: \"成功\",\n                                message: \"数据读取成功，开始上传\",\n                                type: \"success\",\n                            }),\n                        0\n                    );\n                    vm.data.json = json;\n                    vm.uploadData(file);\n                    vm.data.object = object;\n                }\n            };\n            fr.onerror = function (e) {\n                vm.$notify.error({\n                    title: \"错误\",\n                    message: \"文件读取异常\",\n                });\n            };\n            fr.readAsArrayBuffer(file);\n        },\n        clearData() {\n            this.data = {\n                id: \"\",\n                uuid: \"\",\n                object: null,\n                json: \"\",\n                name: \"\",\n            };\n            this.$emit(\"update:data\", this.data);\n        },\n    },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.m-paid_attachment {\n    .u-data-input {\n        display: none;\n    }\n\n    .u-data-ready {\n        margin-left: 10px;\n        i {\n            color: #67c23a;\n        }\n    }\n}\n</style>\n","import { render, staticRenderFns } from \"./face_attachment.vue?vue&type=template&id=c96940cc&scoped=true\"\nimport script from \"./face_attachment.vue?vue&type=script&lang=js\"\nexport * from \"./face_attachment.vue?vue&type=script&lang=js\"\nimport style0 from \"./face_attachment.vue?vue&type=style&index=0&id=c96940cc&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c96940cc\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-paid_attachment\"},[_c('input',{staticClass:\"u-data-input\",attrs:{\"type\":\"file\",\"id\":\"face_file\",\"accept\":\".jx3dat, .dat, .ini\"},on:{\"change\":_vm.processFile}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-upload2\"},on:{\"click\":_vm.selectData}},[_vm._v(_vm._s(`上传${_vm.name}数据`))]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.data.uuid),expression:\"data.uuid\"}],staticClass:\"u-data-ready\"},[_c('i',{staticClass:\"el-icon-success\"}),_vm._v(\" 已上传 \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-title\"},[(!_vm.hideDiv)?_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"标题\")]):_vm._e(),_c('el-input',{attrs:{\"maxlength\":50,\"minlength\":2,\"show-word-limit\":\"\",\"required\":\"\",\"placeholder\":_vm.placeholder || '请填写标题'},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}}),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_title.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_title.vue?vue&type=script&lang=js\"","<template>\n    <div class=\"m-publish-title\">\n        <el-divider content-position=\"left\" v-if=\"!hideDiv\">标题</el-divider>\n        <el-input\n            v-model=\"title\"\n            :maxlength=\"50\"\n            :minlength=\"2\"\n            show-word-limit\n            required\n            :placeholder=\"placeholder || '请填写标题'\"\n        ></el-input>\n        <slot></slot>\n    </div>\n</template>\n<script>\nexport default {\n    name: \"publish_title\",\n    props: [\"data\",\"hideDiv\",\"placeholder\"],\n    data: function () {\n        return {\n            title: this.data,\n        };\n    },\n    model: {\n        prop: \"data\",   //向上同步数据\n        event: \"update\",\n    },\n    watch: {\n        data: function(newval) {\n            this.title = newval;\n        },\n        title: {\n            deep: true,\n            handler: function(newval) {\n                this.$emit(\"update\", newval);\n            },\n        },\n    },\n    computed: {},\n    methods: {},\n    mounted: function () {},\n    components: {},\n};\n</script>\n","import { render, staticRenderFns } from \"./publish_title.vue?vue&type=template&id=d0fa58d6\"\nimport script from \"./publish_title.vue?vue&type=script&lang=js\"\nexport * from \"./publish_title.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face.vue?vue&type=script&lang=js\"","<template>\n    <div class=\"m-publish-box m-publish-box-face\" v-loading=\"loading\">\n        <!-- 头部 -->\n        <publish-header name=\"捏脸分享\"></publish-header>\n\n        <el-form label-position=\"left\" label-width=\"90px\">\n            <!-- 标题 -->\n            <publish-title v-model=\"post.title\"></publish-title>\n            <!-- 信息 -->\n            <div class=\"m-publish-info\">\n                <el-divider content-position=\"left\">信息</el-divider>\n                <el-form-item label=\"数据\">\n                    <face-attachment :body=\"post.body_type\" type=\"face\" @update:data=\"handleFaceChange\" />\n                    <div class=\"u-attachment\" v-for=\"item in faceAttachments\" :key=\"item.id\">\n                        <el-button\n                            class=\"u-main\"\n                            :type=\"item.file === faceData.file ? 'warning' : ''\"\n                            icon=\"el-icon-star-off\"\n                            circle\n                            :plain=\"item.file === faceData.file ? false : true\"\n                            @click=\"setMain(item)\"\n                            size=\"mini\"\n                            title=\"设为主数据\"\n                        />\n                        <span class=\"u-attachment-text\">\n                            文件名: <b>{{ item.name }}</b>\n                        </span>\n                        <!-- <span class=\"u-attachment-key\">唯一标识符：<b>{{ item.file }}</b></span> -->\n                        <span class=\"u-attachment-remark\">\n                            <el-input v-model=\"item.describe\" placeholder=\"备注\" size=\"mini\"></el-input>\n                        </span>\n                        <el-button\n                            class=\"u-btn\"\n                            type=\"info\"\n                            icon=\"el-icon-delete\"\n                            circle\n                            plain\n                            @click=\"removeFile(item.id)\"\n                            size=\"mini\"\n                            title=\"移除\"\n                        />\n                    </div>\n                </el-form-item>\n                <!-- <div class=\"u-face-info\" v-if=\"faceData\"> -->\n                <!-- {{\n                    `${maps.client[post.client]}·${maps.roleType[post.body_type]}·${\n                        post.is_new_face === 1 ? \"写实\" : \"写意\"\n                    }·${post.is_unlimited === 1 ? \"可新建\" : \"不可新建\"}`\n                }} -->\n                <!-- <el-button @click=\"editDetail = !editDetail\">手动修改</el-button> -->\n\n                <!-- 自动解析 -->\n                <!-- 体型 -->\n                <el-form-item label=\"体型\" v-if=\"faceData\">\n                    <el-radio-group v-model=\"post.body_type\">\n                        <el-radio\n                            :label=\"~~body_type\"\n                            v-for=\"(body_info, body_type) in options.bodyMap\"\n                            :key=\"body_type\"\n                            >{{ body_info.label }}</el-radio\n                        >\n                    </el-radio-group>\n                </el-form-item>\n                <!-- 客户端 -->\n                <publish-client v-if=\"faceData\" v-model=\"post.client\" :forbidAll=\"true\"></publish-client>\n                <!-- 画风 -->\n                <el-form-item label=\"画风\" v-if=\"faceData && post.client === 'std'\">\n                    <el-radio-group v-model=\"post.is_new_face\">\n                        <el-radio :label=\"1\">写实</el-radio>\n                        <el-radio :label=\"0\">写意</el-radio>\n                    </el-radio-group>\n                </el-form-item>\n                <!-- 可新建 -->\n                <el-form-item v-if=\"faceData\" label=\"可新建\">\n                    <el-switch v-model=\"post.is_unlimited\" :active-value=\"1\" :inactive-value=\"0\"> </el-switch>\n                </el-form-item>\n\n                <!-- 原创 -->\n                <el-form-item label=\"首发\" prop=\"is_fr\">\n                    <el-switch\n                        v-model=\"post.is_fr\"\n                        active-color=\"#13ce66\"\n                        :active-value=\"1\"\n                        :inactive-value=\"0\"\n                    ></el-switch>\n                </el-form-item>\n                <publish-original v-model=\"post.original\"></publish-original>\n                <template v-if=\"!post.original\">\n                    <el-form-item label=\"原作者名称\" prop=\"author_name\">\n                        <el-input v-model=\"post.author_name\" placeholder=\"输入原作者名称\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"原作者链接\" prop=\"author_link\">\n                        <el-input v-model=\"post.author_link\" placeholder=\"输入原作者链接\"></el-input>\n                    </el-form-item>\n                </template>\n\n                <el-form-item>\n                    <template #label>\n                        <span>价格</span>\n                        <el-tooltip content=\"仅签约作者可以发布收费作品；1金箔=1分CNY\">\n                            <i class=\"el-icon-warning-outline\" style=\"margin-left: 2px; color: #c00\"></i>\n                        </el-tooltip>\n                    </template>\n                    <el-radio-group v-model=\"post.price_type\" :disabled=\"!isSuperAuthor\" @change=\"changePriceType\">\n                        <el-radio label=\"0\">免费</el-radio>\n                        <!-- <el-radio label=\"1\">盒币</el-radio> -->\n                        <el-radio v-if=\"isSuperAuthor && cny_enable\" label=\"2\">收费(金箔)</el-radio>\n                    </el-radio-group>\n                    <el-input-number\n                        class=\"u-price\"\n                        v-model=\"post.price_count\"\n                        v-if=\"post.price_type != '0'\"\n                        size=\"small\"\n                        :max=\"3000\"\n                        :min=\"0\"\n                    ></el-input-number>\n                    <div class=\"u-tip-box\" v-if=\"post.price_type != '0' && post.price_count > 0\">\n                        <div class=\"u-warning\">\n                            <el-checkbox v-model=\"promise\" disabled>\n                                我承诺该上传属于自己的原创作品或已得到原作者授权，且相关信息中不带有非授权的元素（比如贴图、字体）等，若违反法律规定我将承担全部责任，魔盒有权下架作品。\n                            </el-checkbox>\n                        </div>\n                    </div>\n                </el-form-item>\n\n                <el-form-item label=\"说明\">\n                    <el-input v-model=\"post.remark\" placeholder=\"请填写相关说明\" type=\"textarea\" :rows=\"3\"></el-input>\n                </el-form-item>\n                <el-divider content-position=\"left\">扩展</el-divider>\n                <el-form-item label=\"图片列表\">\n                    <UploadAlbum v-model=\"post.images\"></UploadAlbum>\n                </el-form-item>\n                <publish-banner v-model=\"post.banner\" v-if=\"isSuperAuthor\"></publish-banner>\n            </div>\n\n            <!-- 按钮 -->\n            <div class=\"m-publish-buttons\">\n                <el-button type=\"primary\" @click=\"publish\" :disabled=\"processing\">发 &nbsp;&nbsp; 布</el-button>\n            </div>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport { getLink } from \"@jx3box/jx3box-common/js/utils\";\nimport { getAttachmentOfPost, addFace, getFace, updateFace } from \"@/service/face\";\nimport publishHeader from \"@/components/publish_header.vue\";\nimport publishTitle from \"@/components/publish_title.vue\";\nimport publishOriginal from \"@/components/publish_original.vue\";\nimport publishClient from \"@/components/publish_client.vue\";\nimport faceAttachment from \"@/components/face_attachment.vue\";\nimport UploadAlbum from \"@jx3box/jx3box-editor/src/UploadAlbum.vue\";\nimport publishBanner from \"@/components/publish_banner.vue\";\nimport { DecalDatabase } from \"@jx3box/jx3box-facedat/src/DecalDatabase\";\nimport User from \"@jx3box/jx3box-common/js/user.js\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport { __clients } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport { bodyMap, majorMap, faceSubtype } from \"@jx3box/jx3box-facedat/assets/data/index.json\";\nimport { getConfig } from \"@/service/cms\";\nexport default {\n    name: \"face\",\n    components: {\n        publishHeader,\n        publishTitle,\n        publishOriginal,\n        publishClient,\n        faceAttachment,\n        UploadAlbum,\n        publishBanner,\n    },\n    data() {\n        return {\n            post: {\n                // 用户信息\n                original: 1, // 是否原创\n                is_fr: 1, // 是否首发\n                author_name: \"\", // 原作者名称\n                author_link: \"\", // 原作者链接\n                // 作品信息\n                title: \"\", // 标题\n                remark: \"\", // 描述\n                banner: \"\", // 海报图\n                // 数据信息\n                client: \"std\", // 客户端\n                body_type: 1, // 体型\n                is_new_face: 0,\n                data: \"\", // 解析lua的json数据\n                file: \"\", // 关联的附件表uuid\n                // 作者扩展\n                cover: \"\", // 封面\n                images: [], // 图片列表\n                related: [], // 相关作品\n                // 价格\n                price_type: \"0\", // 价格类型 0:免费 1:盒币 2:金箔\n                price_count: 0, // 数量\n                is_unlimited: 0, // 可新建\n                // 从文件中读取的信息\n            },\n            options: {\n                bodyMap,\n                majorMap,\n                faceSubtype,\n                clients: __clients,\n            },\n            editDetail: false,\n            loading: false,\n            processing: false,\n            isSuperAuthor: false,\n            postId: \"\", // 帖子id\n            postType: \"face\", // 帖子类型\n            promise: true,\n            faceAttachments: [],\n            faceData: \"\",\n\n            decalDb: null,\n\n            cny_enable: 0\n        };\n    },\n    computed: {\n        id() {\n            return this.$route.params.id;\n        },\n        client() {\n            return this.$store.state.client;\n        },\n    },\n    async mounted() {\n        this.init();\n    },\n    methods: {\n        init() {\n            if (this.id) {\n                this.getData();\n            } else {\n                this.post.client = this.client;\n            }\n            this.decalDb = new DecalDatabase(this.client);\n            User.isSuperAuthor().then((res) => {\n                this.isSuperAuthor = res;\n            });\n\n            getConfig(\"cny_enable\").then((res) => {\n                this.cny_enable = Number(res.data.data.val);\n            });\n        },\n        getData() {\n            this.loading = true;\n            getFace(this.id).then((res) => {\n                this.post = res.data.data;\n\n                if (this.isOldPost(this.post.updated_at)) {\n                    this.showWarning();\n                }\n\n                this.post.images = this.post.images.map((item) => {\n                    return {\n                        name: item,\n                        url: item,\n                    };\n                });\n                User.isSuperAuthor().then((res) => {\n                    this.isSuperAuthor = res;\n                    if (this.isSuperAuthor === false) {\n                        this.post.price_type = \"0\";\n                        this.post.price_count = 0;\n                    }\n                });\n                getAttachmentOfPost(this.id).then((res) => {\n                    let result = res.data;\n                    if (result && result.data) {\n                        this.faceAttachments = result.data.map((item) => {\n                            return {\n                                id: item.id,\n                                file: item.uuid,\n                                name: item.name,\n                                describe: item.describe || \"\",\n                                data: item.data || \"\",\n                            };\n                        });\n\n                        this.faceData = this.faceAttachments.find((item) => {\n                            return item.file == this.post.file;\n                        });\n                    }\n                    this.loading = false;\n                });\n            });\n        },\n        handleFaceChange({ object = null, json = \"\", uuid = \"\", id = \"\", name = \"\" }) {\n            this.faceAttachments.push({\n                id: id,\n                file: uuid,\n                name: name,\n                data: json,\n                body_type: object[\"nRoleType\"],\n                describe: \"\",\n            });\n            if (true || !this.faceData) {\n                this.faceData = {\n                    id: id,\n                    file: uuid,\n                    name: name,\n                    data: json,\n                    body_type: object[\"nRoleType\"],\n                };\n                this.autoParse(object);\n            }\n        },\n        validator(data) {\n            // 必填字段 title file\n            const required = [\"title\", \"file\"];\n            const requiredMsg = [\"请填写标题\", \"请上传数据\"];\n            let message;\n            for (let i = 0; i < required.length; i++) {\n                if (!data[required[i]]) {\n                    message = requiredMsg[i];\n                    break;\n                }\n            }\n            if (message) {\n                this.$message.warning(message);\n                return false;\n            }\n            return true;\n        },\n        publish() {\n            this.processing = true;\n            const data = {\n                ...this.post,\n                //data: this.post.data,\n                images: this.post.images.map((item) => item.url || item),\n            };\n            let faceAttachmentIds = this.faceAttachments.map((item) => {\n                return {\n                    id: item.id,\n                    describe: item.describe,\n                    data: item.data,\n                };\n            });\n\n            if (this.faceData) {\n                // 如果第一个附件有data，证明这个附件是新上传的，那么更新face使用这个data\n                // 如果第一个附件没有data，那么表示第一个附件是以前的，是通过init()获取的，那么更新face使用原来的data\n                if (this.faceData.data) {\n                    data.data = JSON.stringify(this.faceData.data);\n                }\n                data.body_type = this.faceData.body_type || this.post.body_type;\n                data.file = this.faceData.file;\n            }\n\n            data.attachments = faceAttachmentIds;\n            if (!this.validator(data)) {\n                this.processing = false;\n                return;\n            }\n            if (this.id) {\n                updateFace(this.id, data)\n                    .then((res) => {\n                        this.$message.success(\"修改成功\");\n                        this.processing = false;\n                        // 跳转\n                        setTimeout(() => {\n                            location.href = getLink(\"face\", this.id);\n                        }, 500);\n                    })\n                    .finally(() => {\n                        this.processing = false;\n                    });\n            } else {\n                addFace(data).then((res) => {\n                    this.$message({\n                        message: \"发布成功\",\n                        type: \"success\",\n                    });\n                    this.processing = false;\n                    // 跳转\n                    setTimeout(() => {\n                        location.href = getLink(\"face\", res.data.data.id);\n                    }, 500);\n                });\n            }\n        },\n        // 移除文件标识\n        removeFile(id) {\n            let newQueue = [];\n            for (let i = 0; i < this.faceAttachments.length; i++) {\n                if (this.faceAttachments[i].id == id) {\n                    continue;\n                }\n                newQueue.push(this.faceAttachments[i]);\n            }\n            this.faceAttachments = newQueue;\n            if (this.faceData.id == id) {\n                this.faceData = \"\";\n            }\n        },\n        // 设置主要文件\n        setMain(item) {\n            this.faceData = cloneDeep(item);\n            try {\n                const object = JSON.parse(item.data);\n                this.autoParse(object);\n                this.$notify({\n                    title: \"设置成功\",\n                    type: \"success\",\n                    duration: 2000,\n                });\n            } catch (e) {\n                console.error(\"[文件解析失败]\", e);\n                this.$notify({\n                    title: \"解析失败\",\n                    type: \"error\",\n                    duration: 2000,\n                });\n            }\n        },\n        // 自动解析数据\n        autoParse(object) {\n            this.post.client = majorMap[object.nMajorVersion];\n            this.post.is_new_face = object.bNewFace ? 1 : 0;\n            this.post.body_type = object[\"nRoleType\"];\n            this.decalDb = new DecalDatabase(this.post.client, object.bNewFace);\n            this.decalDb.setBodyType(this.post.body_type);\n            this.post.is_unlimited = ~~this.decalDb.canUseInCreate(object);\n            this.post.game_price = ~~this.decalDb.getTotalPrice(object, object.bNewFace);\n        },\n        // 是否收费选项变更时\n        changePriceType(val) {\n            if (Number(val) === 0) {\n                this.post.price_count = 0;\n            }\n        },\n        // 指定时间范围\n        isOldPost(datetime) {\n            return new Date(datetime) < new Date(\"2023-11-13 00:00:00\");\n        },\n        // 警告\n        showWarning() {\n            this.$confirm(\n                \"为保护原创作者的权益，避免他人盗卖作品盈利，我们已修改了相关规则，目前仅签约作者可使用作品收费功能。<br/><br/><span style='color:#f00;font-weight:bold;'>若您不是【签约作者】，继续编辑此作品，将会使作品变为【免费】。</span>\",\n                \"注意\",\n                {\n                    distinguishCancelAndClose: true,\n                    confirmButtonText: \"放弃修改\",\n                    // confirmButtonClass: \"u-btn-ok\",\n                    cancelButtonText: \"我已阅读并知晓\",\n                    // cancelButtonClass: \"u-btn-cancel\",\n                    dangerouslyUseHTMLString: true,\n                    callback: (action) => {\n                        if (action == \"confirm\") {\n                            window.location.href = location.origin + getLink(\"face\", this.id);\n                        }\n                    },\n                }\n            ).catch((action) => {});\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/face.less\";\n// .el-message-box{\n//     .u-btn-ok{\n//         background-color:#fff;\n//         border:1px solid #eee;\n//     }\n//     .u-btn-cancel{\n//         background-color:#c00;\n//     }\n// }\n</style>\n","import { render, staticRenderFns } from \"./face.vue?vue&type=template&id=6db0375b\"\nimport script from \"./face.vue?vue&type=script&lang=js\"\nexport * from \"./face.vue?vue&type=script&lang=js\"\nimport style0 from \"./face.vue?vue&type=style&index=0&id=6db0375b&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-publish-box m-publish-box-face\"},[_c('publish-header',{attrs:{\"name\":\"捏脸分享\"}}),_c('el-form',{attrs:{\"label-position\":\"left\",\"label-width\":\"90px\"}},[_c('publish-title',{model:{value:(_vm.post.title),callback:function ($$v) {_vm.$set(_vm.post, \"title\", $$v)},expression:\"post.title\"}}),_c('div',{staticClass:\"m-publish-info\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"信息\")]),_c('el-form-item',{attrs:{\"label\":\"数据\"}},[_c('face-attachment',{attrs:{\"body\":_vm.post.body_type,\"type\":\"face\"},on:{\"update:data\":_vm.handleFaceChange}}),_vm._l((_vm.faceAttachments),function(item){return _c('div',{key:item.id,staticClass:\"u-attachment\"},[_c('el-button',{staticClass:\"u-main\",attrs:{\"type\":item.file === _vm.faceData.file ? 'warning' : '',\"icon\":\"el-icon-star-off\",\"circle\":\"\",\"plain\":item.file === _vm.faceData.file ? false : true,\"size\":\"mini\",\"title\":\"设为主数据\"},on:{\"click\":function($event){return _vm.setMain(item)}}}),_c('span',{staticClass:\"u-attachment-text\"},[_vm._v(\" 文件名: \"),_c('b',[_vm._v(_vm._s(item.name))])]),_c('span',{staticClass:\"u-attachment-remark\"},[_c('el-input',{attrs:{\"placeholder\":\"备注\",\"size\":\"mini\"},model:{value:(item.describe),callback:function ($$v) {_vm.$set(item, \"describe\", $$v)},expression:\"item.describe\"}})],1),_c('el-button',{staticClass:\"u-btn\",attrs:{\"type\":\"info\",\"icon\":\"el-icon-delete\",\"circle\":\"\",\"plain\":\"\",\"size\":\"mini\",\"title\":\"移除\"},on:{\"click\":function($event){return _vm.removeFile(item.id)}}})],1)})],2),(_vm.faceData)?_c('el-form-item',{attrs:{\"label\":\"体型\"}},[_c('el-radio-group',{model:{value:(_vm.post.body_type),callback:function ($$v) {_vm.$set(_vm.post, \"body_type\", $$v)},expression:\"post.body_type\"}},_vm._l((_vm.options.bodyMap),function(body_info,body_type){return _c('el-radio',{key:body_type,attrs:{\"label\":~~body_type}},[_vm._v(_vm._s(body_info.label))])}),1)],1):_vm._e(),(_vm.faceData)?_c('publish-client',{attrs:{\"forbidAll\":true},model:{value:(_vm.post.client),callback:function ($$v) {_vm.$set(_vm.post, \"client\", $$v)},expression:\"post.client\"}}):_vm._e(),(_vm.faceData && _vm.post.client === 'std')?_c('el-form-item',{attrs:{\"label\":\"画风\"}},[_c('el-radio-group',{model:{value:(_vm.post.is_new_face),callback:function ($$v) {_vm.$set(_vm.post, \"is_new_face\", $$v)},expression:\"post.is_new_face\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"写实\")]),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"写意\")])],1)],1):_vm._e(),(_vm.faceData)?_c('el-form-item',{attrs:{\"label\":\"可新建\"}},[_c('el-switch',{attrs:{\"active-value\":1,\"inactive-value\":0},model:{value:(_vm.post.is_unlimited),callback:function ($$v) {_vm.$set(_vm.post, \"is_unlimited\", $$v)},expression:\"post.is_unlimited\"}})],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"首发\",\"prop\":\"is_fr\"}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"active-value\":1,\"inactive-value\":0},model:{value:(_vm.post.is_fr),callback:function ($$v) {_vm.$set(_vm.post, \"is_fr\", $$v)},expression:\"post.is_fr\"}})],1),_c('publish-original',{model:{value:(_vm.post.original),callback:function ($$v) {_vm.$set(_vm.post, \"original\", $$v)},expression:\"post.original\"}}),(!_vm.post.original)?[_c('el-form-item',{attrs:{\"label\":\"原作者名称\",\"prop\":\"author_name\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入原作者名称\"},model:{value:(_vm.post.author_name),callback:function ($$v) {_vm.$set(_vm.post, \"author_name\", $$v)},expression:\"post.author_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"原作者链接\",\"prop\":\"author_link\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入原作者链接\"},model:{value:(_vm.post.author_link),callback:function ($$v) {_vm.$set(_vm.post, \"author_link\", $$v)},expression:\"post.author_link\"}})],1)]:_vm._e(),_c('el-form-item',{scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_c('span',[_vm._v(\"价格\")]),_c('el-tooltip',{attrs:{\"content\":\"仅签约作者可以发布收费作品；1金箔=1分CNY\"}},[_c('i',{staticClass:\"el-icon-warning-outline\",staticStyle:{\"margin-left\":\"2px\",\"color\":\"#c00\"}})])]},proxy:true}])},[_c('el-radio-group',{attrs:{\"disabled\":!_vm.isSuperAuthor},on:{\"change\":_vm.changePriceType},model:{value:(_vm.post.price_type),callback:function ($$v) {_vm.$set(_vm.post, \"price_type\", $$v)},expression:\"post.price_type\"}},[_c('el-radio',{attrs:{\"label\":\"0\"}},[_vm._v(\"免费\")]),(_vm.isSuperAuthor && _vm.cny_enable)?_c('el-radio',{attrs:{\"label\":\"2\"}},[_vm._v(\"收费(金箔)\")]):_vm._e()],1),(_vm.post.price_type != '0')?_c('el-input-number',{staticClass:\"u-price\",attrs:{\"size\":\"small\",\"max\":3000,\"min\":0},model:{value:(_vm.post.price_count),callback:function ($$v) {_vm.$set(_vm.post, \"price_count\", $$v)},expression:\"post.price_count\"}}):_vm._e(),(_vm.post.price_type != '0' && _vm.post.price_count > 0)?_c('div',{staticClass:\"u-tip-box\"},[_c('div',{staticClass:\"u-warning\"},[_c('el-checkbox',{attrs:{\"disabled\":\"\"},model:{value:(_vm.promise),callback:function ($$v) {_vm.promise=$$v},expression:\"promise\"}},[_vm._v(\" 我承诺该上传属于自己的原创作品或已得到原作者授权，且相关信息中不带有非授权的元素（比如贴图、字体）等，若违反法律规定我将承担全部责任，魔盒有权下架作品。 \")])],1)]):_vm._e()],1),_c('el-form-item',{attrs:{\"label\":\"说明\"}},[_c('el-input',{attrs:{\"placeholder\":\"请填写相关说明\",\"type\":\"textarea\",\"rows\":3},model:{value:(_vm.post.remark),callback:function ($$v) {_vm.$set(_vm.post, \"remark\", $$v)},expression:\"post.remark\"}})],1),_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"扩展\")]),_c('el-form-item',{attrs:{\"label\":\"图片列表\"}},[_c('UploadAlbum',{model:{value:(_vm.post.images),callback:function ($$v) {_vm.$set(_vm.post, \"images\", $$v)},expression:\"post.images\"}})],1),(_vm.isSuperAuthor)?_c('publish-banner',{model:{value:(_vm.post.banner),callback:function ($$v) {_vm.$set(_vm.post, \"banner\", $$v)},expression:\"post.banner\"}}):_vm._e()],2),_c('div',{staticClass:\"m-publish-buttons\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.processing},on:{\"click\":_vm.publish}},[_vm._v(\"发    布\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js\"","<template>\n    <div class=\"m-publish-header\">\n        <el-page-header @back=\"goBack\" :content=\"name\"></el-page-header>\n        <slot></slot>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"publish_header\",\n    props: [\"name\"],\n    data: function() {\n        return {\n        };\n    },\n    computed: {},\n    methods: {\n        goBack: function() {\n            if(window.history.length){\n                this.$router.go(-1);\n            }else{\n                this.$router.push('/')\n            }\n        },\n    },\n    mounted: function() {},\n    components: {\n    },\n};\n</script>\n\n<style lang=\"less\">\n    .m-publish-header{\n        .pr;\n    }\n    \n</style>","import { render, staticRenderFns } from \"./publish_header.vue?vue&type=template&id=36319e52\"\nimport script from \"./publish_header.vue?vue&type=script&lang=js\"\nexport * from \"./publish_header.vue?vue&type=script&lang=js\"\nimport style0 from \"./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-header\"},[_c('el-page-header',{attrs:{\"content\":_vm.name},on:{\"back\":_vm.goBack}}),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { $next } from \"@jx3box/jx3box-common/js/https\";\n\n\nexport function delFace(id) {\n    return $next().delete(`/api/face/${id}`);\n}\n\n/**\n * 上传付费附件\n * @param {*} data\n */\nexport function uploadFaceFile(data) {\n    return $next().post(\"/api/face/file-upload\", data);\n}\n\n/**\n * 新增捏脸\n * @params {Object} data\n */\nexport function addFace(data) {\n    return $next().post(\"/api/face\", data);\n}\n\n/**\n * 获取捏脸数据\n * @params {*} id\n */\nexport function getFace(id) {\n    return $next().get(`/api/face/${id}`);\n}\n\n/**\n * 更新捏脸数据\n * @params {*} id\n * @params {*} data\n */\nexport function updateFace(id, data) {\n    return $next().put(`/api/face/${id}`, data);\n}\n\n/**\n * 移除关联作品\n * @param {*} id 附件id\n * @param {*} postType 作品类型\n * @param {*} postId 作品id\n */\nexport function attachmentRemoveRelatePost(id, postType, postId) {\n    return $next().delete(`/api/charge_attachment/${postType}/${postId}/${id}`);\n}\n\n/**\n * 获取捏脸列表\n * @param {*} params\n */\nexport function getFaceList(params) {\n    return $next().get(\"/api/face/my-list\", { params });\n}\n\n/**\n * 获取所有捏脸列表\n * @param {*} params\n */\nexport function getAllFaceList(params) {\n    return $next().get(\"/api/face\", { params });\n}\n\n/**\n * 上架一个捏脸数据\n * @param {*} id\n */\nexport function faceOnline(id) {\n    return $next().put(`/api/face/${id}/online`);\n}\n\n/**\n * 下架一个捏脸数据\n * @param {*} id\n */\nexport function faceOffline(id) {\n    return $next().put(`/api/face/${id}/offline`);\n}\n\n/**\n * 作品关联的附件\n * @param {*} postType 作品类型\n * @param {*} postId 作品id\n */\nexport function getAttachmentOfPost(postId) {\n    return $next().get(`/api/charge_attachment/face/${postId}/edit`);\n}\n"],"sourceRoot":""}