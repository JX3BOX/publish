{"version":3,"sources":["webpack:///./src/components/publish_original.vue","webpack:///./src/components/publish_original.vue?a153","webpack:///src/components/publish_original.vue","webpack:///./src/components/publish_original.vue?5e2c","webpack:///./src/components/publish_client.vue","webpack:///./src/components/publish_client.vue?7a6c","webpack:///src/components/publish_client.vue","webpack:///./src/components/publish_client.vue?9d29","webpack:///./src/store/bus.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/post/face.vue?3b91","webpack:///./src/components/face_attachment.vue?e3be","webpack:///./src/components/publish_header.vue?17ab","webpack:///./src/components/publish_title.vue","webpack:///./src/components/publish_title.vue?054d","webpack:///src/components/publish_title.vue","webpack:///./src/components/publish_title.vue?fc78","webpack:///./src/post/face.vue","webpack:///./src/components/face_attachment.vue?9e91","webpack:///src/components/face_attachment.vue","webpack:///./src/components/face_attachment.vue?df38","webpack:///./src/components/face_attachment.vue","webpack:///./src/post/face.vue?096a","webpack:///src/post/face.vue","webpack:///./src/post/face.vue?f4f1","webpack:///./src/components/publish_header.vue?814f","webpack:///src/components/publish_header.vue","webpack:///./src/components/publish_header.vue?3a87","webpack:///./src/components/publish_header.vue","webpack:///./src/service/face.js"],"names":["name","props","data","original","model","prop","event","watch","newval","deep","handler","$emit","computed","methods","mounted","components","component","_vm","this","_c","_self","staticClass","attrs","value","callback","$$v","expression","_t","client","handleChange","Bus","on","_v","forbidAll","_e","Vue","_defineProperty","obj","key","toPropertyKey","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","title","hideDiv","placeholder","body","type","Number","default","describe","String","id","uuid","json","selectData","document","getElementById","dispatchEvent","MouseEvent","uploadData","file","_this","formdata","FormData","append","uploadFile","then","res","$message","message","processFile","e","files","size","parseAndUpload","FileReader","vm","fr","onload","console","log","parseFace","result","JSON","stringify","ex","$notify","error","setTimeout","onerror","readAsArrayBuffer","clearData","directives","rawName","publishHeader","publishTitle","publishOriginal","publishClient","faceAttachment","UploadAlbum","post","author_name","author_link","remark","banner","body_type","cover","images","related","price_type","price_count","loading","processing","fileId","postId","postType","bodyMap","promise","$route","params","$store","state","init","getData","getFace","map","item","url","handleFaceChange","_ref","_ref$object","_ref$json","_ref$uuid","_ref$id","validator","required","requiredMsg","warning","publish","_this2","_objectSpread","updateFace","success","afterPublish","finally","location","href","concat","addFace","attachmentRelatePost","Promise","resolve","removeFile","$set","_l","body_label","_s","goBack","window","history","$router","go","$next","get","put","getFaceList","faceOnline","faceOffline"],"mappings":"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","file":"js/chunk-6623edd0.09210043.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-original\"},[_c('el-form-item',{attrs:{\"label\":\"原创\"}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"active-value\":1,\"inactive-value\":0},model:{value:(_vm.original),callback:function ($$v) {_vm.original=$$v},expression:\"original\"}})],1),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_original.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_original.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"m-publish-original\">\n        <el-form-item label=\"原创\">\n            <el-switch v-model=\"original\" active-color=\"#13ce66\" :active-value=\"1\" :inactive-value=\"0\"></el-switch>\n        </el-form-item>\n        <slot></slot>\n    </div>\n</template>\n<script>\nexport default {\n    name: \"publish_original\",\n    props: [\"data\"],\n    data: function () {\n        return {\n            original: ~~this.data,\n        };\n    },\n    model: {\n        prop: \"data\", //向上同步数据\n        event: \"update\",\n    },\n    watch: {\n        data: function (newval) {\n            this.original = ~~newval;\n        },\n        original: {\n            deep: true,\n            handler: function (newval) {\n                this.$emit(\"update\", ~~newval);\n            },\n        },\n    },\n    computed: {},\n    methods: {},\n    mounted: function () {},\n    components: {},\n};\n</script>\n","import { render, staticRenderFns } from \"./publish_original.vue?vue&type=template&id=7086d09e&\"\nimport script from \"./publish_original.vue?vue&type=script&lang=js&\"\nexport * from \"./publish_original.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-client\"},[_c('el-form-item',{attrs:{\"label\":\"版本\"}},[_c('el-radio-group',{on:{\"change\":_vm.handleChange},model:{value:(_vm.client),callback:function ($$v) {_vm.client=$$v},expression:\"client\"}},[_c('el-radio',{attrs:{\"label\":\"std\"}},[_vm._v(\"重制\")]),_c('el-radio',{attrs:{\"label\":\"origin\"}},[_vm._v(\"缘起\")]),(!_vm.forbidAll)?_c('el-radio',{attrs:{\"label\":\"all\"}},[_vm._v(\"双端\")]):_vm._e()],1)],1),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_client.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_client.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"m-publish-client\">\n        <el-form-item label=\"版本\">\n            <el-radio-group v-model=\"client\" @change=\"handleChange\">\n                <el-radio label=\"std\">重制</el-radio>\n                <el-radio label=\"origin\">缘起</el-radio>\n                <el-radio label=\"all\" v-if=\"!forbidAll\">双端</el-radio>\n            </el-radio-group>\n        </el-form-item>\n        <slot></slot>\n    </div>\n</template>\n<script>\nimport Bus from '@/store/bus.js'\nexport default {\n    name: \"publish_client\",\n    props: [\"data\",'forbidAll'],\n    data: function () {\n        return {\n            client: this.data,\n        };\n    },\n    model: {\n        prop: \"data\", //向上同步数据\n        event: \"update\",\n    },\n    watch: {\n        data: function (newval) {\n            this.client = newval;\n        },\n        client: {\n            deep: true,\n            handler: function (newval) {\n                this.$emit(\"update\", newval);\n            },\n        },\n    },\n    computed: {},\n    methods: {\n        handleChange : function (){\n            Bus.$emit('changeClient',this.client)\n        }\n    },\n    mounted: function () {},\n    components: {},\n};\n</script>\n\n\n","import { render, staticRenderFns } from \"./publish_client.vue?vue&type=template&id=b9ad60ea&\"\nimport script from \"./publish_client.vue?vue&type=script&lang=js&\"\nexport * from \"./publish_client.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nconst Bus = new Vue();\nexport default Bus\n\n// Use like\n// Bus.$emit(事件名,数据);\n// Bus.$on(事件名,data => {});","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face.vue?vue&type=style&index=0&id=7f46042a&prod&lang=less&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face_attachment.vue?vue&type=style&index=0&id=7b764d4f&prod&lang=less&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-title\"},[(!_vm.hideDiv)?_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"标题\")]):_vm._e(),_c('el-input',{attrs:{\"maxlength\":50,\"minlength\":2,\"show-word-limit\":\"\",\"required\":\"\",\"placeholder\":_vm.placeholder || '请填写标题'},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}}),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_title.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_title.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"m-publish-title\">\n        <el-divider content-position=\"left\" v-if=\"!hideDiv\">标题</el-divider>\n        <el-input\n            v-model=\"title\"\n            :maxlength=\"50\"\n            :minlength=\"2\"\n            show-word-limit\n            required\n            :placeholder=\"placeholder || '请填写标题'\"\n        ></el-input>\n        <slot></slot>\n    </div>\n</template>\n<script>\nexport default {\n    name: \"publish_title\",\n    props: [\"data\",\"hideDiv\",\"placeholder\"],\n    data: function () {\n        return {\n            title: this.data,\n        };\n    },\n    model: {\n        prop: \"data\",   //向上同步数据\n        event: \"update\",\n    },\n    watch: {\n        data: function(newval) {\n            this.title = newval;\n        },\n        title: {\n            deep: true,\n            handler: function(newval) {\n                this.$emit(\"update\", newval);\n            },\n        },\n    },\n    computed: {},\n    methods: {},\n    mounted: function () {},\n    components: {},\n};\n</script>\n","import { render, staticRenderFns } from \"./publish_title.vue?vue&type=template&id=d0fa58d6&\"\nimport script from \"./publish_title.vue?vue&type=script&lang=js&\"\nexport * from \"./publish_title.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-publish-box m-publish-box-face\"},[_c('publish-header',{attrs:{\"name\":\"捏脸分享\"}}),_c('el-form',{attrs:{\"label-position\":\"left\",\"label-width\":\"90px\"}},[_c('publish-title',{model:{value:(_vm.post.title),callback:function ($$v) {_vm.$set(_vm.post, \"title\", $$v)},expression:\"post.title\"}}),_c('div',{staticClass:\"m-publish-info\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"信息\")]),_c('publish-client',{attrs:{\"forbidAll\":true},model:{value:(_vm.post.client),callback:function ($$v) {_vm.$set(_vm.post, \"client\", $$v)},expression:\"post.client\"}}),_c('publish-original',{model:{value:(_vm.post.original),callback:function ($$v) {_vm.$set(_vm.post, \"original\", $$v)},expression:\"post.original\"}}),(!_vm.post.original)?[_c('el-form-item',{attrs:{\"label\":\"原作者名称\",\"prop\":\"author_name\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入原作者名称\"},model:{value:(_vm.post.author_name),callback:function ($$v) {_vm.$set(_vm.post, \"author_name\", $$v)},expression:\"post.author_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"原作者链接\",\"prop\":\"author_link\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入原作者链接\"},model:{value:(_vm.post.author_link),callback:function ($$v) {_vm.$set(_vm.post, \"author_link\", $$v)},expression:\"post.author_link\"}})],1)]:_vm._e(),_c('el-form-item',{attrs:{\"label\":\"价格\"}},[_c('el-radio-group',{model:{value:(_vm.post.price_type),callback:function ($$v) {_vm.$set(_vm.post, \"price_type\", $$v)},expression:\"post.price_type\"}},[_c('el-radio',{attrs:{\"label\":\"0\"}},[_vm._v(\"免费\")]),_c('el-radio',{attrs:{\"label\":\"2\"}},[_vm._v(\"金箔\")])],1),(_vm.post.price_type != '0')?_c('el-input-number',{staticClass:\"u-price\",attrs:{\"size\":\"small\",\"max\":3000,\"min\":0},model:{value:(_vm.post.price_count),callback:function ($$v) {_vm.$set(_vm.post, \"price_count\", $$v)},expression:\"post.price_count\"}}):_vm._e(),(_vm.post.price_type != '0' && _vm.post.price_count > 0)?_c('div',{staticClass:\"u-tip-box\"},[_c('div',{staticClass:\"u-warning\"},[_c('el-checkbox',{attrs:{\"disabled\":\"\"},model:{value:(_vm.promise),callback:function ($$v) {_vm.promise=$$v},expression:\"promise\"}},[_vm._v(\"我承诺该上传属于自己的原创作品或已得到原作者授权，且相关信息中不带有非授权的元素（比如贴图、字体）等，若违反法律规定我将承担全部责任，魔盒有权下架作品。\")])],1)]):_vm._e()],1),_c('el-form-item',{attrs:{\"label\":\"体型\"}},[_c('el-radio-group',{model:{value:(_vm.post.body_type),callback:function ($$v) {_vm.$set(_vm.post, \"body_type\", $$v)},expression:\"post.body_type\"}},_vm._l((_vm.bodyMap),function(body_label,body_type){return _c('el-radio',{key:body_type,attrs:{\"label\":~~body_type}},[_vm._v(_vm._s(body_label))])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"数据\"}},[(!_vm.post.file)?_c('face-attachment',{attrs:{\"body\":_vm.post.body_type},on:{\"update:data\":_vm.handleFaceChange}}):_c('div',{staticClass:\"u-attachment\"},[_c('span',{staticClass:\"u-attachment-text\"},[_vm._v(\"当前数据唯一标识符：\"),_c('b',[_vm._v(_vm._s(_vm.post.file))])]),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-delete\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":_vm.removeFile}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"placeholder\":\"请填写描述\",\"type\":\"textarea\",\"rows\":3},model:{value:(_vm.post.remark),callback:function ($$v) {_vm.$set(_vm.post, \"remark\", $$v)},expression:\"post.remark\"}})],1),_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"扩展\")]),_c('el-form-item',{attrs:{\"label\":\"图片列表\"}},[_c('UploadAlbum',{model:{value:(_vm.post.images),callback:function ($$v) {_vm.$set(_vm.post, \"images\", $$v)},expression:\"post.images\"}})],1)],2),_c('div',{staticClass:\"m-publish-buttons\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.processing},on:{\"click\":_vm.publish}},[_vm._v(\"发    布\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face_attachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face_attachment.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"m-paid_attachment\">\n        <input class=\"u-data-input\" type=\"file\" id=\"face_file\" @change=\"processFile\" accept=\".jx3dat, .dat, .ini\"/>\n        <el-button type=\"primary\" @click=\"selectData\" icon=\"el-icon-upload2\">上传脸型数据</el-button>\n        <span class=\"u-data-ready\" v-show=\"data.uuid\">\n            <i class=\"el-icon-success\"></i>\n            已上传\n        </span>\n    </div>\n</template>\n\n<script>\nimport { uploadFile } from \"@/service/face.js\";\nimport { parseFace } from \"@jx3box/jx3box-facedat/src/faceParser.js\";\nexport default {\n    name: 'paid_attachment',\n    props: {\n        body: {\n            type: Number,\n            default: 2\n        },\n        describe: {\n            type: String,\n            default: '个人收藏',\n        }\n    },\n    data() {\n        return {\n            data: {\n                id: '',\n                uuid: '',\n                object: '',\n                json: '',\n            }\n        }\n    },\n    methods: {\n        selectData() {\n            let fileInput = document.getElementById(\"face_file\");\n            fileInput.dispatchEvent(new MouseEvent(\"click\"));\n        },\n        uploadData(file) {\n            // 上传源文件\n            let formdata = new FormData();\n            formdata.append(\"jx3dat\", file);\n            formdata.append(\"body\", this.body);\n            formdata.append(\"describe\", this.describe);\n            uploadFile(formdata).then((res) => {\n                this.data.uuid = res.data.data.uuid;\n                this.data.id = res.data.data.id\n                this.$message({\n                    message: \"数据上传成功\",\n                    type: \"success\",\n                });\n                this.$emit(\"update:data\", this.data);\n            });\n        },\n        processFile(e) {\n            let file = e.target.files[0];\n            // 大于64kb\n            if(file && file.size > 65536) {\n                this.$message({\n                    message: \"文件过大，限 64KB 以内\",\n                    type: \"error\",\n                });\n                return;\n            }\n            // 解析并上传数据\n\n            this.parseAndUpload(file);\n            e.target.value = \"\";\n        },\n        parseAndUpload(file) {\n            if (!FileReader) return;\n            if (!file) return;\n            const vm = this;\n\n            // 读入 File 转 ArrayBuffer 进行读取\n            let fr = new FileReader();\n            fr.onload = function (e) {\n                console.log(\"读取成功...开始执行分析...\");\n                let json = '';\n                let object = '';\n                try {\n                    object = parseFace(e.target.result);\n                    json = JSON.stringify(object);\n                }\n                catch(ex) {\n                    console.log(ex);\n                    vm.$notify.error({\n                        title: \"错误\",\n                        message: \"无法读取数据\",\n                    });\n                    return;\n                }\n\n                // 解析成功开始上传\n                if (object && json) {\n                    setTimeout(() => vm.$notify({\n                        title: \"成功\",\n                        message: \"数据读取成功，开始上传\",\n                        type: \"success\",\n                    }), 0);\n                    vm.uploadData(file);\n                    vm.data.object = object;\n                    vm.data.json = json;\n                }\n            };\n            fr.onerror = function (e) {\n                vm.$notify.error({\n                    title: \"错误\",\n                    message: \"文件读取异常\",\n                });\n            };\n            fr.readAsArrayBuffer(file);\n        },\n        clearData() {\n            this.data = {\n                id: '',\n                uuid: '',\n                object: null,\n                json: '',\n            }\n            this.$emit(\"update:data\", this.data);\n        },\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.m-paid_attachment {\n    .u-data-input {\n        display: none;\n    }\n\n    .u-data-ready {\n        margin-left: 10px;\n        i {\n            color: #67c23a;\n        }\n    }\n}\n</style>\n","import { render, staticRenderFns } from \"./face_attachment.vue?vue&type=template&id=7b764d4f&scoped=true&\"\nimport script from \"./face_attachment.vue?vue&type=script&lang=js&\"\nexport * from \"./face_attachment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./face_attachment.vue?vue&type=style&index=0&id=7b764d4f&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b764d4f\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-paid_attachment\"},[_c('input',{staticClass:\"u-data-input\",attrs:{\"type\":\"file\",\"id\":\"face_file\",\"accept\":\".jx3dat, .dat, .ini\"},on:{\"change\":_vm.processFile}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-upload2\"},on:{\"click\":_vm.selectData}},[_vm._v(\"上传脸型数据\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.data.uuid),expression:\"data.uuid\"}],staticClass:\"u-data-ready\"},[_c('i',{staticClass:\"el-icon-success\"}),_vm._v(\" 已上传 \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./face.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"m-publish-box m-publish-box-face\" v-loading=\"loading\">\n        <!-- 头部 -->\n        <publish-header name=\"捏脸分享\"></publish-header>\n\n        <el-form label-position=\"left\" label-width=\"90px\">\n            <!-- 标题 -->\n            <publish-title v-model=\"post.title\"></publish-title>\n            <!-- 信息 -->\n            <div class=\"m-publish-info\">\n                <el-divider content-position=\"left\">信息</el-divider>\n                <!-- 客户端 -->\n                <publish-client v-model=\"post.client\" :forbidAll=\"true\"></publish-client>\n                <!-- 原创 -->\n                <publish-original v-model=\"post.original\"></publish-original>\n                <template v-if=\"!post.original\">\n                    <el-form-item label=\"原作者名称\" prop=\"author_name\">\n                        <el-input v-model=\"post.author_name\" placeholder=\"输入原作者名称\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"原作者链接\" prop=\"author_link\">\n                        <el-input v-model=\"post.author_link\" placeholder=\"输入原作者链接\"></el-input>\n                    </el-form-item>\n                </template>\n\n                <el-form-item label=\"价格\">\n                    <el-radio-group v-model=\"post.price_type\">\n                        <el-radio label=\"0\">免费</el-radio>\n                        <!-- <el-radio label=\"1\">盒币</el-radio> -->\n                        <el-radio label=\"2\">金箔</el-radio>\n                    </el-radio-group>\n                    <el-input-number\n                        class=\"u-price\"\n                        v-model=\"post.price_count\"\n                        v-if=\"post.price_type != '0'\"\n                        size=\"small\"\n                        :max=\"3000\"\n                        :min=\"0\"\n                    ></el-input-number>\n                    <div class=\"u-tip-box\" v-if=\"post.price_type != '0' && post.price_count > 0\">\n                        <div class=\"u-warning\">\n                            <el-checkbox\n                                v-model=\"promise\"\n                                disabled\n                                >我承诺该上传属于自己的原创作品或已得到原作者授权，且相关信息中不带有非授权的元素（比如贴图、字体）等，若违反法律规定我将承担全部责任，魔盒有权下架作品。</el-checkbox\n                            >\n                        </div>\n                    </div>\n                </el-form-item>\n\n                <el-form-item label=\"体型\">\n                    <el-radio-group v-model=\"post.body_type\">\n                        <el-radio :label=\"~~body_type\" v-for=\"(body_label, body_type) in bodyMap\" :key=\"body_type\">{{\n                            body_label\n                        }}</el-radio>\n                    </el-radio-group>\n                </el-form-item>\n\n                <el-form-item label=\"数据\">\n                    <face-attachment v-if=\"!post.file\" :body=\"post.body_type\" @update:data=\"handleFaceChange\" />\n                    <div class=\"u-attachment\" v-else>\n                        <span class=\"u-attachment-text\">当前数据唯一标识符：<b>{{ post.file }}</b></span>\n                        <el-button type=\"primary\" icon=\"el-icon-delete\" circle @click=\"removeFile\" size=\"mini\"/>\n                    </div>\n                </el-form-item>\n\n                <el-form-item label=\"描述\">\n                    <el-input v-model=\"post.remark\" placeholder=\"请填写描述\" type=\"textarea\" :rows=\"3\"></el-input>\n                </el-form-item>\n                <el-divider content-position=\"left\">扩展</el-divider>\n                <el-form-item label=\"图片列表\">\n                    <UploadAlbum v-model=\"post.images\"></UploadAlbum>\n                </el-form-item>\n                <!-- TODO: 关联作品 -->\n                <!-- <el-form-item label=\"关联作品\"></el-form-item> -->\n                <!-- <publish-banner v-model=\"post.banner\"></publish-banner> -->\n            </div>\n\n            <!-- 按钮 -->\n            <div class=\"m-publish-buttons\">\n                <el-button type=\"primary\" @click=\"publish\" :disabled=\"processing\">发 &nbsp;&nbsp; 布</el-button>\n            </div>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport { getLink } from \"@jx3box/jx3box-common/js/utils\";\n\nimport { attachmentRelatePost, addFace, getFace, updateFace } from \"@/service/face\";\nimport publishHeader from \"@/components/publish_header.vue\";\nimport publishTitle from \"@/components/publish_title.vue\";\nimport publishOriginal from \"@/components/publish_original.vue\";\nimport publishClient from \"@/components/publish_client.vue\";\nimport faceAttachment from \"@/components/face_attachment.vue\";\nimport UploadAlbum from \"@jx3box/jx3box-editor/src/UploadAlbum.vue\";\n// import publishBanner from \"@/components/publish_banner.vue\";\nimport { bodyMap } from \"@jx3box/jx3box-facedat/assets/data/index.json\";\nexport default {\n    name: \"face\",\n    components: {\n        publishHeader,\n        publishTitle,\n        publishOriginal,\n        publishClient,\n        faceAttachment,\n        UploadAlbum,\n        // publishBanner,\n    },\n    data() {\n        return {\n            post: {\n                // 用户信息\n                original: 1, // 是否原创\n                author_name: \"\", // 原作者名称\n                author_link: \"\", // 原作者链接\n                // 作品信息\n                title: \"\", // 标题\n                remark: \"\", // 描述\n                banner: \"\", // 海报图\n                // 数据信息\n                client: \"std\", // 客户端\n                body_type: 1, // 体型\n                data: \"\", // 解析lua的json数据\n                file: \"\", // 关联的附件表uuid\n                // 作者扩展\n                cover: \"\", // 封面\n                images: [], // 图片列表\n                related: [], // 相关作品\n                // 价格\n                price_type: \"0\", // 价格类型 0:免费 1:盒币 2:金箔\n                price_count: 0, // 数量\n            },\n\n            loading: false,\n            processing: false,\n\n            fileId: \"\", // 附件id\n            postId: \"\", // 帖子id\n            postType: \"face\", // 帖子类型\n            bodyMap,\n            promise: true,\n        };\n    },\n    computed: {\n        id() {\n            return this.$route.params.id;\n        },\n        client() {\n            return this.$store.state.client;\n        },\n    },\n    mounted() {\n        this.init();\n    },\n    methods: {\n        init() {\n            if (this.id) {\n                this.getData();\n            } else {\n                this.post.client = this.client;\n            }\n        },\n        getData() {\n            this.loading = true;\n            getFace(this.id).then((res) => {\n                this.post = res.data.data;\n                this.post.images = this.post.images.map((item) => {\n                    return {\n                        name: item,\n                        url: item,\n                    };\n                });\n                this.loading = false;\n            });\n        },\n        handleFaceChange({ object = null, json = \"\", uuid = \"\", id = \"\" }) {\n            this.post.data = json;\n            this.post.file = uuid;\n            this.fileId = id;\n            this.post.body_type = object[\"nRoleType\"];\n        },\n        validator() {\n            // 必填字段 title file\n            const required = [\"title\", \"file\"];\n            const requiredMsg = [\"请填写标题\", \"请上传数据\"];\n            let message;\n            for (let i = 0; i < required.length; i++) {\n                if (!this.post[required[i]]) {\n                    message = requiredMsg[i];\n                    break;\n                }\n            }\n            if (message) {\n                this.$message.warning(message);\n                return false;\n            }\n            return true;\n        },\n        publish() {\n            this.processing = true;\n            const data = {\n                ...this.post,\n                images: this.post.images.map((item) => item.url || item),\n            };\n            if (!this.validator()) {\n                this.processing = false;\n                return;\n            }\n            if (this.id) {\n                updateFace(this.id, data).then((res) => {\n                    this.$message.success(\"修改成功\");\n                    this.afterPublish(this.id).finally(() => {\n                        this.processing = false;\n                        // 跳转\n                        setTimeout(() => {\n                            location.href = `/face/${this.id}`;\n                        }, 500);\n                    });\n                }).finally(() => {\n                    this.processing = false;\n                });\n            } else {\n                addFace(data).then((res) => {\n                    this.$message({\n                        message: \"发布成功\",\n                        type: \"success\",\n                    });\n                    this.afterPublish(res.data.data.id).finally(() => {\n                        this.processing = false;\n                        // 跳转\n                        setTimeout(() => {\n                            location.href = `/face/${res.data.data.id}`;\n                        }, 500);\n                    }).finally(() => {\n                        this.processing = false;\n                    });\n                });\n            }\n        },\n        afterPublish(id) {\n            if (!this.fileId) {\n                return Promise.resolve();\n            }\n            return attachmentRelatePost(this.fileId, this.postType, id);\n        },\n        // 移除文件标识\n        removeFile() {\n            this.post.file = \"\";\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/face.less\";\n</style>\n","import { render, staticRenderFns } from \"./face.vue?vue&type=template&id=7f46042a&\"\nimport script from \"./face.vue?vue&type=script&lang=js&\"\nexport * from \"./face.vue?vue&type=script&lang=js&\"\nimport style0 from \"./face.vue?vue&type=style&index=0&id=7f46042a&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"m-publish-header\">\n        <el-page-header @back=\"goBack\" :content=\"name\"></el-page-header>\n        <slot></slot>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"publish_header\",\n    props: [\"name\"],\n    data: function() {\n        return {\n        };\n    },\n    computed: {},\n    methods: {\n        goBack: function() {\n            if(window.history.length){\n                this.$router.go(-1);\n            }else{\n                this.$router.push('/')\n            }\n        },\n    },\n    mounted: function() {},\n    components: {\n    },\n};\n</script>\n\n<style lang=\"less\">\n    .m-publish-header{\n        .pr;\n    }\n    \n</style>","import { render, staticRenderFns } from \"./publish_header.vue?vue&type=template&id=36319e52&\"\nimport script from \"./publish_header.vue?vue&type=script&lang=js&\"\nexport * from \"./publish_header.vue?vue&type=script&lang=js&\"\nimport style0 from \"./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-header\"},[_c('el-page-header',{attrs:{\"content\":_vm.name},on:{\"back\":_vm.goBack}}),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { $next } from \"@jx3box/jx3box-common/js/https\";\n\n/**\n * 上传付费附件\n * @param {*} data\n */\nexport function uploadFile(data) {\n    return $next().post(\"/api/face/file-upload\", data);\n}\n\n/**\n * 新增捏脸\n * @params {Object} data\n */\nexport function addFace(data) {\n    return $next().post(\"/api/face\", data);\n}\n\n/**\n * 获取捏脸数据\n * @params {*} id\n */\nexport function getFace(id) {\n    return $next().get(`/api/face/${id}`);\n}\n\n/**\n * 更新捏脸数据\n * @params {*} id\n * @params {*} data\n */\nexport function updateFace(id, data) {\n    return $next().put(`/api/face/${id}`, data);\n}\n\n/**\n * 附件关联作品\n * @param {*} id 附件id\n * @param {*} postType 作品类型\n * @param {*} postId 作品id\n */\nexport function attachmentRelatePost(id, postType, postId) {\n    return $next().post(`/api/charge_attachment/${id}/link-to/${postType}/${postId}`);\n}\n\n/**\n * 移除关联作品\n * @param {*} id 附件id\n * @param {*} postType 作品类型\n * @param {*} postId 作品id\n */\nexport function attachmentRemoveRelatePost(id, postType, postId) {\n    return $next().delete(`/api/charge_attachment/${postType}/${postId}/${id}`);\n}\n\n/**\n * 获取捏脸列表\n * @param {*} params\n */\nexport function getFaceList(params) {\n    return $next().get(\"/api/face/my-list\", { params });\n}\n\n/**\n * 上架一个捏脸数据\n * @param {*} id\n */\nexport function faceOnline(id) {\n    return $next().put(`/api/face/${id}/online`);\n}\n\n/**\n * 下架一个捏脸数据\n * @param {*} id\n */\nexport function faceOffline(id) {\n    return $next().put(`/api/face/${id}/offline`);\n}\n"],"sourceRoot":""}