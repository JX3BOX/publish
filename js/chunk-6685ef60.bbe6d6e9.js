(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6685ef60"],{"0cb2":function(t,e,n){var i=n("7b0b"),a=Math.floor,s="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,c,r,u){var p=n+t.length,d=c.length,f=l;return void 0!==r&&(r=i(r),f=o),s.call(u,f,(function(i,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(p);case"<":o=r[s.slice(1,-1)];break;default:var l=+s;if(0===l)return i;if(l>d){var u=a(l/10);return 0===u?i:u<=d?void 0===c[u-1]?s.charAt(1):c[u-1]+s.charAt(1):i}o=c[l-1]}return void 0===o?"":o}))}},"159b":function(t,e,n){var i=n("da84"),a=n("fdbc"),s=n("17c2"),o=n("9112");for(var l in a){var c=i[l],r=c&&c.prototype;if(r&&r.forEach!==s)try{o(r,"forEach",s)}catch(u){r.forEach=s}}},1686:function(t,e,n){"use strict";n("78c0")},"17c2":function(t,e,n){"use strict";var i=n("b727").forEach,a=n("a640"),s=a("forEach");t.exports=s?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"25f0":function(t,e,n){"use strict";var i=n("6eeb"),a=n("825a"),s=n("d039"),o=n("ad6d"),l="toString",c=RegExp.prototype,r=c[l],u=s((function(){return"/a/b"!=r.call({source:"a",flags:"b"})})),p=r.name!=l;(u||p)&&i(RegExp.prototype,l,(function(){var t=a(this),e=String(t.source),n=t.flags,i=String(void 0===n&&t instanceof RegExp&&!("flags"in c)?o.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},"46d4":function(t){t.exports=JSON.parse('{"冰心诀":{"name":"冰心诀","color":"#FF7DAD","id":10081,"icon":888,"force":5,"kungfuId":10,"school":4,"client":["all","std","origin"]},"云裳心经":{"name":"云裳心经","color":"#ffadcb","id":10080,"icon":887,"force":5,"kungfuId":9,"school":4,"client":["all","std","origin"]},"花间游":{"name":"花间游","color":"#BA9BE4","id":10021,"icon":406,"force":2,"kungfuId":5,"school":2,"client":["all","std","origin"]},"离经易道":{"name":"离经易道","color":"#d8c4ff","id":10028,"icon":412,"force":2,"kungfuId":7,"school":2,"client":["all","std","origin"]},"毒经":{"name":"毒经","color":"#4B9BFB","id":10175,"icon":2766,"force":6,"kungfuId":13,"school":9,"client":["all","std"]},"补天诀":{"name":"补天诀","color":"#7db8ff","id":10176,"icon":2767,"force":6,"kungfuId":14,"school":9,"client":["all","std"]},"莫问":{"name":"莫问","color":"#6DDFE2","id":10447,"icon":7071,"force":22,"kungfuId":22,"school":19,"client":["all","std"]},"相知":{"name":"相知","color":"#78f0f3","id":10448,"icon":7067,"force":22,"kungfuId":23,"school":19,"client":["all","std"]},"傲血战意":{"name":"傲血战意","color":"#EC4B2C","id":10026,"icon":633,"force":3,"kungfuId":6,"school":1,"client":["all","std","origin"]},"铁牢律":{"name":"铁牢律","color":"#d43618","id":10062,"icon":632,"force":3,"kungfuId":8,"school":1,"client":["all","std","origin"]},"易筋经":{"name":"易筋经","color":"#E6BC31","id":10003,"icon":425,"force":1,"kungfuId":2,"school":5,"client":["all","std","origin"]},"洗髓经":{"name":"洗髓经","color":"#b58f12","id":10002,"icon":429,"force":1,"kungfuId":1,"school":5,"client":["all","std","origin"]},"焚影圣诀":{"name":"焚影圣诀","color":"#f16040","id":10242,"icon":3865,"force":10,"kungfuId":17,"school":8,"client":["all","std"]},"明尊琉璃体":{"name":"明尊琉璃体","color":"#c55036","id":10243,"icon":3864,"force":10,"kungfuId":18,"school":8,"client":["all","std"]},"分山劲":{"name":"分山劲","color":"#6568ad","id":10390,"icon":6314,"force":21,"kungfuId":21,"school":18,"client":["all","std"]},"铁骨衣":{"name":"铁骨衣","color":"#4f5186","id":10389,"icon":6315,"force":21,"kungfuId":20,"school":18,"client":["all","std"]},"紫霞功":{"name":"紫霞功","color":"#37C0E2","id":10014,"icon":627,"force":4,"kungfuId":3,"school":3,"client":["all","std","origin"]},"太虚剑意":{"name":"太虚剑意","color":"#48d6f9","id":10015,"icon":619,"force":4,"kungfuId":4,"school":3,"client":["all","std","origin"]},"天罗诡道":{"name":"天罗诡道","color":"#90CC50","id":10225,"icon":3184,"force":7,"kungfuId":16,"school":10,"client":["all","std"]},"惊羽诀":{"name":"惊羽诀","color":"#a2e05f","id":10224,"icon":3165,"force":7,"kungfuId":15,"school":10,"client":["all","std"]},"问水诀":{"name":"问水诀","color":"#FDDD70","id":10144,"icon":2376,"force":8,"kungfuId":11,"school":6,"client":["all","std"]},"笑尘诀":{"name":"笑尘诀","color":"#D6A16F","id":10268,"icon":4610,"force":9,"kungfuId":19,"school":7,"client":["all","std"]},"北傲诀":{"name":"北傲诀","color":"#8D90D8","id":10464,"icon":8424,"force":23,"kungfuId":24,"school":20,"client":["all","std"]},"凌海诀":{"name":"凌海诀","color":"#94C7DC","id":10533,"icon":10709,"force":24,"kungfuId":25,"school":21,"client":["all","std"]},"隐龙诀":{"name":"隐龙诀","color":"#872F37","id":10585,"icon":12128,"force":25,"kungfuId":26,"school":22,"client":["all","std"]},"太玄经":{"name":"太玄经","color":"#b9c1ff","id":10615,"icon":13894,"force":211,"kungfuId":27,"school":23,"client":["all","std"]},"通用":{"name":"通用","color":"#c3c5c1","id":0,"icon":2589,"force":0,"kungfuId":0,"school":0,"client":["all","std","origin"]}}')},5319:function(t,e,n){"use strict";var i=n("d784"),a=n("825a"),s=n("50c4"),o=n("a691"),l=n("1d80"),c=n("8aa5"),r=n("0cb2"),u=n("14c3"),p=Math.max,d=Math.min,f=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var m=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=i.REPLACE_KEEPS_$0,g=m?"$":"$0";return[function(n,i){var a=l(this),s=void 0==n?void 0:n[t];return void 0!==s?s.call(n,a,i):e.call(String(a),n,i)},function(t,i){if(!m&&h||"string"===typeof i&&-1===i.indexOf(g)){var l=n(e,t,this,i);if(l.done)return l.value}var v=a(t),b=String(this),_="function"===typeof i;_||(i=String(i));var y=v.global;if(y){var C=v.unicode;v.lastIndex=0}var x=[];while(1){var k=u(v,b);if(null===k)break;if(x.push(k),!y)break;var w=String(k[0]);""===w&&(v.lastIndex=c(b,s(v.lastIndex),C))}for(var $="",I=0,S=0;S<x.length;S++){k=x[S];for(var E=String(k[0]),D=p(d(o(k.index),b.length),0),z=[],j=1;j<k.length;j++)z.push(f(k[j]));var M=k.groups;if(_){var F=[E].concat(z,D,b);void 0!==M&&F.push(M);var L=String(i.apply(void 0,F))}else L=r(E,b,D,z,M,i);D>=I&&($+=b.slice(I,D)+L,I=D+E.length)}return $+b.slice(I)}]}))},6487:function(t,e,n){},"66ee":function(t,e,n){},"69e3":function(t){t.exports=JSON.parse('{"a":{"江湖":0,"天策":1,"万花":2,"纯阳":3,"七秀":4,"少林":5,"藏剑":6,"丐帮":7,"明教":8,"五毒":9,"唐门":10,"苍云":18,"长歌":19,"霸刀":20,"蓬莱":21,"凌雪":22}}')},"78c0":function(t,e,n){},"85bc":function(t,e,n){"use strict";n("cbd7")},"8cfe":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("boilerplate",{staticClass:"m-publish-macro",attrs:{type:t.type,name:t.name,post:t.post}},[[n("publish-lang",{model:{value:t.post.lang,callback:function(e){t.$set(t.post,"lang",e)},expression:"post.lang"}}),n("publish-zlp",{attrs:{client:t.post.client},model:{value:t.post.zlp,callback:function(e){t.$set(t.post,"zlp",e)},expression:"post.zlp"}}),n("publish-xf",{attrs:{client:t.post.client},model:{value:t.post.post_subtype,callback:function(e){t.$set(t.post,"post_subtype",e)},expression:"post.post_subtype"}}),n("el-divider",{attrs:{"content-position":"left"}},[t._v("宏")]),n("div",{staticClass:"m-macro-box"},[n("div",{staticClass:"m-macro-header"},[n("el-button",{staticClass:"m-macro-addbutton",attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:t.addMacro}},[t._v("添加宏")]),n("a",{staticClass:"m-macro-docs el-button el-button--primary is-plain el-button--small",attrs:{target:"_blank",href:"https://www.jx3box.com/tool/265/"}},[n("i",{staticClass:"el-icon-s-management"}),t._v(" 宏命令完整参考手册 ")]),n("a",{staticClass:"m-macro-help el-button el-button--success is-plain el-button--small",attrs:{href:"https://www.jx3box.com/tool/14671/",target:"_blank"}},[n("i",{staticClass:"el-icon-info"}),t._v(" 点击查看发布帮助 ")])],1),n("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-remove":t.removeMacro},model:{value:t.activeMacroIndex,callback:function(e){t.activeMacroIndex=e},expression:"activeMacroIndex"}},t._l(t.post.post_meta.data,(function(e,i){return n("el-tab-pane",{key:i,attrs:{name:i+1+""}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("img",{staticClass:"u-tabicon",attrs:{src:t.icon(e)}}),t._v(" "+t._s(i+1+"号位-"+e.name)+" ")]),n("div",{staticClass:"m-macro-cloud m-macro-item"},[n("h5",{staticClass:"u-title"},[t._v(" 云端宏图标/名称 "),n("a",{staticClass:"u-icon-links",attrs:{href:"/app/icons",target:"_blank"}},[n("i",{staticClass:"el-icon-question"}),t._v(" 图标大全 ")])]),n("div",{staticClass:"u-group"},[n("div",{staticClass:"u-subblock m-macro-icon"},[n("el-input",{attrs:{placeholder:"图标ID",minlength:1,maxlength:10,max:3e4,min:0},model:{value:e.icon,callback:function(n){t.$set(e,"icon",n)},expression:"item.icon"}},[n("template",{slot:"prepend"},[n("img",{staticClass:"u-icon",attrs:{src:t.icon(e)}})])],2)],1),n("div",{staticClass:"u-subblock m-macro-name"},[n("el-input",{attrs:{placeholder:"每个宏名称请使用自己名下唯一命名",minlength:1,maxlength:20,"show-word-limit":""},on:{change:function(n){return t.checkDataName(e)}},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"item.name"}},[n("template",{slot:"prepend"},[n("b",{staticClass:"u-feed"},[t._v(" "+t._s(t.nickname)+"#"+t._s(e.name)+" ")])])],2)],1)])]),n("div",{staticClass:"m-macro-talent m-macro-item"},[n("h5",{staticClass:"u-title"},[t._v("奇穴方案")]),n("div",{staticClass:"m-macro-talent-simulator"},[n("div",{staticClass:"qx-container"})]),n("el-input",{attrs:{placeholder:"奇穴方案编码"},on:{change:function(n){return t.checkTalent(e)}},model:{value:e.talent,callback:function(n){t.$set(e,"talent",n)},expression:"item.talent"}},[n("template",{slot:"prepend"},[n("a",{staticClass:"u-get",attrs:{target:"_blank",href:"/app/talent"}},[n("i",{staticClass:"el-icon-warning"}),t._v(" 获取编码 ")])])],2)],1),n("div",{staticClass:"m-macro-macro"},[n("h5",{staticClass:"u-title"},[t._v(" 宏内容 "),n("a",{staticClass:"u-icon-links",attrs:{href:"/app/macroeditor",target:"_blank"}},[n("i",{staticClass:"el-icon-question"}),t._v(" 智能中文宏编辑器 ")])]),n("el-input",{attrs:{placeholder:"注释请写在说明中,勿写在宏内部",minlength:1,maxlength:128,"show-word-limit":"",type:"textarea",rows:12},model:{value:e.macro,callback:function(n){t.$set(e,"macro",n)},expression:"item.macro"}})],1),n("div",{staticClass:"m-macro-equip"},[n("h5",{staticClass:"u-title"},[t._v(" 配装方案 "),n("a",{staticClass:"u-icon-links",attrs:{href:"/tool/19309",target:"_blank"}},[n("i",{staticClass:"el-icon-question"}),t._v(" 魔盒清单使用指南 ")])]),n("el-input",{attrs:{placeholder:"配装方案编号"},model:{value:e.equip,callback:function(n){t.$set(e,"equip",n)},expression:"item.equip"}},[n("template",{slot:"prepend"},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.equip_type,callback:function(n){t.$set(e,"equip_type",n)},expression:"item.equip_type"}},t._l(t.options.equip_types,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1)],2)],1),n("el-form-item",{staticClass:"m-macro-misc",attrs:{label:"其它"}},[n("el-row",[n("el-col",{staticClass:"u-speed",attrs:{span:8}},[n("el-input",{attrs:{placeholder:"填写推荐的急速阈值"},model:{value:e.speed,callback:function(n){t.$set(e,"speed",n)},expression:"item.speed"}},[n("template",{slot:"prepend"},[t._v("急速阈值")])],2)],1),n("el-col",{attrs:{span:8}})],1)],1),n("el-form-item",{staticClass:"m-macro-desc",attrs:{label:"说明"}},[n("el-input",{attrs:{type:"textarea",placeholder:"重要说明（会出现在宏第一行）"},model:{value:e.desc,callback:function(n){t.$set(e,"desc",n)},expression:"item.desc"}})],1),n("div",{staticClass:"m-macro-op"},[n("el-button",{staticClass:"u-macro-remove-fix",attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"small"},on:{click:function(e){return t.removeMacro(i)}}},[t._v("移除本宏")])],1)],1)})),1)],1)]],2)},a=[],s=(n("b0c0"),n("a434"),n("159b"),n("d3b7"),n("25f0"),n("2ef0")),o=n.n(s);function l(t){var e=Object.prototype.toString.call(t);return e.match(/\[object (.*?)\]/)[1].toLowerCase()}var c=l;class r{constructor(t){if("string"!==c(t))throw new Error("[Sterilizer::init] params should be string");this._symbols={"`":"`","~":"~","!":"!","@":"@","#":"#",$:"\\$","%":"%","^":"\\^","&":"&","*":"\\*","-":"\\-",_:"_","=":"=","+":"+","(":"\\(",")":"\\)","[":"\\[","]":"\\]","{":"\\{","}":"\\}","|":"\\|","\\":"\\\\","/":"/","?":"\\?",":":":",";":";","'":"'",'"':'"',">":">","<":"<",",":",",".":"\\."},this.symbols=Object.keys(this._symbols),this.regs=Object.values(this._symbols),this.str=t,this._str=t}toString(){return this._str}_detected(t){let e=c(t),n=["string","array","set"];if(!n.includes(e))throw new Error("[Sterilizer::remove] params should be string|array|set");return t}_sterilize(t){t=[...t].join("");let e=new RegExp(`[${t}]`,"gm");return this._str=this._str.replace(e,""),this}kill(t){let e=null;if(void 0==t)e=new Set(this.regs);else{this._detected(t),e=new Set;let n=new Set(t);for(let t of n)this.symbols.includes(t)&&e.add(this._symbols[t])}return this._sterilize(e)}live(t){this._detected(t);let e=new Set(this.regs);for(let n of t)this.symbols.includes(n)&&e.delete(this._symbols[n]);return this._sterilize(e)}safe(){return this.kill(["&","<",">",'"',"'","+",":","/","?","=","#","%"])}removeHSC(){return this.kill(["&","<",">",'"',"'"])}removeURL(){return this.kill(["+",":","/","?","=","&","#","%"])}removeSpace(){return this._str=this._str.replace(/\s/gm,""),this}remove(t,e){let n=new RegExp(""+t,"gm");return e=void 0!==e?e:"",this._str=this._str.replace(n,e),this}removeHTMLtag(){return this._str=this._str.replace(/<[^>]+>/gm,""),this}isDirty(t){return t?this.str.includes(t):this.symbols.some(t=>this.str.includes(t))}}function u(t){return new r(t)}var p=n("c9d2");n("a4d3"),n("e01a"),n("d28b"),n("3ca3"),n("ddb0");function d(t){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}n("b64b");var f=function(t){return!t||(!(!Array.isArray(t)||t.length)||"object"==d(t)&&!Object.keys(t).length)},m=n("65c2"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-box"},[n("publish-header",{attrs:{name:t.name}},[t._t("header")],2),n("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[n("publish-title",{model:{value:t.post.post_title,callback:function(e){t.$set(t.post,"post_title",e)},expression:"post.post_title"}},[t._t("title")],2),n("div",{staticClass:"m-publish-info"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("信息")]),n("publish-original",{model:{value:t.post.original,callback:function(e){t.$set(t.post,"original",e)},expression:"post.original"}}),n("publish-client",{model:{value:t.post.client,callback:function(e){t.$set(t.post,"client",e)},expression:"post.client"}}),t._t("default")],2),n("div",{staticClass:"m-publish-prepend"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("正文")]),t._t("prepend")],2),n("div",{staticClass:"m-publish-content"},[n("Tinymce",{directives:[{name:"show",rawName:"v-show",value:"tinymce"==t.mode,expression:"mode == 'tinymce'"}],attrs:{attachmentEnable:!0,resourceEnable:!0},model:{value:t.post.post_content,callback:function(e){t.$set(t.post,"post_content",e)},expression:"post.post_content"}})],1),n("div",{staticClass:"m-publish-append"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("附加")]),t._t("append")],2),n("div",{staticClass:"m-publish-extend"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("扩展")]),t._t("extend")],2),n("div",{staticClass:"m-publish-buttons"},[t._t("buttons")],2)],1)],1)},g=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-editor-tinymce"},[n("div",{staticClass:"c-editor-header"},[t.attachmentEnable?n("Upload",{on:{insert:t.insertAttachments}}):t._e(),t.resourceEnable?n("Resource",{on:{insert:t.insertResource}}):t._e(),t._t("default")],2),n("editor",{staticClass:"c-tinymce",attrs:{id:"tinymce",init:t.init,placeholder:"✔ 图片可右键粘贴或拖拽至编辑器内自动上传 ✔ 支持word/excel内容一键粘贴"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}),n("el-alert",{staticClass:"u-tutorial",attrs:{type:"warning","show-icon":""}},[t._v("进入特殊区域（代码块，折叠块等等）脱离或使用工具栏触发后，请使用键盘方向 → ↓ 键进行脱离，回车只是正常在区块内换行。去掉样式点击第二行第一个<清除格式>即可复位。"),n("a",{attrs:{href:"https://www.jx3box.com/tool/?pid=16227#/",target:"_blank"}},[t._v("[编辑器使用指南]")])])],1)},b=[],_=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],y=function(t){return-1!==_.map((function(t){return t.toLowerCase()})).indexOf(t.toLowerCase())},C=function(t,e,n){Object.keys(e).filter(y).forEach((function(i){var a=e[i];"function"===typeof a&&("onInit"===i?a(t,n):n.on(i.substring(2),(function(t){return a(t,n)})))}))},x=function(t,e){var n=t.$props.modelEvents?t.$props.modelEvents:null,i=Array.isArray(n)?n.join(" "):n;e.on(i||"change input undo redo",(function(){t.$emit("input",e.getContent({format:t.$props.outputFormat}))}))},k=function(t,e,n){var i=e.$props.value?e.$props.value:"",a=e.$props.initialValue?e.$props.initialValue:"";n.setContent(i||(e.initialized?e.cache:a)),e.$watch("value",(function(t,i){n&&"string"===typeof t&&t!==i&&t!==n.getContent({format:e.$props.outputFormat})&&n.setContent(t)})),e.$listeners.input&&x(e,n),C(t,e.$listeners,n),e.initialized=!0},w=0,$=function(t){var e=Date.now(),n=Math.floor(1e9*Math.random());return w++,t+"_"+n+w+String(e)},I=function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()},S=function(t){return"undefined"===typeof t||""===t?[]:Array.isArray(t)?t:t.split(" ")},E=function(t,e){return S(t).concat(S(e))},D=function(t){return null===t||void 0===t},z=function(){return{listeners:[],scriptId:$("tiny-script"),scriptLoaded:!1}},j=function(){var t=z(),e=function(t,e,n,i){var a=e.createElement("script");a.referrerPolicy="origin",a.type="application/javascript",a.id=t,a.src=n;var s=function(){a.removeEventListener("load",s),i()};a.addEventListener("load",s),e.head&&e.head.appendChild(a)},n=function(n,i,a){t.scriptLoaded?a():(t.listeners.push(a),n.getElementById(t.scriptId)||e(t.scriptId,n,i,(function(){t.listeners.forEach((function(t){return t()})),t.scriptLoaded=!0})))},i=function(){t=z()};return{load:n,reinitialize:i}},M=j(),F=n("c4a9"),L={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return"html"===t||"text"===t}}},O=function(){return O=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},O.apply(this,arguments)},N=function(t,e,n){return t(n||"div",{attrs:{id:e}})},P=function(t,e){return t("textarea",{attrs:{id:e},style:{visibility:"hidden"}})},B=function(t){return function(){var e=O(O({},t.$props.init),{readonly:t.$props.disabled,selector:"#"+t.elementId,plugins:E(t.$props.init&&t.$props.init.plugins,t.$props.plugins),toolbar:t.$props.toolbar||t.$props.init&&t.$props.init.toolbar,inline:t.inlineEditor,setup:function(e){t.editor=e,e.on("init",(function(n){return k(n,t,e)})),t.$props.init&&"function"===typeof t.$props.init.setup&&t.$props.init.setup(e)}});I(t.element)&&(t.element.style.visibility="",t.element.style.display=""),Object(F["a"])().init(e)}},q={props:L,created:function(){this.elementId=this.$props.id||$("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline,this.initialized=!1},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(F["a"])())B(this)();else if(this.element&&this.element.ownerDocument){var t=this.$props.cloudChannel?this.$props.cloudChannel:"5",e=this.$props.apiKey?this.$props.apiKey:"no-api-key",n=D(this.$props.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+e+"/tinymce/"+t+"/tinymce.min.js":this.$props.tinymceScriptSrc;M.load(this.element.ownerDocument,n,B(this))}},beforeDestroy:function(){null!==Object(F["a"])()&&Object(F["a"])().remove(this.editor)},deactivated:function(){var t;this.inlineEditor||(this.cache=this.editor.getContent(),null===(t=Object(F["a"])())||void 0===t||t.remove(this.editor))},activated:function(){!this.inlineEditor&&this.initialized&&B(this)()},render:function(t){return this.inlineEditor?N(t,this.elementId,this.$props.tagName):P(t,this.elementId)}},A=q,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-upload"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传附件")]),n("el-dialog",{staticClass:"c-large-dialog",attrs:{title:"上传",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-button",{staticClass:"u-upload-clear",attrs:{plain:"",icon:"el-icon-delete",size:"mini"},on:{click:t.clear}},[t._v("清空")]),n("el-alert",{staticClass:"u-upload-tip",attrs:{title:t.tip,type:"info","show-icon":"",closable:!1}}),n("el-upload",{ref:"uploadbox",attrs:{action:t.API,"list-type":"picture-card","auto-upload":!1,limit:10,multiple:"","with-credentials":"","file-list":t.fileList,"on-change":t.change},scopedSlots:t._u([{key:"file",fn:function(e){var i=e.file;return n("div",{staticClass:"u-file-wrapper",class:{isSelected:i.selected,disabled:"success"!=i.status},on:{click:function(e){return t.select(i)}}},[i.is_img?n("img",{staticClass:"el-upload-list__item-thumbnail u-imgbox",attrs:{src:i.url,alt:""}}):n("div",{staticClass:"u-filebox"},[n("svg",{class:"u-fileplaceholder",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 469.333 469.333","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{d:"M466.208 88.458L380.875 3.125c-2-2-4.708-3.125-7.542-3.125H42.667C19.146 0 0 19.135 0 42.667v384c0 23.531 19.146 42.667 42.667 42.667h384c23.521 0 42.667-19.135 42.667-42.667V96a10.665 10.665 0 00-3.126-7.542zM106.667 21.333h234.667v128c0 11.76-9.563 21.333-21.333 21.333H128c-11.771 0-21.333-9.573-21.333-21.333v-128zM384 448H85.333V256H384v192zm64-21.333c0 11.76-9.563 21.333-21.333 21.333h-21.333V245.333a10.66 10.66 0 00-10.667-10.667h-320A10.66 10.66 0 0064 245.333V448H42.667c-11.771 0-21.333-9.573-21.333-21.333v-384c0-11.76 9.563-21.333 21.333-21.333h42.667v128C85.333 172.865 104.479 192 128 192h192c23.521 0 42.667-19.135 42.667-42.667v-128h6.25L448 100.417v326.25z"}}),n("path",{attrs:{d:"M266.667 149.333h42.667a10.66 10.66 0 0010.667-10.667V53.333a10.66 10.66 0 00-10.667-10.667h-42.667A10.66 10.66 0 00256 53.333v85.333a10.66 10.66 0 0010.667 10.667zM277.333 64h21.333v64h-21.333V64z"}})]),n("span",{staticClass:"u-filename"},[t._v(t._s(i.name))])]),n("label",{directives:[{name:"show",rawName:"v-show",value:i.selected,expression:"file.selected"}],staticClass:"u-file-select-label"},[n("i",{staticClass:"el-icon-upload-success el-icon-check"})])])}}])},[n("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.insert}},[t._v(t._s(t.buttonTXT))])],1)],1)],1)},T=[],U=(n("1276"),n("ac1f"),n("caad"),n("99af"),n("a15b"),n("bc3a")),V=n.n(U),H=(n("c5d8"),m["__server"]+"upload"),J=["jpg","png","gif","bmp","webp"],K={name:"Upload",data:function(){return{API:H,dialogVisible:!1,tip:"一次最多同时上传10个文件（不超过5M），格式限常见的图片、文档、数据表及压缩包",fileList:[],selectedCount:0,insertList:""}},watch:{fileList:{deep:!0,handler:function(t){this.$emit("update",t)}},insertList:function(t){this.$emit("htmlUpdate",t)}},computed:{buttonTXT:function(){return this.selectedCount?"插 入":"确 定"}},methods:{change:function(t,e){var n=this;if("success"!=t.status){var i=new FormData;i.append("file",t.raw),V.a.post(H,i,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then((function(e){n.$message({message:"上传成功",type:"success"}),t.url=e.data.data.list[0];var i=t.name.split(".").pop(),a=J.includes(i);t.is_img=a,t.selected=!0,t.status="success",n.fileList.push(t),n.selectedCount++})).catch((function(t){t.response.data.code?n.$message.error("[".concat(t.response.data.code,"] ").concat(t.response.data.msg)):n.$message.error("请求异常")}))}},select:function(t){"success"==t.status&&(this.$set(t,"selected",!t.selected),t.selected?this.selectedCount++:this.selectedCount--)},buildHTML:function(){var t=[];return this.fileList.forEach((function(e){e.selected&&(e.is_img?t.push('<img src="'.concat(e.url,'" />')):t.push('<a target="_blank" href="'.concat(e.url,'">').concat(e.name,"</a>")))})),this.insertList=t.join(" \n"),this.insertList},insert:function(){this.dialogVisible=!1,this.selectedCount&&(this.$emit("insert",{list:this.fileList,html:this.buildHTML()}),this.resetSelectStatus())},resetSelectStatus:function(){var t=this;this.fileList.forEach((function(e,n){t.$set(t.fileList[n],"selected",!1)})),this.selectedCount=0},clear:function(){this.$refs.uploadbox.clearFiles(),this.fileList=[]},removeFile:function(t,e){t.forEach((function(n,i){n.uid==e&&t.splice(i,1)}))}},mounted:function(){},components:{}},X=K,G=(n("df4f"),n("2877")),Q=Object(G["a"])(X,R,T,!1,null,null,null),W=Q.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-resource"},[n("el-button",{staticClass:"u-switch",attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[n("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{d:"M14.4 92.2c.4-8.2.6-11.8 4.3-16.9 3.7 3.9 7.7 7.1 12.4 9.1 1 .4 2.1.8 3.1 1.2-6.8 6-10.1 6.1-19.8 6.6zm37-55.1c-1.2.8-2.3 1.7-3.3 2.7-1.6 1.7-2.9 3.6-3.6 5.5L49 41c.8-.9 1.9-2.7 2.4-3.9zm10.4-9.7c-1.8.3-3.3.7-4.6 1.2 1.4.4 2.7.8 4.6 1.4v-2.6zM72 22.6l1.3.5 1-1c-1.4-.7-2.9-1.3-4.5-1.8l2.2 2.3zm-5-3c-2.5-.6-5.1-1-7.9-1.2 1.7-1.3 5.4-2 7.9-2.6-4.2-1.7-11.5-1.9-17.5 0-.3 1-1 2.6-1.8 3.3-1.1 1-2.1 1.8-2.9 2.6 6.8-3 14-3.2 21.1-1.2l1.1-.9zm-46.9-.4c.8 5.3-1.3 13.8-1.7 14.9-.4 1.1-1 2.3-2.7 6.8-1.8 4.5-1.6 13-.4 15.7-2.9-2-6.5-3.2-9.9-2 5.8 2.9 9 9.4 12.8 14.4C27 80.5 37.8 85.8 51.7 82c6.9-1.9 16.8-15.2 10.9-20.3-10.3 5.8-21.2-1.5-21.7-12.7-.3-8.2 8.6-16.4 17.2-17.5-3.5-1.1-4.7-1.6-9.2-.9 4.1-3 7.1-5.3 14.1-6 .4-.8 1.1-1.3 1.8-1.9-8.7-2.3-21.4-2-32.5 12.7 3.3-7.3 5.7-10.2 13.9-18.2 2.2-2.1 1.7-5.2 1.5-7.4-2.3 3.8-6.5 5.9-12.3 8.4-4.4 1.9-8.3 5.1-11.2 9.2-.8-3.2-1.6-6-4.1-8.2zM61.7 79c1-.4 2.1-.9 3.1-1.4-2.9 4.7-10 10-22.7 11.7 13.6 3.6 26.6 1.5 34.8-6.9-.7 1.2-1.3 2.4-2.1 3.5C84.8 80 97.9 63 88.5 46.5c1.6 1.3 2.9 2.8 4 5 .1-7.8-2.3-14.9-6.8-20.5l-2.6 2.7 4.9 4.8-3.6 4.4c-1.8 2.2-3 2.2-5.2 2.2h-3.1c-.1 1-.5 2-1.3 2.7v2.3c0 2.2-1.3 4.3-3.4 4.9-2.6.8-4.7 2.3-6.6 4.3 1.3 1.1 2.1 2.5 2.6 4.1.7 2.6.3 5.4-.9 8.2-1.1 2.7-2.9 5.2-4.8 7.4zM44.4 49.5l6.6-6.3c1.3-1.3 3.3-4.5 4-6.9.2-.5.8-1 1.7-1l4.3-.1.2-.8c.1-.4.3-.5.7-.5h2.8c.1 0 .3-.1.3-.3v-6.2c0-1.2 0-1.8.9-2.6l2-1.6 5 5.1 12.7-12.5.8-3.1c.3-1.2 1.2-1.2 2.1-.4l3 2.6 2.6 3c.8.9.9 1.8-.4 2.1l-3 1-12.5 12.7 5.1 5-1.6 2c-.8 1-1.4.9-2.6.9h-6.2c-.1 0-.3.1-.3.3v2.8c0 .4-.1.5-.5.7l-.8.2V50c0 .9-.5 1.6-1 1.7-2.4.7-5.6 2.7-6.9 4L60 59.2c-3.9 2-7.9 1.7-11.5-1.5-2-1.8-3.5-4.4-4-7.2 0-.3-.1-.7-.1-1z",fill:"#24292e"}})]),t._v("剑三资源")]),n("el-dialog",{staticClass:"c-large-dialog",attrs:{title:"剑三数据库",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"c-resource-content"},[n("div",{staticClass:"m-database-search"},[n("el-input",{attrs:{placeholder:"请输入 ID 或 名称"},on:{change:t.search},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[n("template",{slot:"prepend"},[t._v("ID ／名称")]),t.isPC?n("template",{slot:"append"},[n("el-switch",{attrs:{"active-text":"精确匹配"},on:{change:t.search},model:{value:t.strict,callback:function(e){t.strict=e},expression:"strict"}})],1):t._e()],2)],1),n("el-tabs",{staticClass:"m-database-tabs",attrs:{type:"card"},on:{"tab-click":t.changeType},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[n("el-tab-pane",{attrs:{label:"技能",name:"skill"}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"467.374",height:"467.374",viewBox:"0 0 467.374 467.374","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{d:"M459.657 82.222c0-5.136-1.704-9.419-5.133-12.843l-56.531-56.531c-3.425-3.427-7.706-5.14-12.847-5.14-5.144 0-9.421 1.713-12.847 5.14L5.14 380.005C1.709 383.434 0 387.719 0 392.858c0 5.141 1.709 9.418 5.14 12.847l56.529 56.527c3.431 3.429 7.708 5.141 12.85 5.141 5.137 0 9.419-1.704 12.847-5.141l367.162-367.16c3.425-3.43 5.129-7.708 5.129-12.85zm-127.619 83.655l-30.546-30.55 83.651-83.654 30.546 30.549-83.651 83.655zM65.384 73.087l8.564-27.978 27.977-8.564-27.977-8.566L65.384.001l-8.566 27.978-27.978 8.566 27.978 8.564zM139.61 108.494l17.133 55.961 17.133-55.961 55.959-17.133-55.959-17.131-17.133-55.961L139.61 74.23 83.651 91.361zM439.392 210.7l-8.563-27.977-8.562 27.977-27.98 8.565 27.98 8.565 8.562 27.975 8.563-27.975 27.982-8.565zM248.106 73.087l8.566-27.978 27.976-8.564-27.976-8.566L248.106.001l-8.562 27.978-27.98 8.566 27.98 8.564z"}})]),n("b",[t._v("技能")]),n("em",{staticClass:"u-count"},[t._v(t._s(t.stat.skill))])]),t.skill.length&&t.done?n("p",{staticClass:"m-resource-count"},[n("i",{staticClass:"el-icon-s-data"}),t._v(" 共找到 "),n("b",[t._v(t._s(t.skill.length))]),t._v(" 条记录 ")]):t._e(),n("ul",{staticClass:"m-resource-list"},t._l(t.skill,(function(e,i){return n("li",{key:i,ref:"skill",refInFor:!0,staticClass:"u-item",class:{on:!!e.isSelected},on:{click:function(n){return t.selectCommon("skill",e,i)}}},[n("span",{staticClass:"u-id"},[t._v("ID:"+t._s(e.SkillID))]),n("img",{staticClass:"u-pic",attrs:{title:"IconID:"+e.IconID,src:t._f("iconURL")(e.IconID)}}),n("span",{staticClass:"u-primary"},[n("span",{staticClass:"u-name"},[t._v(t._s(e.Name)+" "),e.SkillName?n("em",[t._v("("+t._s(e.SkillName)+")")]):t._e()]),n("span",{staticClass:"u-content"},[t._v(t._s(t._f("filterRaw")(e.Desc)))])])])})),0),!t.skill.length&&t.done?n("el-alert",{attrs:{title:"没有找到相关条目",type:"info","show-icon":""}}):t._e()],1),n("el-tab-pane",{attrs:{label:"Buff",name:"buff"}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("svg",{class:"u-icon",attrs:{height:"640",viewBox:"0 0 480 480.01",width:"640",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{d:"M400.117 353.61l13.977 38.687a23.992 23.992 0 01-1.559 19.707 24 24 0 01-15.82 11.855 701.88 701.88 0 01-156.711 16.149 704.609 704.609 0 01-157.32-16.278 23.721 23.721 0 01-15.438-11.656 24.36 24.36 0 01-1.539-19.832l13.496-38.496c-46.992 12.16-79.2 30.39-79.2 54.262 0 46.8 123.68 72 240 72 116.321 0 240-25.2 240-72 0-24-32.534-42.285-79.886-54.399zm0 0"}}),n("path",{attrs:{d:"M86.406 408.168a687.757 687.757 0 00153.598 15.84c51.555.504 103-4.809 153.36-15.84a7.992 7.992 0 005.679-10.477l-10.293-28.503a704.722 704.722 0 01-148.746 14.82 703.391 703.391 0 01-149.23-14.934L80.726 397.77a8.007 8.007 0 00.476 6.48c1.086 2 2.98 3.43 5.203 3.918zm0 0M383.277 354.035L315.285 165.77a136.138 136.138 0 01-4.664-15.88l-41.703 32.438-9.824-12.637 44.047-34.257-56.192-7.497 2.113-15.855 58.133 7.75c-.015-5.715.332-11.43 1.051-17.102l11.68-93.761a8 8 0 00-4-7.918 7.842 7.842 0 00-8.883.719l-87.68 70.16a151.83 151.83 0 00-48.558 68.48l-74.72 213.473a664.153 664.153 0 00143.919 14.125 665.606 665.606 0 00143.273-13.973zm-172.71-23.945a8.006 8.006 0 01-3.204-7.84l4.082-23.36-17.039-16.562a7.942 7.942 0 01-2-8.16 8.07 8.07 0 016.48-5.52l23.438-3.359 10.48-21.281a8.39 8.39 0 017.2-4.078 8.385 8.385 0 017.2 4.078l10.48 21.281 23.441 3.36a8.076 8.076 0 016.48 5.519 7.958 7.958 0 01-2 8.16l-17.039 16.563 4.079 23.359a8.003 8.003 0 01-3.2 7.84 7.91 7.91 0 01-4.718 1.52 8.959 8.959 0 01-3.762-.88l-20.961-11.039-20.961 11.04a8.283 8.283 0 01-8.477-.641zm0 0"}})]),n("b",[t._v("Buff")]),n("em",{staticClass:"u-count"},[t._v(t._s(t.stat.buff))])]),t.buff.length&&t.done?n("p",{staticClass:"m-resource-count"},[n("i",{staticClass:"el-icon-s-data"}),t._v(" 共找到 "),n("b",[t._v(t._s(t.buff.length))]),t._v(" 条记录 ")]):t._e(),n("ul",{staticClass:"m-resource-list"},t._l(t.buff,(function(e,i){return n("li",{key:i,ref:"buff",refInFor:!0,staticClass:"u-item",class:{on:!!e.isSelected},on:{click:function(n){return t.selectCommon("buff",e,i)}}},[n("span",{staticClass:"u-id"},[t._v("ID:"+t._s(e.BuffID))]),n("img",{staticClass:"u-pic",attrs:{title:"IconID:"+e.IconID,src:t._f("iconURL")(e.IconID)}}),n("span",{staticClass:"u-primary"},[n("span",{staticClass:"u-name"},[t._v(t._s(e.Name)+" "),e.BuffName?n("em",[t._v("("+t._s(e.BuffName)+")")]):t._e()]),n("span",{staticClass:"u-content"},[t._v(t._s(e.Desc))])])])})),0),!t.buff.length&&t.done?n("el-alert",{attrs:{title:"没有找到相关条目",type:"info","show-icon":""}}):t._e()],1),n("el-tab-pane",{attrs:{label:"物品",name:"item"}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{d:"M447.988 139.696A4 4 0 00444 136h-72v-20C372 52.036 319.96 0 256 0S140 52.036 140 116v20H68a4 4 0 00-3.988 3.696l-28 368a3.988 3.988 0 001.056 3.02A3.988 3.988 0 0040 512h432a4 4 0 003.988-4.3l-28-368.004zM172 116c0-46.316 37.68-84 84-84s84 37.684 84 84v20H172v-20zm-16 132c-22.06 0-40-17.944-40-40 0-15.964 8-30.348 24-36.66V208c0 8.824 7.18 16 16 16s16-7.176 16-16v-36.636c16 6.312 24 20.804 24 36.636 0 22.056-17.94 40-40 40zm200 0c-22.06 0-40-17.944-40-40 0-15.964 8-30.348 24-36.66V208c0 8.824 7.18 16 16 16s16-7.176 16-16v-36.636c16 6.312 24 20.804 24 36.636 0 22.056-17.94 40-40 40z"}})]),n("b",[t._v("物品")]),n("em",{staticClass:"u-count"},[t._v(t._s(t.stat.item))])]),t.item.length&&t.done?n("p",{staticClass:"m-resource-count"},[n("i",{staticClass:"el-icon-s-data"}),t._v(" 共找到 "),n("b",[t._v(t._s(t.item.length))]),t._v(" 条记录 ")]):t._e(),t.item.length?n("ul",{staticClass:"m-resource-list"},t._l(t.item,(function(e,i){return n("li",{key:i,ref:"item",refInFor:!0,staticClass:"u-item",class:{on:e.isSelected},on:{click:function(n){return t.selectItem(e,i)}}},[n("span",{staticClass:"u-id"},[t._v("UiID:"+t._s(e.UiID))]),n("img",{staticClass:"u-pic",attrs:{title:"IconID:"+e.IconID,src:t._f("iconURL")(e.IconID)}}),n("span",{staticClass:"u-name"},[t._v(t._s(e.Name))]),n("span",{staticClass:"u-content",domProps:{innerHTML:t._s(e.DescHtml)}}),n("span",{staticClass:"u-remark"},[t._v(t._s(e.Requirement))])])})),0):t._e(),!t.item.length&&t.done?n("el-alert",{attrs:{title:"没有找到相关条目",type:"info","show-icon":""}}):t._e()],1),n("el-tab-pane",{attrs:{label:"图标",name:"icon"}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 54.4 54.4","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{d:"M4.9 21l19.6 24.4L15.6 21zM17.4 21l9.5 26 9.7-26zM29 46l20.2-25H38.3zM41.5 7.8H28.7l8.8 10.8zM36 19.3l-9-11-9 11zM25.3 7.8H12.5l4 10.8zM11.2 8.9L4.6 19.3H15zM49.4 19.3L42.8 8.8l-3.9 10.5z"}})]),n("b",[t._v("图标")]),n("em",{staticClass:"u-count"},[t._v(t._s(t.stat.icon))])]),t.icon.length&&t.done?n("p",{staticClass:"m-resource-count"},[n("i",{staticClass:"el-icon-s-data"}),t._v(" 共找到 "),n("b",[t._v(t._s(t.icon.length))]),t._v(" 条记录 ")]):t._e(),n("ul",{staticClass:"m-resource-iconlist"},t._l(t.icon,(function(e,i){return n("li",{key:i,ref:"icon",refInFor:!0,staticClass:"u-item",class:{on:!!e.isSelected},on:{click:function(n){return t.selectIcon(e)}}},[n("img",{staticClass:"e-jx3-icon",attrs:{src:t._f("iconURL")(e.iconID),alt:t.query}})])})),0),!t.icon.length&&t.done?n("el-alert",{attrs:{title:"没有找到相关条目",type:"info","show-icon":""}}):t._e()],1)],1),t.multipage?[n("el-button",{staticClass:"m-archive-more",class:{show:t.hasNextPage},attrs:{type:"primary",icon:"el-icon-arrow-down"},on:{click:t.appendPage}},[t._v("加载更多")]),n("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next,jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.changePage}})]:t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isBlank,expression:"isBlank"}],staticClass:"m-database-tip"},[t._v(" ❤ 请输入搜索条件查询 ")])],2),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.insert}},[t._v(t._s(t.buttonTXT))])],1)])],1)},Z=[];n("5319");const tt=m["__node"];function et(t,e,n){switch(t){case"item":return V.a.get(m["__helperUrl"]+"api/item/search",{params:{keyword:e,page:n.page,limit:n.per}},{headers:{Accept:"application/prs.helper.v2+json"},withCredentials:!0}).then(t=>{let e=t.data;return 200===e.code?e.data:null}).catch(t=>{console.log(t)});default:let i=isNaN(e)?"name":"id";return V.a.get(tt+`${t}/${i}/${e}`,{params:n}).then(t=>t.data).catch(t=>{console.log(t)})}}function nt(){return V.a.get(m["__node"]).then(t=>t.data).catch(t=>{console.log(t)})}function it(t,e){return V.a.get(m["__node"]+"icon/name/"+t,{params:e}).then(t=>{let e=t.data,n=[...e.skill,...e.buff,...e.item],i=new Set;n.forEach(t=>{i.add(t.iconID)});let a=[];return i.forEach(t=>{a.push({iconID:t,isSelected:!1})}),n=Array.from(a),n}).catch(t=>{console.log(t)})}var at=n("69e3"),st={name:"Resource",props:[],data:function(){return{dialogVisible:!1,type:"skill",query:"",strict:!1,skill:[],buff:[],item:[],icon:[],stat:{skill:0,buff:0,item:0,npc:0,icon:0},done:!1,loading:!1,isSuper:!1,schools:at["a"],html:"",isPC:!0,per:10,page:1,total:1,pages:1}},computed:{buttonTXT:function(){return this.selectedCount?"插 入":"确 定"},isBlank:function(){return!this.query&&!this[this.type]["length"]},selectedCount:function(){return!!this.html},isNumber:function(){return!isNaN(this.query)},hasNextPage:function(){return this.total>1&&this.page<this.pages},multipage:function(){return"icon"!==this.type&&this.done&&this.pages>1}},watch:{html:function(t){this.$emit("update",t)}},methods:{getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.query){this.loading=!0,this.done=!1;var i=this.query,a={strict:~~this.strict,per:this.per,page:e};if("icon"==this.type)if(isNaN(i))it(i,a).then((function(e){t.icon=e})).finally((function(){t.done=!0,t.loading=!1}));else{var s=[{iconID:~~this.query,isSelected:!1}];this.icon=s,this.done=!0,this.loading=!1}else et(this.type,i,a).then((function(e){var i;n||(t[t.type]=[]),"item"==t.type?(i=t.transformData(e.data),t.pages=e.last_page,t.total=e.total):(i=t.transformData(e.list),t.pages=e.pages,t.total=e.total),t[t.type]=t[t.type].concat(i)})).finally((function(){t.done=!0,t.loading=!1}))}},search:function(){this.getData()},appendPage:function(){this.getData(++this.page,!0)},changePage:function(t){this.getData(t)},changeType:function(){this.page=1,this.getData()},insert:function(){this.dialogVisible=!1,this.$emit("insert",this.html)},transformData:function(t){return t.forEach((function(t){t.isSelected=!1})),t},selectCommon:function(t,e,n){this.resetItems(),e.isSelected=!0,this.html='<pre data-type="'.concat(t,'" data-id="').concat(e.id,'" class="e-jx3-resource">').concat(this.$refs[this.type][n]["innerHTML"],"</pre>")},selectItem:function(t,e){this.resetItems(),t.isSelected=!0,this.html='<a class="e-jx3-item e-jx3-item-q'.concat(t.Quality,'" data-id="').concat(t.id,'" data-quality="').concat(t.Quality,'" target="_blank" href="').concat(t.Link,'">[').concat(t.Name,"]</a>")},selectIcon:function(t){this.resetItems(),t.isSelected=!0,this.html='<img class="e-jx3-icon" src="'.concat(m["__iconPath"],"icon/").concat(t.iconID,'.png" alt="').concat(t.iconID,'"/>'),console.log(this.html)},resetItems:function(){var t=this[this.type];t.forEach((function(t){t.isSelected=!1}))},showIcon:function(t){return m["__iconPath"]+"icon/"+t+".png"},checkUA:function(){this.isPC=window.innerWidth>720}},filters:{filterRaw:function(t){return t&&t.replace(/\\n/g,"\n")},iconURL:function(t){return m["__iconPath"]+"icon/"+t+".png"}},created:function(){var t=this;this.checkUA(),nt().then((function(e){t.stat=e}))},components:{}},ot=st,lt=(n("d8ec"),Object(G["a"])(ot,Y,Z,!1,null,null,null)),ct=lt.exports,rt=m["__server"]+"upload/tinymce",ut={name:"Tinymce",props:["content","height","attachmentEnable","resourceEnable"],data:function(){return{data:this.content,init:{selector:"#tinymce",language:"zh_CN",convert_urls:!1,body_class:"c-article c-article-editor",height:this.height||800,autosave_ask_before_unload:!1,icons:"custom",menubar:!1,branding:!1,contextmenu:"",plugins:["link autolink","hr lists advlist table codeinline codesample checklist foldtext mathjax","image emoticons media videox macro qixue","autosave code fullscreen wordcount powerpaste pagebreak printpage"],toolbar:["undo | formatselect | fontsizeselect | forecolor backcolor | bold italic underline strikethrough superscript subscript | link unlink | restoredraft fullscreen code","removeformat | hr alignleft aligncenter alignright alignjustify indent outdent | bullist numlist checklist table blockquote foldtext codeinline codesample mathjax | emoticons image media videox | macro qixue pagebreak printpage"],mobile:{toolbar_drawer:!0,toolbar:["undo emoticons bold forecolor backcolor removeformat pagebreak fullscreen","hr alignleft aligncenter alignright alignjustify indent outdent bullist numlist checklist table blockquote codesample mathjax macro qixue media"]},block_formats:"段落=p;一级标题=h1;二级标题=h2;三级标题=h3;四级标题=h4;五级标题=h5;六级标题=h6;",fontsize_formats:"12px 14px 16px 18px 22px 24px 26px 28px 32px 48px 72px",color_map:["FF99CC","浅粉","FF3399","深粉","FF0000","正红","CC99FF","紫色","9933ff","深紫","FFFF99","浅黄","FFFF00","金黄","FFCC00","亮黄","FFCC99","浅桃","FF6600","橘色","CCFFCC","浅绿","9bf915","荧光绿","00FF00","辣眼绿","49c10f","深绿","008080","深青","CCFFFF","浅蓝","00FFFF","参考线","00CCFF","天蓝","99CCFF","蔚蓝","0000FF","辣眼蓝","CC0000","深红","000000","黑色"],mathjax:{lib:"https://oss.jx3box.com/static/tinymce/plugins/mathjax/tex-mml-chtml.js",className:"math-tex",configUrl:"https://oss.jx3box.com/static/tinymce/plugins/mathjax/config.js"},image_advtab:!0,file_picker_types:"file image",images_upload_url:rt,automatic_uploads:!0,images_upload_credentials:!0,setup:this.setup,init_instance_callback:this.ready}}},model:{prop:"content",event:"update"},watch:{data:function(t){this.$emit("update",t)},content:function(t){this.data=t}},methods:{setup:function(t){},ready:function(t){},insertAttachments:function(t){tinyMCE.editors["tinymce"].insertContent(t.html)},insertResource:function(t){tinyMCE.editors["tinymce"].insertContent(t)}},mounted:function(){},components:{Editor:A,Upload:W,Resource:ct}},pt=ut,dt=(n("f609"),Object(G["a"])(pt,v,b,!1,null,null,null)),ft=dt.exports,mt=n("ef77"),ht=n("d0a1"),gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-original"},[n("el-form-item",{attrs:{label:"原创"}},[n("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.original,callback:function(e){t.original=e},expression:"original"}})],1),t._t("default")],2)},vt=[],bt={name:"publish_original",props:["data"],data:function(){return{original:this.data}},model:{prop:"data",event:"update"},watch:{data:function(t){this.original=t},original:{deep:!0,handler:function(t){this.$emit("update",t)}}},computed:{},methods:{},mounted:function(){},components:{}},_t=bt,yt=Object(G["a"])(_t,gt,vt,!1,null,null,null),Ct=yt.exports,xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-client"},[n("el-form-item",{attrs:{label:"版本"}},[n("el-radio-group",{model:{value:t.client,callback:function(e){t.client=e},expression:"client"}},[n("el-radio",{attrs:{label:"std"}},[t._v("正式服")]),n("el-radio",{attrs:{label:"origin"}},[t._v("怀旧服")]),n("el-radio",{attrs:{label:"all"}},[t._v("全部")])],1)],1),t._t("default")],2)},kt=[],wt={name:"publish_client",props:["data"],data:function(){return{client:this.data}},model:{prop:"data",event:"update"},watch:{data:function(t){this.client=t},client:{deep:!0,handler:function(t){this.$emit("update",t)}}},computed:{},methods:{},mounted:function(){},components:{}},$t=wt,It=Object(G["a"])($t,xt,kt,!1,null,null,null),St=It.exports,Et={name:"boilerplate",components:{"publish-header":mt["a"],"publish-title":ht["a"],"publish-original":Ct,"publish-client":St,Tinymce:ft},props:["name","post","type"],data:function(){return{mode:this.post.post_mode||"tinymce"}},watch:{post:{deep:!0,handler:function(t){this.$store.state.post=t}}},methods:{publish:function(){this.$store.commit("changeStatus","publish"),this.$emit("publish"),this.$store.commit("startProcess")},draft:function(){this.$store.commit("changeStatus","draft"),this.$emit("draft"),this.$store.commit("startProcess")}},mounted:function(){this.$store.commit("changeType",this.type),this.$store.commit("changeSubtype",this.post.post_subtype)}},Dt=Et,zt=(n("85bc"),Object(G["a"])(Dt,h,g,!1,null,null,null)),jt=zt.exports,Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-lang"},[n("el-form-item",{attrs:{label:"语言"}},[n("el-radio-group",{model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}},[n("el-radio",{attrs:{label:"cn"}},[t._v("简体中文")]),n("el-radio",{attrs:{label:"tr"}},[t._v("繁體中文")])],1)],1),t._t("default")],2)},Ft=[],Lt={name:"publish_lang",props:["data"],data:function(){return{lang:this.data}},model:{prop:"data",event:"update"},watch:{data:function(t){this.lang=t},lang:{deep:!0,handler:function(t){this.$emit("update",t)}}},computed:{},methods:{},mounted:function(){},components:{}},Ot=Lt,Nt=Object(G["a"])(Ot,Mt,Ft,!1,null,null,null),Pt=Nt.exports,Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-zlp"},[n("el-form-item",{attrs:{label:"资料片"}},[n("el-select",{attrs:{filterable:"","allow-create":!0,placeholder:"请选择适应资料片"},model:{value:t.zlp,callback:function(e){t.zlp=e},expression:"zlp"}},t._l(t.zlps,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),t._t("default")],2)},qt=[],At=n("fc61"),Rt={name:"publish_zlp",props:["data","client"],data:function(){return{zlp:this.data,zlps:At["std"]}},model:{prop:"data",event:"update"},watch:{data:function(t){this.zlp=t},zlp:{deep:!0,handler:function(t){this.$emit("update",t)}},client:function(t){this.zlps=At[t]}},computed:{},methods:{},mounted:function(){},components:{}},Tt=Rt,Ut=Object(G["a"])(Tt,Bt,qt,!1,null,null,null),Vt=Ut.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-xf"},[n("el-form-item",{attrs:{label:"心法"}},t._l(t.xfmap,(function(e,i){return n("el-radio",{directives:[{name:"show",rawName:"v-show",value:e.client.includes(t.client),expression:"item.client.includes(client)"}],key:i,attrs:{label:e.name},model:{value:t.xf,callback:function(e){t.xf=e},expression:"xf"}},[n("img",{staticClass:"u-pic",attrs:{src:t._f("xficon")(e.id),alt:e.name}}),n("span",{staticClass:"u-txt"},[t._v(t._s(e.name))])])})),1),t._t("default")],2)},Jt=[],Kt=n("46d4"),Xt={name:"publish_xf",props:["data","client"],data:function(){return{xf:this.data,xfmap:Kt}},model:{prop:"data",event:"update"},watch:{data:function(t){this.xf=t},xf:{deep:!0,handler:function(t){this.$emit("update",t)}}},computed:{},methods:{},filters:{xficon:function(t){return m["__imgPath"]+"image/xf/"+t+".png"}},mounted:function(){},components:{}},Gt=Xt,Qt=Object(G["a"])(Gt,Ht,Jt,!1,null,null,null),Wt=Qt.exports,Yt=n("41cb");function Zt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.getFullYear(),a=t.getMonth()+1,s=t.getDate(),o=n?"".concat(i).concat(e).concat(te(a)).concat(e).concat(te(s)):"".concat(i).concat(e).concat(a).concat(e).concat(s);return o}function te(t){return t<10?"0"+t:t}var ee=Zt;function ne(t,e){var n=ie(t);return console.log("正在执行redis同步作业:",n),Object(Yt["d"])().post("/api/macro/publish",n)}function ie(t){var e=t.author,n=t.ID,i={author:e,user_id:~~t.post_author||0,post_id:n,post_status:t.post_status,data:{},lang:t.post_meta.lang,original:t.original},a=Kt[t.post_subtype]["id"]+"";return t.post_meta.data.forEach((function(t,s){var o="";o+="【奇穴】";var l="";try{l=t.talent&&JSON.parse(t.talent),o+=l.sq}catch(c){console.log("奇穴编码解析失败",c)}o+="\n【最后更新于】",o+=ee(new Date),o+="\n【来源】JX3BOX",t.name||(t.name=Date.now()),i.data[t.name]={author:e,key:t.name,version:Date.now(),icon:~~t.icon||13,xf:a||0,data:t.macro,desc:o,about:m["__Root"]+"macro/"+n}})),i}var ae={data:[{name:"",icon:13,talent:"",macro:"",speed:"",equip:"",equip_type:"jx3box",desc:""}]},se={name:"macro",components:{boilerplate:jt,"publish-lang":Pt,"publish-zlp":Vt,"publish-xf":Wt},props:[],data:function(){return{type:"macro",name:"云端宏",loaded:!1,options:{equip_types:{jx3box:"魔盒清单"}},meta:{},post:{ID:"",post_subtype:"通用",post_title:"",post_content:"",post_meta:ae,post_excerpt:"",post_mode:"tinymce",post_banner:"",post_status:"",post_collection:"",original:0,client:"std",lang:"cn",zlp:""},extend:{feedEnable:!1,followEnable:!1,tencentEnable:!1,weiboEnable:!1,tuilanEnable:!1},activeMacroIndex:"1",nickname:p["a"].getInfo().name}},computed:{},methods:{init:function(){var t=this;return this.doLoad(this).then((function(){f(t.post.post_meta)&&(t.post.post_meta=ae),console.log("Init Post:",t.post)}))},toPublish:function(){this.postData()},toDraft:function(){this.postData()},postData:function(){var t=this;this.check(),this.doPublish(this.build(),this,!1).then((function(e){ne(e.data.data,t).then((function(n){t.finish(e.data.msg,e.data.data.ID)}))}))},finish:function(t,e){var n=this;this.$message({message:t,type:"success"}),setTimeout((function(){location.href="/"+n.type+"/"+e}),500)},build:function(){var t=this.$store.state;return t.post.meta_1=t.post.post_meta.zlp,t.post.meta_2=~~o.a.get(xfmap[t.post.post_subtype],"id"),t.post.meta_4=t.post.post_meta.lang,t},addMacro:function(){if(this.post.post_meta.data.length>7)this.$alert("已经达到添加上限","消息",{confirmButtonText:"确定"});else{var t=this.post.post_meta.data.length+1+"";this.post.post_meta.data.push({name:"",icon:13,talent:"",macro:"",speed:"",equip:"",equip_type:"",desc:""}),this.activeMacroIndex=t}},removeMacro:function(t){var e=this;this.post.post_meta.data.length<2?this.$alert("必须保留1个宏","消息",{confirmButtonText:"确定"}):this.$alert("确定删除这个宏吗，删除后无法找回","消息",{confirmButtonText:"确定",callback:function(n){if("confirm"==n){var i=~~t-1;e.post.post_meta.data.splice(i,1),e.activeMacroIndex=i+""}}})},check:function(){this.post.post_title||(this.post.post_title=p["a"].getInfo().name+"的宏"),this.post.post_meta.data.forEach((function(t,e){t.name||(t.name="未标题-"+e)}))},checkDataName:function(t){var e=u(t.name).removeSpace().kill().toString();e?this.$set(t,"name",e):this.$notify.error({title:"错误",message:"宏名称不允许包含特殊字符,不能为空"})},checkTalent:function(t){try{JSON.parse(t.talent)}catch(e){this.$notify.error({title:"错误",message:"奇穴编码格式错误"})}},icon:function(t){var e=isNaN(t.icon)?13:~~t.icon;return e=Math.max(0,Math.min(e,3e4)),this.$set(t,"icon",e),m["__iconPath"]+"icon/"+e+".png"},changeSubtype:function(){var t=xfmap[this.post.post_subtype]["icon"];this.$set(this.post.post_meta.data[0],"icon",t)}},mounted:function(){this.init()}},oe=se,le=(n("1686"),Object(G["a"])(oe,i,a,!1,null,null,null));e["default"]=le.exports},a15b:function(t,e,n){"use strict";var i=n("23e7"),a=n("44ad"),s=n("fc6a"),o=n("a640"),l=[].join,c=a!=Object,r=o("join",",");i({target:"Array",proto:!0,forced:c||!r},{join:function(t){return l.call(s(this),void 0===t?",":t)}})},a640:function(t,e,n){"use strict";var i=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,n){var i=n("23e7"),a=n("7b0b"),s=n("df75"),o=n("d039"),l=o((function(){s(1)}));i({target:"Object",stat:!0,forced:l},{keys:function(t){return s(a(t))}})},c4a9:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a}));var i=function(){return"undefined"!==typeof window?window:t},a=function(){var t=i();return t&&t.tinymce?t.tinymce:null}}).call(this,n("c8ba"))},cbd7:function(t,e,n){},d0a1:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-title"},[n("el-divider",{attrs:{"content-position":"left"}},[t._v("标题")]),n("el-input",{attrs:{maxlength:50,minlength:2,"show-word-limit":"",required:"",placeholder:"请填写标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._t("default")],2)},a=[],s={name:"publish_title",props:["data"],data:function(){return{title:this.data}},model:{prop:"data",event:"update"},watch:{data:function(t){this.title=t},title:{deep:!0,handler:function(t){this.$emit("update",t)}}},computed:{},methods:{},mounted:function(){},components:{}},o=s,l=n("2877"),c=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=c.exports},d22a:function(t,e,n){},d8ec:function(t,e,n){"use strict";n("d22a")},df4f:function(t,e,n){"use strict";n("6487")},ef77:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-publish-header"},[n("el-page-header",{attrs:{content:t.name},on:{back:t.goBack}}),t._t("default")],2)},a=[],s={name:"publish_header",props:["name"],data:function(){return{}},computed:{},methods:{goBack:function(){this.$router.push("/")}},mounted:function(){},components:{}},o=s,l=n("2877"),c=Object(l["a"])(o,i,a,!1,null,null,null);e["a"]=c.exports},f609:function(t,e,n){"use strict";n("66ee")},fc61:function(t){t.exports=JSON.parse('{"std":["白帝风云","奉天证道","结庐在江湖","凌雪藏锋","怒海争锋","其它"],"origin":["物华天宝"],"all":["白帝风云","物华天宝","奉天证道","结庐在江湖","凌雪藏锋","怒海争锋","其它"]}')}}]);
//# sourceMappingURL=chunk-6685ef60.bbe6d6e9.js.map