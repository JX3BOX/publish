{"version":3,"sources":["webpack:///./src/service/namespace.js","webpack:///./src/bucket/namespace.vue?7226","webpack:///src/bucket/namespace.vue","webpack:///./src/bucket/namespace.vue?db95","webpack:///./src/bucket/namespace.vue","webpack:///./src/bucket/namespace.vue?0e18","webpack:///./src/utils/dateFormat.js"],"names":["getNamespace","params","$helper","method","url","createNamespace","data","$cms","post","updateNamespace","id","put","getNamespaceById","get","getNamespaceByKey","key","name","props","loading","list","statusmap","per","total","page","computed","user_id","this","uid","limit","$store","state","publishLink","methods","edit","location","href","type","teamid","loadData","mounted","filters","dateFormat","watch","deep","immediate","handler","components","component","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","staticClass","_v","attrs","_l","item","i","link","_s","class","status","_f","created","on","$event","ID","source_type","source_id","polish","val","dt","separator","polished","year","getFullYear","month","getMonth","date","getDate","str"],"mappings":"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","file":"js/chunk-0a4d64bb.62096c91.js","sourcesContent":["import { $helper } from '@jx3box/jx3box-common/js/https.js'\nimport { $cms } from '@jx3box/jx3box-common/js/https'\n\nfunction getNamespace(params) {\n  return $helper()({\n    method: 'GET',\n    url: `/api/my/namespaces`,\n    params: params,\n  })\n}\n\nfunction createNamespace(data) {\n  return $cms().post('/api/cms/namespace', data)\n}\n\nfunction updateNamespace(id, data) {\n  return $cms().put(`/api/cms/namespace/${id}`, data)\n}\n\nfunction getNamespaceById(id) {\n  return $cms().get(`/api/cms/namespace/${id}`)\n}\nfunction getNamespaceByKey(key) {\n  return $cms().get(`/api/cms/namespace-key`, {\n    params: {\n      key,\n    },\n  })\n}\n\nexport { getNamespace, getNamespaceByKey, getNamespaceById, createNamespace, updateNamespace }\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-dashboard m-dashboard-work m-dashboard-other\"},[_c('div',{staticClass:\"m-dashboard-work-header\"},[_c('h2',{staticClass:\"u-title\"},[_vm._v(\"我的铭牌\")]),_c('a',{staticClass:\"u-publish el-button el-button--primary el-button--small\",attrs:{\"href\":_vm.publishLink}},[_c('i',{staticClass:\"el-icon-document\"}),_vm._v(\" 创建铭牌 \")])]),_c('div',{staticClass:\"m-namespace-list\"},_vm._l((_vm.list),function(item,i){return _c('div',{key:i,staticClass:\"u-namespace-item\"},[_c('div',{staticClass:\"u-item\"},[_c('div',{staticClass:\"u-box\"},[_c('div',{staticClass:\"u-title\"},[_c('span',{staticClass:\"el-icon-postcard u-icon\"}),_vm._v(\" \"),_c('a',{staticClass:\"u-title\",attrs:{\"target\":\"_blank\",\"href\":item.link}},[_vm._v(_vm._s(item.key || '未知'))])]),_c('div',{staticClass:\"u-desc\"},[_c('span',{staticClass:\"u-status u-desc-subitem\"},[_vm._v(\" 状态: \"),_c('b',{class:(\"status\" + (item.status))},[_vm._v(_vm._s(_vm.statusmap[item.status]))])]),_c('time',{staticClass:\"u-time u-desc-subitem\"},[_vm._v(\"提交于: \"+_vm._s(_vm._f(\"dateFormat\")(item.created)))])])]),_c('el-button-group',{staticClass:\"u-action\"},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-edit\",\"title\":\"编辑\"},on:{\"click\":function($event){return _vm.edit(item.ID, item.source_type, item.source_id)}}})],1)],1)])}),0),_c('div',{staticClass:\"m-namespace-pages\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, prev, pager, next,jumper\",\"page-size\":_vm.per,\"total\":_vm.total,\"current-page\":_vm.page},on:{\"update:currentPage\":function($event){_vm.page=$event},\"update:current-page\":function($event){_vm.page=$event}}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"m-dashboard m-dashboard-work m-dashboard-other\" v-loading=\"loading\">\n    <div class=\"m-dashboard-work-header\">\n      <h2 class=\"u-title\">我的铭牌</h2>\n      <a :href=\"publishLink\" class=\"u-publish el-button el-button--primary el-button--small\"> <i class=\"el-icon-document\"></i> 创建铭牌 </a>\n    </div>\n    <div class=\"m-namespace-list\">\n      <div class=\"u-namespace-item\" v-for=\"(item, i) in list\" :key=\"i\">\n        <div class=\"u-item\">\n          <div class=\"u-box\">\n            <div class=\"u-title\">\n              <span class=\"el-icon-postcard u-icon\"></span> <a class=\"u-title\" target=\"_blank\" :href=\"item.link\">{{ item.key || '未知' }}</a>\n            </div>\n            <div class=\"u-desc\">\n              <span class=\"u-status u-desc-subitem\">\n                状态:\n                <b :class=\"`status${item.status}`\">{{ statusmap[item.status] }}</b>\n              </span>\n              <time class=\"u-time u-desc-subitem\">提交于: {{ item.created | dateFormat }}</time>\n            </div>\n          </div>\n          <el-button-group class=\"u-action\">\n            <el-button size=\"mini\" icon=\"el-icon-edit\" title=\"编辑\" @click=\"edit(item.ID, item.source_type, item.source_id)\"></el-button>\n          </el-button-group>\n        </div>\n      </div>\n    </div>\n    <div class=\"m-namespace-pages\">\n      <el-pagination background layout=\"total, prev, pager, next,jumper\" :page-size=\"per\" :total=\"total\" :current-page.sync=\"page\"> </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getNamespace } from '@/service/namespace'\nimport { getLink } from '@jx3box/jx3box-common/js/utils'\nimport dateFormat from '@/utils/dateFormat'\nconst statusmap = {\n  '0': '待审核',\n  '1': '正常启用',\n  '2': '未通过审核',\n}\nexport default {\n  name: 'namespace',\n  props: ['data'],\n  data: function() {\n    return {\n      loading: false,\n      list: [],\n      statusmap,\n      per: 16,\n      total: 1,\n      page: 1,\n    }\n  },\n  computed: {\n    params: function() {\n      return {\n        user_id: this.uid,\n        page: this.page,\n        limit: this.per,\n      }\n    },\n    uid: function() {\n      return this.$store.state.uid\n    },\n    publishLink: function() {\n      return './#/' + 'namespace'\n    },\n  },\n  methods: {\n    edit: function(id, type, teamid) {\n      if (type == 'team') {\n        location.href = '/team/org/edit/' + teamid + '?tab=other'\n        return\n      }\n      location.href = './#/namespace/' + id\n    },\n    loadData: function() {\n      getNamespace(this.params)\n        .then((res) => {\n          this.list = res.data.data.data\n          this.total = res.data.data.total\n        })\n        .finally(() => {\n          this.loading = false\n        })\n    },\n  },\n  mounted: function() {\n    this.loading = true\n    this.loadData()\n  },\n  filters: {\n    dateFormat: function(val) {\n      return dateFormat(new Date(~~val * 1000))\n    },\n  },\n  watch: {\n    params: {\n      deep: true,\n      immediate: true,\n      handler: function() {\n        this.loadData()\n      },\n    },\n  },\n  components: {},\n}\n</script>\n\n<style scoped lang=\"less\">\n@import '../assets/css/work.less';\n@import '../assets/css/namespace.less';\n.m-namespace-list {\n  .mt(20px);\n  .u-desc {\n    .status0 {\n      color: #fba524;\n    }\n    .status1 {\n      color: #49c10f;\n    }\n    .status2 {\n      color: #fc3c3c;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./namespace.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./namespace.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./namespace.vue?vue&type=template&id=363185d3&scoped=true&\"\nimport script from \"./namespace.vue?vue&type=script&lang=js&\"\nexport * from \"./namespace.vue?vue&type=script&lang=js&\"\nimport style0 from \"./namespace.vue?vue&type=style&index=0&id=363185d3&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"363185d3\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./namespace.vue?vue&type=style&index=0&id=363185d3&scoped=true&lang=less&\"","/**\n * 简单的日期格式化\n *\n * @param {*} dt Date实例\n * @param {object} opt polished:是否补齐两位,separator:连接分隔符\n */\nfunction dateFormat(dt,separator='-',polished=true){\n    let year = dt.getFullYear()\n    let month = dt.getMonth() + 1\n    let date = dt.getDate()\n    let str = polished ? \n        `${year}${separator}${polish(month)}${separator}${polish(date)}` :\n        `${year}${separator}${month}${separator}${date}`\n    return str\n}\n\nfunction polish(val){\n    return val<10 ? ('0' + val) : val\n}\n\nexport default dateFormat\n"],"sourceRoot":""}