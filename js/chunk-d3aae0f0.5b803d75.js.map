{"version":3,"sources":["webpack:///./src/post/emotion.vue?d74f","webpack:///./src/service/pvx.js","webpack:///./src/components/publish_header.vue?4ca5","webpack:///./src/components/publish_header.vue?594e","webpack:///src/components/publish_header.vue","webpack:///./src/components/publish_header.vue","webpack:///./src/post/emotion.vue?35a7","webpack:///./src/post/emotion.vue?9ca7","webpack:///src/post/emotion.vue","webpack:///./src/post/emotion.vue"],"names":["postEmotions","data","$cms","post","updateEmotion","id","put","getEmotion","get","getMyEmotions","params","deleteEmotion","delete","getMyJokes","deleteJoke","component","_h","this","$createElement","_c","_self","staticClass","attrs","name","on","goBack","_t","_vm","directives","rawName","value","expression","_f","url","$event","previewHandle","model","callback","$$v","$set","_n","processing","update","_v","supportTypes","updateFileList","list","length","_l","item","i","key","_s","deleteHandle","slot","original","_e","publish","dialogVisible","dialogImageUrl"],"mappings":"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","file":"js/chunk-d3aae0f0.5b803d75.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./emotion.vue?vue&type=style&index=0&lang=less&\"","import { $cms, $next } from \"@jx3box/jx3box-common/js/https\";\n\n// 表情栏目接口\nfunction postEmotions(data) {\n    return $cms().post(\"/api/cms/post/emotion\", data);\n}\n\nfunction updateEmotion(id, data) {\n    return $cms().put(`/api/cms/post/emotion/${id}`, data);\n}\n\nfunction getEmotion(id) {\n    return $cms().get(`/api/cms/post/emotion/${id}`);\n}\nfunction getMyEmotions(params) {\n    return $cms().get(`/api/cms/post/emotions/my`, {\n        params,\n    });\n}\nfunction deleteEmotion(id) {\n    return $cms().delete(`/api/cms/post/emotion/${id}`);\n}\n\n// 骚话栏目接口\nfunction postJoke(data) {}\nfunction updateJoke(id, data) {}\nfunction getJoke(id) {\n    return $cms().get(`/api/cms/post/joke/${id}`);\n}\nfunction getMyJokes(params) {\n    return $cms().get(`/api/cms/post/jokes/my`, {\n        params,\n    });\n}\nfunction deleteJoke(id) {\n    return $cms().delete(`/api/cms/post/joke/${id}`);\n}\n\nexport { postEmotions, getEmotion, updateEmotion, getMyEmotions, deleteEmotion, postJoke, updateJoke, getJoke, getMyJokes, deleteJoke };\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-publish-header\"},[_c('el-page-header',{attrs:{\"content\":_vm.name},on:{\"back\":_vm.goBack}}),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"m-publish-header\">\n        <el-page-header @back=\"goBack\" :content=\"name\"></el-page-header>\n        <slot></slot>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    name: \"publish_header\",\n    props: [\"name\"],\n    data: function() {\n        return {\n        };\n    },\n    computed: {},\n    methods: {\n        goBack: function() {\n            this.$router.push(\"/\");\n        },\n    },\n    mounted: function() {},\n    components: {},\n};\n</script>\n","import { render, staticRenderFns } from \"./publish_header.vue?vue&type=template&id=c15eddea&\"\nimport script from \"./publish_header.vue?vue&type=script&lang=js&\"\nexport * from \"./publish_header.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-publish-box m-publish-box-emotion\"},[_c('publish-header',{attrs:{\"name\":\"剑三表情\"}}),_c('el-form',{attrs:{\"label-position\":\"left\",\"label-width\":\"80px\"}},[(_vm.id)?_c('div',{staticClass:\"m-publish-emotion m-publish-emotion-edit\"},[_c('el-form-item',{attrs:{\"label\":\"图片\"}},[_c('div',{staticClass:\"u-pic\"},[_c('img',{staticClass:\"u-img\",attrs:{\"src\":_vm._f(\"showThumbnail\")(_vm.data.url)}}),_c('i',{staticClass:\"u-mask\"}),_c('i',{staticClass:\"u-preview\",on:{\"click\":function($event){return _vm.previewHandle(_vm.data)}}},[_c('i',{staticClass:\"el-icon-zoom-in\"})])])]),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"placeholder\":\"图片说明\"},model:{value:(_vm.data.desc),callback:function ($$v) {_vm.$set(_vm.data, \"desc\", $$v)},expression:\"data.desc\"}})],1),_c('el-form-item',{attrs:{\"label\":\"原创\"}},[_c('el-switch',{attrs:{\"active-value\":1,\"inactive-value\":0},model:{value:(_vm.data.original),callback:function ($$v) {_vm.$set(_vm.data, \"original\", _vm._n($$v))},expression:\"data.original\"}})],1),_c('el-form-item',{attrs:{\"label\":\"原作者\"}},[_c('el-input',{attrs:{\"placeholder\":\"（非必填）\"},model:{value:(_vm.data.author),callback:function ($$v) {_vm.$set(_vm.data, \"author\", $$v)},expression:\"data.author\"}})],1),_c('div',{staticClass:\"m-publish-buttons\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.processing},on:{\"click\":_vm.update}},[_vm._v(\"更    新\")])],1)],1):_c('div',{staticClass:\"m-publish-emotion m-publish-emotion-create\"},[_c('div',{staticClass:\"m-publish-emotion-bulk\"},[_c('h1',{staticClass:\"u-title\"},[_vm._v(\"上传表情\")]),_c('UploadImages',{attrs:{\"text\":\"批量上传图片\",\"onlyImage\":true,\"desc\":\"一次最多同时上传10个文件（不超过5M）\",\"accept\":_vm.supportTypes},on:{\"insert\":_vm.updateFileList}})],1),(_vm.list && _vm.list.length)?_c('div',{staticClass:\"m-publish-emotion-list\"},[_c('div',{staticClass:\"u-list\"},_vm._l((_vm.list),function(item,i){return _c('div',{key:i,staticClass:\"u-item\"},[_c('div',{staticClass:\"u-div\"},[_c('i',{staticClass:\"u-order\"},[_vm._v(_vm._s(i + 1))]),_c('div',{staticClass:\"u-op\"},[_c('el-button',{staticClass:\"u-delete\",attrs:{\"icon\":\"el-icon-delete\",\"type\":\"info\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteHandle(i)}}},[_vm._v(\"删除\")])],1)]),_c('div',{staticClass:\"u-pic\"},[_c('img',{staticClass:\"u-img\",attrs:{\"src\":_vm._f(\"showThumbnail\")(item.url)}}),_c('i',{staticClass:\"u-mask\"}),_c('i',{staticClass:\"u-preview\",on:{\"click\":function($event){return _vm.previewHandle(item)}}},[_c('i',{staticClass:\"el-icon-zoom-in\"})])]),_c('div',{staticClass:\"u-desc\"},[_c('el-input',{attrs:{\"placeholder\":\"图片说明\"},model:{value:(item.desc),callback:function ($$v) {_vm.$set(item, \"desc\", $$v)},expression:\"item.desc\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"描述\")])])],1),_c('div',{staticClass:\"u-extend\"},[_c('el-switch',{attrs:{\"inactive-text\":\"原创\",\"active-value\":1,\"inactive-value\":0},model:{value:(item.original),callback:function ($$v) {_vm.$set(item, \"original\", _vm._n($$v))},expression:\"item.original\"}}),(!item.original)?_c('el-input',{staticClass:\"u-author\",attrs:{\"placeholder\":\"（非必填）\",\"size\":\"mini\"},model:{value:(item.author),callback:function ($$v) {_vm.$set(item, \"author\", $$v)},expression:\"item.author\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"原作者\")])]):_vm._e()],1)])}),0),_c('div',{staticClass:\"m-publish-buttons\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.processing},on:{\"click\":_vm.publish}},[_vm._v(\"发    布\")])],1)]):_vm._e(),_c('el-dialog',{staticClass:\"m-publish-emotion-preview\",attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./emotion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./emotion.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"m-publish-box m-publish-box-emotion\" v-loading=\"loading\">\n        <!-- 头部 -->\n        <publish-header name=\"剑三表情\"></publish-header>\n\n        <el-form label-position=\"left\" label-width=\"80px\">\n            <!-- 编辑 -->\n            <div class=\"m-publish-emotion m-publish-emotion-edit\" v-if=\"id\">\n                <el-form-item label=\"图片\">\n                    <div class=\"u-pic\">\n                        <img class=\"u-img\" :src=\"data.url | showThumbnail\" />\n                        <i class=\"u-mask\"></i>\n                        <i class=\"u-preview\" @click=\"previewHandle(data)\">\n                            <i class=\"el-icon-zoom-in\"></i>\n                        </i>\n                        <!-- TODO:替换图片 -->\n                    </div>\n                </el-form-item>\n                <el-form-item label=\"描述\">\n                    <el-input v-model=\"data.desc\" placeholder=\"图片说明\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"原创\">\n                    <el-switch v-model.number=\"data.original\" :active-value=\"1\" :inactive-value=\"0\"></el-switch>\n                </el-form-item>\n                <el-form-item label=\"原作者\">\n                    <el-input v-model=\"data.author\" placeholder=\"（非必填）\"></el-input>\n                </el-form-item>\n                <!-- 按钮 -->\n                <div class=\"m-publish-buttons\">\n                    <el-button\n                        type=\"primary\"\n                        @click=\"update\"\n                        :disabled=\"processing\"\n                    >更 &nbsp;&nbsp; 新</el-button>\n                </div>\n            </div>\n\n            <!-- 新建 -->\n            <div class=\"m-publish-emotion m-publish-emotion-create\" v-else>\n                <!-- 上传 -->\n                <div class=\"m-publish-emotion-bulk\">\n                    <h1 class=\"u-title\">上传表情</h1>\n                    <UploadImages\n                        @insert=\"updateFileList\"\n                        text=\"批量上传图片\"\n                        :onlyImage=\"true\"\n                        desc=\"一次最多同时上传10个文件（不超过5M）\"\n                        :accept=\"supportTypes\"\n                    />\n                </div>\n\n                <!-- 列表 -->\n                <div class=\"m-publish-emotion-list\" v-if=\"list && list.length\">\n                    <div class=\"u-list\">\n                        <div class=\"u-item\" v-for=\"(item,i) in list\" :key=\"i\">\n                            <div class=\"u-div\">\n                                <i class=\"u-order\">{{i + 1}}</i>\n                                <div class=\"u-op\">\n                                    <el-button\n                                        class=\"u-delete\"\n                                        icon=\"el-icon-delete\"\n                                        @click=\"deleteHandle(i)\"\n                                        type=\"info\"\n                                        size=\"mini\"\n                                    >删除</el-button>\n                                </div>\n                            </div>\n                            <div class=\"u-pic\">\n                                <img class=\"u-img\" :src=\"item.url | showThumbnail\" />\n                                <i class=\"u-mask\"></i>\n                                <i class=\"u-preview\" @click=\"previewHandle(item)\">\n                                    <i class=\"el-icon-zoom-in\"></i>\n                                </i>\n                            </div>\n                            <div class=\"u-desc\">\n                                <el-input v-model=\"item.desc\" placeholder=\"图片说明\">\n                                    <span slot=\"prepend\">描述</span>\n                                </el-input>\n                            </div>\n                            <div class=\"u-extend\">\n                                <el-switch\n                                    v-model.number=\"item.original\"\n                                    inactive-text=\"原创\"\n                                    :active-value=\"1\"\n                                    :inactive-value=\"0\"\n                                ></el-switch>\n                                <el-input\n                                    class=\"u-author\"\n                                    v-model=\"item.author\"\n                                    placeholder=\"（非必填）\"\n                                    v-if=\"!item.original\"\n                                    size=\"mini\"\n                                >\n                                    <span slot=\"prepend\">原作者</span>\n                                </el-input>\n                            </div>\n                        </div>\n                    </div>\n                    <!-- 按钮 -->\n                    <div class=\"m-publish-buttons\">\n                        <el-button\n                            type=\"primary\"\n                            @click=\"publish\"\n                            :disabled=\"processing\"\n                        >发 &nbsp;&nbsp; 布</el-button>\n                    </div>\n                </div>\n\n                <!-- 预览 -->\n                <el-dialog class=\"m-publish-emotion-preview\" :visible.sync=\"dialogVisible\">\n                    <img width=\"100%\" :src=\"dialogImageUrl\" alt />\n                </el-dialog>\n            </div>\n        </el-form>\n    </div>\n</template>\n\n<script>\n// 公共模块\nimport { getLink, getThumbnail } from \"@jx3box/jx3box-common/js/utils\";\n\n// 本地模块\nimport publish_header from \"@/components/publish_header.vue\";\nimport UploadImages from \"@jx3box/jx3box-editor/src/Upload.vue\";\n\n// 数据逻辑\nimport { postEmotions, getEmotion, updateEmotion } from \"@/service/pvx.js\";\n\nexport default {\n    name: \"emotion\",\n    components: {\n        UploadImages,\n        \"publish-header\": publish_header,\n    },\n    data: function () {\n        return {\n            // 加载状态\n            loading: false,\n            // 发布状态\n            processing: false,\n\n            // 图片类型\n            supportTypes:\n                \"image/png, image/jpeg, image/gif, image/bmp, image/webp\",\n\n            // 图片列表\n            list: [\n                // {\n                //     desc: \"test\",\n                //     url: \"https://console.cnyixun.com/2019/09/logo.png\",\n                //     original: 0,\n                //     author: \"\",\n                // },\n                // {\n                //     desc: \"test\",\n                //     url: \"https://console.cnyixun.com/2019/09/logo.png\",\n                //     original: 0,\n                //     author: \"\",\n                // },\n            ],\n            data: {\n                // desc: \"test\",\n                // url: \"https://console.cnyixun.com/2019/09/logo.png\",\n                // original: 0,\n                // author: \"111\",\n            },\n\n            // 预览\n            dialogImageUrl: \"\",\n            dialogVisible: false,\n        };\n    },\n    computed: {\n        id: function () {\n            return ~~this.$route.params.id;\n        },\n    },\n    methods: {\n        // 加载\n        init: function () {\n            this.loading = true;\n            getEmotion(this.id)\n                .then((res) => {\n                    this.data = res?.data?.data;\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        // 批量上传成功\n        updateFileList: function (data) {\n            let upload_list = data.list;\n            let img_list = [];\n            upload_list.forEach((item) => {\n                if (item.is_img) {\n                    img_list.push({\n                        desc: item.name,\n                        url: item.url,\n                        original: 0,\n                        author: \"\",\n                    });\n                }\n            });\n            this.list = this.list.concat(img_list);\n        },\n        // 预览\n        previewHandle: function (item) {\n            this.dialogImageUrl = item.url;\n            this.dialogVisible = true;\n        },\n        // 删除\n        deleteHandle: function (i) {\n            this.list.splice(i, 1);\n        },\n        // 发布\n        publish: function () {\n            this.processing = true;\n            postEmotions(this.list).then((res) => {\n                this.$message({\n                    message: \"发布成功\",\n                    type: \"success\",\n                });\n                // 跳转\n                setTimeout(() => {\n                    location.href = getLink(\"emotion\");\n                }, 500);\n            }).finally(() => {\n                this.processing = false\n            })\n        },\n        // 更新\n        update: function () {\n            this.processing = true;\n            updateEmotion(this.id, this.data).then((res) => {\n                this.$message({\n                    message: \"更新成功\",\n                    type: \"success\",\n                });\n                // 跳转\n                setTimeout(() => {\n                    location.href = getLink(\"emotion\", this.id);\n                }, 500);\n            }).finally(() => {\n                this.processing = false\n            })\n        },\n    },\n    watch: {\n        \"$route.params.id\": {\n            immediate: true,\n            handler: function (val) {\n                val && this.init();\n            },\n        },\n    },\n    filters: {\n        showThumbnail: function (val) {\n            return getThumbnail(val, 146);\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/emotion.less\";\n</style>\n","import { render, staticRenderFns } from \"./emotion.vue?vue&type=template&id=290c7fb8&\"\nimport script from \"./emotion.vue?vue&type=script&lang=js&\"\nexport * from \"./emotion.vue?vue&type=script&lang=js&\"\nimport style0 from \"./emotion.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}