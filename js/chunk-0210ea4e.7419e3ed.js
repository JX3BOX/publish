(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0210ea4e"],{"024d":function(t,e,a){"use strict";a.r(e);var n,i=a("1da1"),s=(a("99af"),a("a434"),a("96cf"),{name:"draft",props:[],components:{},data:function(){return{data:[]}},computed:{isSupported:function(){return!!window.localStorage},isNotNull:function(){return!!this.data&&!!this.data.length},isWeb:function(t){return"web"===t.activeName},db:function(){return this.$store.state.db}},methods:{loadDrafts:(n=Object(i.a)(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db.length();case 2:e=t.sent,a=0;case 4:if(!(a<e)){t.next=18;break}return t.next=7,this.db.key(a);case 7:return n=t.sent,t.t0=this.data,t.t1=n,t.next=12,this.db.getItem(n);case 12:t.t2=t.sent,t.t3={key:t.t1,data:t.t2},t.t0.push.call(t.t0,t.t3);case 15:a++,t.next=4;break;case 18:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)}),clean:function(){var t=this;this.$alert("此操作不可逆！请谨慎操作！","警告",{confirmButtonText:"确定清空",callback:function(e){t.db.clear(),t.data=[],t.$notify({title:"清空成功",type:"success",message:"本地草稿清空成功"})}})},preview:function(t){this.$router.push("/".concat(t.data.post_type,"/").concat(t.data.ID,"?mode=draft&key=").concat(t.key))},del:function(t,e){var a=this;this.db.removeItem(t.key).then((function(){a.data.splice(e,1)}))},onCopy:function(t){this.$notify({title:"复制成功",message:"草稿源码复制成功",type:"success"})},onError:function(){this.$notify.error({title:"复制失败",message:"请手动复制"})}},filters:{itemName:function(t){return t.data.post_title||"".concat(t.key,"(无标题)")}},created:function(){this.loadDrafts()},mounted:function(){}}),c=(a("aaa6"),a("2877")),r=Object(c.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-publish m-draft"},[a("div",{staticClass:"m-draft-header"},[t._m(0),a("div",{staticClass:"u-op"},[a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"small",disabled:!t.isNotNull},on:{click:t.clean}},[t._v("清空")])],1)]),t.isSupported?[a("div",{staticClass:"m-draft-warning"},[a("el-alert",{attrs:{title:"以下草稿为编辑器为该浏览器产生的临时本地草稿HTML源码，并不存在于服务器中，仅用于断网或窗口异常关闭时恢复。",type:"warning","show-icon":""}})],1),t.isNotNull?a("div",{staticClass:"m-draft-list"},[a("ul",{staticClass:"u-list"},t._l(t.data,(function(e,n){return a("li",{key:n,staticClass:"u-item"},[a("div",{staticClass:"u-label",class:{on:!!e.active}},[a("i",{staticClass:"u-item-icon",class:e.active?"el-icon-folder-opened":"el-icon-folder"}),a("span",{staticClass:"u-item-key"},[t._v(t._s(t._f("itemName")(e)))]),a("div",{staticClass:"u-op"},[a("el-button",{staticClass:"u-delete",attrs:{type:"info",icon:"el-icon-view",size:"mini"},on:{click:function(a){return a.stopPropagation(),t.preview(e)}}},[t._v("预览")]),a("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(a){return t.del(e,n)}}},[a("el-button",{staticClass:"u-delete",attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){t.stopPropagation()}},slot:"reference"},[t._v("删除")])],1)],1)])])})),0)]):a("div",{staticClass:"m-draft-null"},[a("i",{staticClass:"el-icon-warning-outline"}),t._v(" 暂无任何内容 ")])]:[a("el-alert",{attrs:{title:"您的浏览器太旧了，不支持本功能。",type:"error","show-icon":""}})]],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"m-title"},[e("i",{staticClass:"el-icon-receiving"}),this._v(" 草稿箱 "),e("a",{staticClass:"u-help",attrs:{href:"/tool/21933",target:"_blank"}},[e("i",{staticClass:"el-icon-question"}),this._v(" 使用帮助 ")])])}],!1,null,null,null);e.default=r.exports},"402b":function(t,e,a){},aaa6:function(t,e,a){"use strict";a("402b")}}]);
//# sourceMappingURL=chunk-0210ea4e.7419e3ed.js.map