(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7084be34"],{"11ed":function(t,e,n){},"18db":function(t,e,n){},"263c":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return r}));n("99af");var i=n("41cb"),a=function(t,e){return Object(i.a)().post("/api/cms/post/".concat(t,"/revision"),e)},o=function(t,e){return Object(i.a)().get("/api/cms/post/".concat(t,"/revision/").concat(e))},s=function(t,e){return Object(i.a)().get("/api/cms/post/".concat(t,"/revisions"),{params:e})},c=function(t,e,n){return Object(i.a)().put("/api/cms/post/".concat(t,"/revision/").concat(e),n)},r=function(t,e){return Object(i.a)().delete("/api/cms/post/".concat(t,"/revision/").concat(e))},l=function(t,e){return Object(i.a)().delete("/api/cms/post/".concat(t,"/revisions?list=").concat(e))}},"2cf3":function(t,e,n){"use strict";n("3cd9")},3779:function(t,e,n){},"3c49":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("c7eb"),a=n("1da1"),o=(n("b64b"),n("99af"),n("41cb"));var s,c=n("c9d2"),r={data:function(){return{isSuperAuthor:!1}},computed:{userInfo:function(){return c.a.getInfo()}},mounted:function(){var t=this;return Object(a.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.isSuperAuthor();case 2:t.isSuperAuthor=e.sent;case 3:case"end":return e.stop()}}),e)})))()},methods:{atUser:(s=Object(a.a)(Object(i.a)().mark((function t(e){var n;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=sessionStorage.getItem("atAuthor"))){t.next=6;break}return t.next=5,i={sendUserId:this.userInfo.uid,accessUserId:JSON.parse(n),postId:e||this.id,postType:this.post_type||this.post.post_type},a=void 0,s=void 0,c=void 0,r=void 0,a=i.sendUserId,s=i.accessUserId,c=i.postId,r=i.postType,Object(o.e)({mute:!0}).get("/api/horn/".concat(a,"/to/user/article/").concat(r,"/").concat(c),{params:{accessUserId:s}});case 5:sessionStorage.removeItem("atAuthor");case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var i,a,s,c,r}),t,this,[[0,8]])}))),function(t){return s.apply(this,arguments)})}}},"3cd9":function(t,e,n){},"3efa":function(t,e,n){"use strict";n("11ed")},"41de":function(t,e,n){"use strict";n("99af"),n("4de4"),n("a15b"),n("d81d"),n("14d9"),n("fb6a"),n("b0c0"),n("a9e3"),n("d3b7");var i=n("263c"),a=n("e4f1"),o={name:"publish_revision",props:{postId:{type:[String,Number],default:0},visible:{type:Boolean,default:!0},enable:{type:Boolean,default:!1}},data:function(){return{show:!1,data:[],per:10,page:1,total:0,loading:!1,checked:[],checkedAll:!1,isIndeterminate:!1}},computed:{params:function(){return{page:this.page,per:this.per}},isPostMode:function(){return!this.$route.query.mode||"default"==this.$route.query.mode},ready:function(){return this.enable&&this.postId&&this.isPostMode}},filters:{revisionName:function(t){return"版本".concat(t.version)},formatDate:function(t){return Object(a.c)(new Date(t))}},methods:{formatRemark:function(t){return(null==t?void 0:t.length)>10?t.slice(0,10)+"..":t},view:function(){this.postId&&(this.show=!0,this.loadList())},loadList:function(){var t=this;this.loading=!0,Object(i.c)(this.postId,this.params).then((function(e){t.data=e.data.data.list.map((function(e){return t.$set(e,"checked",!1),e})),t.page=e.data.data.page,t.per=e.data.data.per,t.total=e.data.data.total})).finally((function(){t.loading=!1}))},remark:function(t){var e=this;this.$prompt("请输入备注","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,inputValue:t.remark||""}).then((function(n){var a=n.value;Object(i.d)(e.postId,t.id,{remark:a}).then((function(){return e.$message.success("备注添加成功"),t.remark=a,!0})).catch((function(){return!1}))}))},checkChange:function(t,e){t?this.checked.push(e.id):this.checked=this.checked.filter((function(t){return t!==e.id})),this.checkedAll=this.checked.length===this.data.length},checkAll:function(t){t?(this.checked=this.data.map((function(t){return t.id})),this.data.map((function(t){return t.checked=!0,t}))):(this.checked=[],this.data.map((function(t){return t.checked=!1,t}))),this.isIndeterminate=!1,console.log(this.checked)},use:function(t){var e=this.$route.name;this.$router.push("/".concat(e,"/").concat(t.post_id,"/?mode=revision&id=").concat(t.id))},del:function(t){var e=this;this.$confirm("确认删除【版本-".concat(t.version,"】吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i.e)(e.postId,t.id).then((function(){e.$notify({type:"success",title:"成功",message:"历史版本删除成功"}),e.loadList()}))}))},delRevisions:function(){var t=this;this.$confirm("确认删除选中的历史版本？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.checked.join(",");Object(i.f)(t.postId,e).then((function(){t.$notify({type:"success",title:"成功",message:"历史版本删除成功"}),t.checkedAll=!1,t.checked=[],1===t.page?t.loadList():t.page=1}))}))}},watch:{params:{deep:!0,handler:function(){this.loadList()}}}},s=(n("3efa"),n("2877")),c=Object(s.a)(o,(function(){var t=this,e=t._self._c;return t.ready?e("div",{staticClass:"m-revision"},[e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-folder"},on:{click:t.view}},[t._v("历史版本")]),e("el-drawer",{staticClass:"m-revision-drawer",attrs:{title:"历史版本",visible:t.show,"z-index":"2100","append-to-body":""},on:{"update:visible":function(e){t.show=e}}},[e("h3",{staticClass:"u-revision-title",attrs:{slot:"title"},slot:"title"},[t._v("历史版本")]),e("main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-revision-container"},[e("div",{staticClass:"u-actions"},[e("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.checkAll},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v("全选")]),e("el-button",{staticClass:"u-empty",attrs:{size:"mini",plain:"",icon:"el-icon-delete",disabled:!t.checked||!t.checked.length},on:{click:t.delRevisions}},[t._v("批量删除")])],1),e("div",{staticClass:"m-revision-list"},[t.data&&t.data.length?e("ul",{staticClass:"u-list"},[t._l(t.data,(function(n,i){return e("li",{key:i,staticClass:"m-revision-item"},[e("span",{staticClass:"u-name"},[e("el-checkbox",{staticClass:"u-checkbox",on:{change:function(e){return t.checkChange(e,n)}},model:{value:n.checked,callback:function(e){t.$set(n,"checked",e)},expression:"item.checked"}}),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.remark,placement:"top",disabled:!n.remark}},[e("span",[e("i",{staticClass:"u-icon el-icon-tickets"}),e("span",{staticClass:"u-remark"},[t._v(t._s(n.remark?t.formatRemark(n.remark):n.post_title))])])]),e("em",{staticClass:"u-time"},[t._v(t._s(t._f("formatDate")(n.updated_at)))]),n.user_info?e("span",{staticClass:"u-creator",attrs:{title:"创建人"}},[t._v(t._s(n.user_info.display_name))]):t._e(),e("i",{staticClass:"u-edit el-icon-edit",attrs:{title:"添加备注"},on:{click:function(e){return t.remark(n)}}})],1),e("el-button-group",[e("el-button",{attrs:{size:"mini",icon:"el-icon-view",title:"预览"},on:{click:function(e){return t.use(n)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete",title:"删除"},on:{click:function(e){return t.del(n)}}})],1)],1)})),e("el-pagination",{staticClass:"u-pagination",attrs:{background:"","hide-on-single-page":"",layout:"prev,pager,next,->,total",total:t.total,"page-size":t.per,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],2):e("el-alert",{staticClass:"u-null",attrs:{title:"当前没有任何历史版本",type:"info","show-icon":""}})],1)])])],1):t._e()}),[],!1,null,null,null);e.a=c.exports},4905:function(t,e,n){},5614:function(t,e,n){"use strict";n("4905")},6851:function(t,e,n){"use strict";n("3779")},"6c2b":function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"c",(function(){return l}));n("99af");var i=n("41cb");function a(t){return Object(i.a)()({method:"GET",url:"/api/cms/post/collection/mine",params:t})}function o(t){return Object(i.a)().post("/api/cms/post/collection",t)}function s(t,e){return Object(i.a)().put("/api/cms/post/collection/".concat(t),e)}function c(t){return Object(i.a)().delete("/api/cms/post/collection/".concat(t))}function r(t){return Object(i.a)().post("/api/cms/post/".concat(t.post_type,"-").concat(t.post_id,"/append-to-collection/").concat(t.post_collection),{title:t.post_title})}function l(t){return Object(i.a)()({method:"GET",url:"/api/cms/post/collection/".concat(t,"/raw")})}},"81fc":function(t,e,n){"use strict";n.d(e,"j",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return c})),n.d(e,"i",(function(){return r})),n.d(e,"k",(function(){return o})),n.d(e,"h",(function(){return u})),n.d(e,"g",(function(){return d})),n.d(e,"c",(function(){return p})),n.d(e,"l",(function(){return h})),n.d(e,"e",(function(){return m})),n.d(e,"b",(function(){return f}));n("99af");var i=n("41cb");function a(t){return Object(i.c)().post("".concat("/api/next2","/community/discussion/topic"),t)}function o(t,e){return Object(i.c)().put("".concat("/api/next2","/community/discussion/my/topic/item/").concat(t),e)}function s(t){return Object(i.c)().get("".concat("/api/next2","/community/discussion/my/topic/list"),{params:t})}function c(t){return Object(i.c)().delete("".concat("/api/next2","/community/discussion/my/topic/item/").concat(t))}function r(t){return Object(i.c)().get("".concat("/api/next2","/community/discussion/my/topic/item/").concat(t))}function l(t){return Object(i.c)().get("".concat("/api/next2","/community/discussion/topic/list"),{params:t})}function u(t){return Object(i.c)().get("".concat("/api/next2","/community/discussion/my/reply/list"),{params:t})}function d(t){return Object(i.c)().get("".concat("/api/next2","/community/discussion/my/reply/item/").concat(t))}function p(t){return Object(i.c)().delete("".concat("/api/next2","/community/discussion/my/reply/item/").concat(t))}function h(t,e){return Object(i.c)().put("".concat("/api/next2","/community/discussion/my/reply/item/").concat(t),e)}function m(t){return Object(i.c)().get("".concat("/api/next2","/community/discussion/my/comment/list"),{params:t})}function f(t){return Object(i.c)().delete("".concat("/api/next2","/community/discussion/my/comment/item/").concat(t))}},ad8d:function(t,e,n){"use strict";n("a9e3"),n("ac1f"),n("841c");var i=n("6c2b"),a=n("0644"),o=n.n(a),s={name:"publish_collection",props:["data"],data:function(){return{post_collection:"",collections:[],copyCollections:[],isInit:!0,loading:!1,search:""}},model:{prop:"data",event:"update"},computed:{isEmpty:function(){return!this.search&&!this.collections.length}},watch:{data:{immediate:!0,handler:function(t){this.post_collection=Number(t)||""}},post_collection:{handler:function(t){this.$emit("update",t)}}},methods:{loadCollections:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={keyword:e};Object(i.d)(n).then((function(e){t.collections=e.data.data.list,t.isInit&&(t.copyCollections=o()(t.collections),t.isInit=!1)}))},remoteMethod:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.search=e,this.loading=!0,""!==e){var n={keyword:e};Object(i.d)(n).then((function(e){t.collections=e.data.data.list,t.loading=!1}))}else this.collections=o()(this.copyCollections)},visibleChange:function(t){t&&(this.collections=o()(this.copyCollections))}},mounted:function(){this.loadCollections()},components:{}},c=(n("6851"),n("2877")),r=Object(c.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-publish-collection-relation"},[e("h5",{staticClass:"u-schema"},[e("a",{staticClass:"u-add el-button el-button--primary el-button--mini",attrs:{href:"/publish/#/collection",target:"_blank"}},[t._v("+ 创建小册")]),t._t("default"),t._m(0)],2),e("el-select",{staticClass:"u-collection",attrs:{remote:"","remote-method":t.remoteMethod,loading:t.loading,filterable:"",clearable:"",placeholder:"请选择一个小册（可选，非必填，可搜索）"},on:{"visible-change":t.visibleChange},model:{value:t.post_collection,callback:function(e){t.post_collection=e},expression:"post_collection"}},[t._l(t.collections,(function(t,n){return e("el-option",{key:n,attrs:{label:t.title,value:t.id}})})),e("div",{staticClass:"u-collection-null",attrs:{slot:"empty"},slot:"empty"},[e("div",[t._v(" 没有找到匹配结果， "),e("a",{attrs:{href:"/publish/#/collection",target:"_blank"}},[t._v("创建小册")])])])],2),t.isEmpty?e("div",{staticClass:"u-tip"},[e("i",{staticClass:"el-icon-info"}),t._v(" 当前没有任何小册， "),e("a",{attrs:{href:"/publish/#/collection",target:"_blank"}},[t._v("创建小册")])]):t._e()],1)}),[function(){var t=this._self._c;return t("a",{staticClass:"u-help u-icon-links",attrs:{href:"/tool/20891",target:"_blank"}},[t("i",{staticClass:"el-icon-question"}),this._v(" 小册帮助指南 ")])}],!1,null,null,null);e.a=r.exports},af05:function(t,e,n){"use strict";n("a15b"),n("a434"),n("e9c4"),n("b64b");var i=n("9a1b"),a=n("85e4"),o={name:"publish_at_authors",data:function(){return{authorIds:[],list:[]}},mounted:function(){window.addEventListener("setItemEvent",this.handleSession)},beforeDestroy:function(){window.removeEventListener("setItemEvent",this.handleSession)},watch:{authorIds:{deep:!0,handler:function(t,e){t.length>e.length&&this.loadUsers()}}},methods:{handleSession:function(t){if("atAuthor"===t.key)try{var e=JSON.parse(t.newVal);this.authorIds=e}catch(t){console.log(t),this.authorIds=[]}},loadUsers:function(){var t=this;Object(i.b)(this.authorIds).then((function(e){t.list=e.data.data}))},remove:function(t,e){var n=this.authorIds.split(",");n.splice(e,1),this.list.splice(e,1),n.length?sessionStorage.setItem("atAuthor",JSON.stringify(n.join(","))):sessionStorage.removeItem("atAuthor")}},filters:{showAvatar:function(t){return Object(a.m)(t)}}},s=(n("e87f"),n("2877")),c=Object(s.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-publish-authors"},[e("el-form-item",{attrs:{label:"@圈一下"}},[e("div",{staticClass:"u-list"},t._l(t.list,(function(n,i){return e("div",{key:i,staticClass:"u-item"},[e("img",{staticClass:"u-avatar",attrs:{src:t._f("showAvatar")(n.user_avatar)}}),e("span",{staticClass:"u-name"},[t._v(" "+t._s(n.display_name)+" ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"移除",placement:"top"}},[e("i",{staticClass:"u-delete el-icon-delete",on:{click:function(e){return t.remove(n,i)}}})])],1)})),0)])],1)}),[],!1,null,"07522ff3",null);e.a=c.exports},b3aa:function(t,e,n){},b4e5:function(t,e,n){"use strict";n("b3aa")},bb78:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("ac1f"),n("5319");var i=n("a27f"),a={data:function(){return{hasRead:0,open_white_list:0,visible_for_self:0,from:""}},mounted:function(){var t;this.initExtend();var e=null===(t=this.$route.query)||void 0===t?void 0:t.from;e&&(this.from=e)},methods:{initExtend:function(){this.hasRead=~~localStorage.getItem("jx3box_has_read")||0},setHasRead:function(){localStorage.setItem("jx3box_has_read",this.hasRead)},loadCommentConfig:function(t,e){var n=this;Object(i.b)(t,e).then((function(t){var e,i;n.open_white_list=(null===(e=t.data.data)||void 0===e?void 0:e.open_white_list)||0,n.visible_for_self=(null===(i=t.data.data)||void 0===i?void 0:i.visible_for_self)||0}))},setCommentConfig:function(t,e){Object(i.e)(t,e,this.open_white_list?"open":"close"),Object(i.f)(t,e,this.visible_for_self?"open":"close")},removeBase64Img:function(t){return t.replace(/(&lt;|<)img[^>]*?src="data:image[^>]*?(&gt;|>)/gi,"")}},created:function(){this.post.client=this.$store.state.client},watch:{$route:{immediate:!0,deep:!0,handler:function(){this.init()}},"$store.state.user_conf.editor_mode":{immediate:!0,handler:function(t){this.id||(this.post.post_mode=t||"tinymce")}}}}},c59a:function(t,e,n){"use strict";n.r(e);var i=n("5530"),a=n("2909"),o=(n("4de4"),n("7db0"),n("d81d"),n("14d9"),n("fb6a"),n("d3b7"),n("ac1f"),n("6062"),n("3ca3"),n("5319"),n("88e6"),n("70cc"),n("eb03"),n("22e5"),n("c01e"),n("fa76"),n("8306"),n("ddb0"),n("65c2")),s=n("f5d0"),c=n("81fc"),r=n("221a"),l=n("ef77"),u=n("d0a1"),d=n("ad8d"),p=n("41de"),h=(n("b0c0"),n("a9e3"),{props:{options:{type:Array,required:!0},value:{type:[String,Number],default:""}},data:function(){return{category:this.value}},watch:{value:function(t){this.category=t},options:{deep:!0,immediate:!0,handler:function(){var t,e;this.value||(this.category=null===(t=this.options)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.name,this.$emit("update",this.category))}}},model:{prop:"value",event:"update"},methods:{updateCategory:function(t){this.$emit("update",t)}}}),m=(n("5614"),n("2877")),f=Object(m.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-category-list"},[e("span",{staticClass:"u-category"},[t._v("类别")]),e("el-radio-group",{on:{input:t.updateCategory},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},t._l(t.options,(function(n){return e("el-tooltip",{key:n.name,attrs:{effect:"dark",content:n.remark,placement:"top-start"}},[e("el-radio",{attrs:{border:"",label:n.name}},[t._v(t._s(n.name))])],1)})),1)],1)}),[],!1,null,null,null).exports,b=n("b13e"),v=n("af05"),g=n("c402"),_=n("bb78"),y=n("3c49"),k=n("1509"),x={name:"community",mixins:[_.a,y.a],components:{Tinymce:r.a,"publish-header":l.a,"publish-title":u.a,"publish-collection":d.a,"publish-revision":p.a,"publish-category":f,"publish-banner":b.a,"publish-at-authors":v.a},data:function(){return{skins:[],loading:!1,processing:!1,post:{id:"",client:"all",decoration_id:"",category:"",title:"",content:"",banner_img:"",collection_id:""},currentDecorationId:"",community_types:s,tags:[],buckets:[],post_type:"community"}},computed:{extraImages:function(){var t=this.getImgSrc(this.post.content);return Object(a.a)(new Set(t))},id:function(){return~~this.post.id},data:function(){return Object(i.a)(Object(i.a)({},this.post),{},{category:this.post.category,collection_id:this.post.collection_id||void 0,decoration_id:this.post.decoration_id||void 0,extra_images:this.extraImages,introduction:this.getIntroduction(this.post.content)})}},mounted:function(){this.getTopicBucket();var t=this.$route.params.id;t&&(this.post.id=t,this.loadCommentConfig("community",t)),this.post.client="all"},methods:{goShopping:function(t){window.open("/vip/mall/list?category=virtual&sub_category=palu","_blank"),t.preventDefault(),t.stopPropagation()},setSkin:function(t){t.amount<=0&&t.id!=this.currentDecorationId?this.$message({message:"该皮肤已经被使用完了",type:"warning"}):this.post.decoration_id==t.id?this.post.decoration_id="":this.post.decoration_id=t.id},getDecoration:function(){var t=this;Object(k.b)({type:"palu"}).then((function(e){var n=(e.data.data||[]).filter((function(e){return e.amount>0||e.id==t.currentDecorationId}));t.skins=n.map((function(t){return{val:t.val,id:t.id,amount:t.amount,url:o.__imgPath+"decoration/palu/".concat(t.val,".png")}}))})).catch((function(){t.skins=[]}))},getIntroduction:function(t){return t.replace(/<[^>]*>|\n|&nbsp;| &nbsp;/g,"").slice(0,200)},setBannerIndex:function(t){this.post.banner_img===t?this.post.banner_img="":this.post.banner_img=t},init:function(){var t=this;sessionStorage.removeItem("atAuthor");var e=this.$route.params.id;e?Object(c.i)(e).then((function(e){var n=e.data.data;t.currentDecorationId=n.decoration_id,t.post=Object(i.a)(Object(i.a)({},n),{},{title:n.title,content:n.content,collection_id:n.collection_id,banner_img:n.banner_img}),t.getDecoration()})):this.getDecoration()},publish:function(){var t=this;this.loading=!0,this.data.id?Object(c.k)(this.data.id,this.data).then((function(e){t.$message({message:"更新成功",type:"success"}),setTimeout((function(){location.href="/community/".concat(t.post.id||e.data.data.id)}),500)})).finally((function(){t.loading=!1})):Object(c.j)(this.data).then((function(e){t.$message({message:"发布成功",type:"success"}),setTimeout((function(){location.href="/community/".concat(t.post.id||e.data.data.id)}),500)})).finally((function(){t.loading=!1}))},getImgSrc:function(t){for(var e,n=/<img\s+(?![^>]*\bclass\b)[^>]*src="([^"]*)"/g,i=[];null!==(e=n.exec(t));)i.push(e[1]);return i},getTopicBucket:function(){var t=this;Object(g.k)({type:"community"}).then((function(e){var n=e.data.data;t.tags=Object(a.a)(n)}))}},watch:{extraImages:{deep:!0,handler:function(){var t=this;this.extraImages.length?this.post.banner_img&&this.extraImages.find((function(e){return e===t.post.banner_img}))||(this.post.banner_img=this.extraImages[0]):this.post.banner_img=""}}}},C=(n("2cf3"),Object(m.a)(x,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-publish-box p-community"},[e("publish-header",{attrs:{name:"魔盒论坛"}},[e("publish-revision",{attrs:{enable:!0,"post-id":t.id}})],1),e("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[e("publish-title",{model:{value:t.post.title,callback:function(e){t.$set(t.post,"title",e)},expression:"post.title"}}),e("div",{staticClass:"m-publish-info"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("信息")]),e("publish-category",{attrs:{options:t.tags},model:{value:t.post.category,callback:function(e){t.$set(t.post,"category",e)},expression:"post.category"}})],1),e("div",{staticClass:"m-publish-info m-publish-extraimg"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("魔卡 "),e("el-tooltip",{staticClass:"box-item",attrs:{effect:"dark",content:"使用魔卡让你的贴贴闪闪发光!",placement:"top"}},[e("i",{staticClass:"el-icon-question"})]),e("a",{staticClass:"u-buy el-button el-button--primary el-button--mini is-round",attrs:{href:"/vip/mall/list?category=virtual&sub_category=palu",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-full"}),t._v(" 兑换魔卡")])],1),t.skins.length?e("div",{staticClass:"u-imgs u-skin-imgs"},t._l(t.skins,(function(n,i){return e("div",{key:i,class:"u-imgs-item u-skin ".concat(t.post.decoration_id===n.id&&"active"),attrs:{title:"点击使用卡片皮肤，再次点击取消选择"},on:{click:function(e){return t.setSkin(n)}}},[e("el-image",{attrs:{src:n.url,fit:"fill"}}),e("div",{staticClass:"u-mark"},[e("i",{staticClass:"el-icon-check"}),t._v(" 已选择")]),e("div",{staticClass:"u-amount"},[t._v("数量 : "+t._s(n.amount))])],1)})),0):e("div",{staticClass:"u-null"},[t._v(" 你还没有任何魔卡，"),e("a",{attrs:{href:"/vip/mall/list?category=virtual&sub_category=palu",target:"_blank"}},[t._v("点击前往")]),t._v("使用积分兑换。 ")])],1),e("div",{staticClass:"m-publish-content"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("正文")]),e("Tinymce",{directives:[{name:"show",rawName:"v-show",value:"tinymce",expression:"'tinymce'"}],attrs:{attachmentEnable:!0,resourceEnable:!0},model:{value:t.post.content,callback:function(e){t.$set(t.post,"content",e)},expression:"post.content"}})],1),e("div",{staticClass:"m-publish-append"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("小册")]),e("publish-collection",{attrs:{defaultCollapse:t.post.collection_collapse},model:{value:t.post.collection_id,callback:function(e){t.$set(t.post,"collection_id",e)},expression:"post.collection_id"}})],1),e("div",{staticClass:"m-publish-extend"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("临时")]),e("publish-at-authors")],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.extraImages.length,expression:"extraImages.length"}],staticClass:"m-publish-extraimg"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("附图")]),e("div",{staticClass:"u-imgs"},t._l(t.extraImages,(function(n,i){return e("div",{key:i,class:"u-imgs-item ".concat(t.post.banner_img===n&&"active"),attrs:{title:"点击设置封面"},on:{click:function(e){return t.setBannerIndex(n)}}},[e("el-image",{staticStyle:{width:"148px",height:"148px"},attrs:{src:n,fit:"cover"}}),e("div",{staticClass:"u-mark"},[t._v("封面")])],1)})),0)],1),e("div",{staticClass:"m-publish-other"},[e("publish-banner",{model:{value:t.post.banner_img,callback:function(e){t.$set(t.post,"banner_img",e)},expression:"post.banner_img"}})],1),e("div",{staticClass:"m-publish-doc"},[e("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.hasRead,callback:function(e){t.hasRead=e},expression:"hasRead"}},[t._v("我已阅读并了解"),e("a",{attrs:{href:"/notice/119",target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[t._v("《创作发布规范》")])])],1),e("div",{staticClass:"m-publish-buttons"},[[e("el-button",{attrs:{type:"primary",disabled:t.processing||!t.hasRead},on:{click:function(e){return t.publish("publish",!0)}}},[t._v("发    布")])]],2)],1)],1)}),[],!1,null,null,null));e.default=C.exports},d0a1:function(t,e,n){"use strict";var i={name:"publish_title",props:["data","hideDiv","placeholder"],data:function(){return{title:this.data}},model:{prop:"data",event:"update"},watch:{data:function(t){this.title=t},title:{deep:!0,handler:function(t){this.$emit("update",t)}}},computed:{},methods:{},mounted:function(){},components:{}},a=n("2877"),o=Object(a.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-publish-title"},[t.hideDiv?t._e():e("el-divider",{attrs:{"content-position":"left"}},[t._v("标题")]),e("el-input",{attrs:{maxlength:50,minlength:2,"show-word-limit":"",required:"",placeholder:t.placeholder||"请填写标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._t("default")],2)}),[],!1,null,null,null);e.a=o.exports},e87f:function(t,e,n){"use strict";n("18db")},ef77:function(t,e,n){"use strict";n("b0c0"),n("14d9");var i={name:"publish_header",props:["name"],data:function(){return{}},computed:{},methods:{goBack:function(){window.history.length?this.$router.go(-1):this.$router.push("/")}},mounted:function(){},components:{}},a=(n("b4e5"),n("2877")),o=Object(a.a)(i,(function(){var t=this._self._c;return t("div",{staticClass:"m-publish-header"},[t("el-page-header",{attrs:{content:this.name},on:{back:this.goBack}}),this._t("default")],2)}),[],!1,null,null,null);e.a=o.exports},f5d0:function(t){t.exports=JSON.parse('{"讨论":"讨论","文章":"文章"}')}}]);
//# sourceMappingURL=chunk-7084be34.86a248bd.js.map