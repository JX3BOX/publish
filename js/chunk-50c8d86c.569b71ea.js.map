{"version":3,"sources":["webpack:///./src/service/item_plan.js","webpack:///./src/components/publish_icon.vue?54ff","webpack:///./src/components/publish_header.vue?17ab","webpack:///./src/post/item_plan.vue?9dc5","webpack:///./src/service/item.js","webpack:///./src/components/publish_icon.vue?f807","webpack:///src/components/publish_icon.vue","webpack:///./src/components/publish_icon.vue?f0b6","webpack:///./src/components/publish_icon.vue","webpack:///src/post/item_plan.vue","webpack:///./src/post/item_plan.vue?313b","webpack:///./src/post/item_plan.vue?ddb1","webpack:///./src/post/item_plan.vue","webpack:///./src/components/publish_header.vue?814f","webpack:///src/components/publish_header.vue","webpack:///./src/components/publish_header.vue?3a87","webpack:///./src/components/publish_header.vue","webpack:///./src/components/publish_icon.vue?e083"],"names":["getMyPlans","params","$cms","get","then","res","data","getPlanByID","id","addMyPlans","post","postMyPlans","put","delMyPlans","delete","search_items","keyword","length","fields","is_equip","limit","$helper","method","url","searchItems","get_item","item_id","name","props","source","computed","client","components","methods","get_data","show","item_border","item","item_border_quest","icon_url","watch","immediate","handler","_vm","this","_c","_self","attrs","click_trigger","dishoverable","on","slot","staticClass","style","backgroundImage","opacity","Quality","IconID","class","_v","_s","Name","_e","title","public","type","description","relation","label","AucGenre","list","AucSubType","draggable","itemIcon","relationList","equipList","loading","per","page","total","searchList","plan_id","search_params","apply","deep","loadItems","resetPages","iconLink","addRelation","moveHandle","e","getPlanData","console","extractID","count","equipItem","toEquipList","_obj","el","toEquip","obj","submit","message","finally","created","_t","model","value","callback","$$v","$set","expression","trim","pull","_l","index","key","$event","splice","_n","equip","eq","goBack","mounted","component"],"mappings":"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","file":"js/chunk-50c8d86c.569b71ea.js","sourcesContent":["import { $helper, $cms, $_https, __cms } from \"@jx3box/jx3box-common/js/https.js\";\nimport qs from \"qs\";\n\nfunction get_item_plan(plan_id) {\n\treturn $helper()({\n\t\tmethod: \"GET\",\n\t\turl: `/api/item_plan/${plan_id}`,\n\t});\n}\n\n// 提交物品清单\nfunction save_item_plan(params) {\n\tlet action = params.id ? \"update\" : \"create\";\n\tlet data = { action: action, plan: params };\n\n\treturn $helper()({\n\t\tmethod: \"POST\",\n\t\turl: `/api/item_plan`,\n\t\tdata: qs.stringify(data),\n\t});\n}\n\n// 获取我的清单-old\nfunction get_my_item_plans(params) {\n\treturn $helper()({\n\t\tmethod: \"GET\",\n\t\turl: `/api/my/item_plans`,\n\t\tparams: params,\n\t});\n}\nfunction delete_item_plan(plan_id) {\n\treturn $helper()({\n\t\tmethod: \"PUT\",\n\t\turl: `/api/item_plan/remove`,\n\t\tdata: qs.stringify({ plan_id: plan_id }),\n\t});\n}\n\n// 获取我的清单\nfunction getMyPlans(params) {\n\treturn $cms()\n\t\t.get(`/api/cms/app/item_plans/mine`, { params })\n\t\t.then((res) => {\n\t\t\treturn res.data.data;\n\t\t});\n}\nfunction getPlanByID(id) {\n\treturn $cms()\n\t\t.get(`/api/cms/app/item_plan/${id}`)\n\t\t.then((res) => {\n\t\t\treturn res.data.data;\n\t\t});\n}\n// 新增清单\nfunction addMyPlans(params) {\n\treturn $cms().post(`/api/cms/app/item_plan`, params);\n}\n// 修改我的清单\nfunction postMyPlans(id, params) { \n\treturn $cms().put(`/api/cms/app/item_plan/${id}`, params);\n}\n// 删除我的清单\nfunction delMyPlans(id) {\n\treturn $cms().delete(`/api/cms/app/item_plan/${id}`);\n}\n\nexport { get_item_plan, save_item_plan, get_my_item_plans, delete_item_plan, getMyPlans, delMyPlans, addMyPlans, postMyPlans, getPlanByID };\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_icon.vue?vue&type=style&index=0&id=409202d7&prod&lang=less&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./item_plan.vue?vue&type=style&index=0&id=2678cd78&prod&scoped=true&lang=less&\"","import { $helper } from \"@jx3box/jx3box-common/js/https.js\";\n\n// 物品搜索\nfunction search_items(keyword, length, fields, is_equip = null) {\n\tlet params = { keyword: keyword, limit: length, fields: fields };\n\tif (is_equip !== null) params.is_equip = is_equip ? 1 : 0;\n\n\treturn $helper()({\n\t\tmethod: \"GET\",\n\t\turl: `/api/item/search`,\n\t\tparams: params,\n\t});\n}\n\n// 物品搜索\nfunction searchItems(params) {\n\treturn $helper()\n\t\t.get(`/api/item/search`, { params })\n\t\t.then((res) => {\n\t\t\treturn res.data.data;\n\t\t});\n}\n\n// 物品id搜索\nfunction searchItemsID(params) {\n\treturn $helper()\n\t\t.get(`/api/items`, { params })\n\t\t.then((res) => {\n\t\t\treturn res.data.data;\n\t\t});\n}\n\n// 获取物品\nfunction get_item(item_id) {\n\tif (!item_id) return;\n\treturn $helper().get(`api/item/${item_id}`);\n}\nexport { search_items, get_item, searchItems, searchItemsID };\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_icon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_icon.vue?vue&type=script&lang=js&\"","<template>\n\t<el-popover v-if=\"source\" placement=\"right-start\" width=\"auto\" :trigger=\"click_trigger ? 'click' : 'hover'\" :disabled=\"dishoverable\" popper-class=\"m-item-icon-popup\" :visible-arrow=\"false\" transition=\"none\" :close-delay=\"0\" @show=\"show\">\n\t\t<template slot=\"reference\">\n\t\t\t<div class=\"m-item-icon\">\n\t\t\t\t<div class=\"u-item-icon\">\n\t\t\t\t\t<div class=\"u-border\" :style=\"{ backgroundImage: item_border(source), opacity: source.Quality == 5 ? 0.9 : 1 }\"></div>\n\t\t\t\t\t<div class=\"u-border-quest\" :style=\"{ backgroundImage: item_border_quest(source) }\"></div>\n\t\t\t\t\t<img class=\"u-item-icon\" :src=\"icon_url(source.IconID)\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"u-name\" :class=\"`quality-${source.Quality}`\">{{ source.Name }}</div>\n\t\t\t</div>\n\t\t</template>\n\n\t\t<jx3-item :item=\"source\" />\n\t</el-popover>\n</template>\n\n<script>\nimport Item from \"@jx3box/jx3box-editor/src/Item\";\nimport { get_item } from \"../service/item.js\";\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport { iconLink } from \"@jx3box/jx3box-common/js/utils\";\n\nexport default {\n\tname: \"ItemIcon\",\n\tprops: [\"item\", \"item_id\", \"dishoverable\", \"click_trigger\"],\n\tdata() {\n\t\treturn {\n\t\t\tsource: null,\n\t\t};\n\t},\n\tcomputed: {\n\t\tclient: function () {\n\t\t\treturn this.$store.state.client;\n\t\t},\n\t},\n\tcomponents: {\n\t\t\"jx3-item\": Item,\n\t},\n\tmethods: {\n\t\tget_data(item_id) {\n\t\t\tif (item_id) {\n\t\t\t\tget_item(item_id).then((res) => {\n\t\t\t\t\tlet data = res.data;\n\t\t\t\t\tlet item = data.data.item;\n\t\t\t\t\tif (Object.keys(item).length) this.source = item;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tshow() {\n\t\t\tif (!this.source || typeof this.source.Genre === \"undefined\") {\n\t\t\t\tthis.get_data(this.source.id);\n\t\t\t}\n\t\t},\n\t\titem_border(item) {\n\t\t\tswitch (item.Quality) {\n\t\t\t\tcase 3:\n\t\t\t\t\treturn `url(${__imgPath}image/item/blue.png)`;\n\t\t\t\tcase 4:\n\t\t\t\t\treturn `url(${__imgPath}image/item/purple.png)`;\n\t\t\t\tcase 5:\n\t\t\t\t\treturn `url(${__imgPath}image/item/orange.gif)`;\n\t\t\t\tdefault:\n\t\t\t\t\treturn \"\";\n\t\t\t}\n\t\t},\n\t\titem_border_quest(item) {\n\t\t\tif (item.IsQuest > 0) return `url(${__imgPath}image/item/renwu.png)`;\n\t\t\treturn \"\";\n\t\t},\n\t\ticon_url: function (id) {\n\t\t\t// return iconLink(id, this.client);\n\t\t\treturn iconLink(id); //收藏跨正式服/怀旧服\n\t\t},\n\t},\n\twatch: {\n\t\titem: {\n\t\t\timmediate: true,\n\t\t\thandler() {\n\t\t\t\tthis.source = this.item;\n\t\t\t},\n\t\t},\n\t\titem_id: {\n\t\t\timmediate: true,\n\t\t\thandler() {\n\t\t\t\tthis.get_data(this.item_id);\n\t\t\t},\n\t\t},\n\t},\n};\n</script>\n\n<style lang=\"less\">\n.m-item-icon-popup {\n\tmin-width: initial;\n\tpadding: 0;\n\tborder: none;\n\tbox-shadow: none;\n\tbackground-color: transparent;\n\ttransform: translateY(-10px);\n}\n</style>\n<style lang=\"less\" scoped>\n.m-item-icon {\n\t.flex;\n\talign-items: center;\n\t.u-name {\n\t\t.ml(10px);\n\t}\n\t.quality-1 {\n\t\tcolor: #fff;\n\t}\n\t.quality-2 {\n\t\tcolor: #00d24b;\n\t}\n\t.quality-3 {\n\t\tcolor: #007eff;\n\t}\n\t.quality-4 {\n\t\tcolor: #ff2dff;\n\t}\n\t.quality-5 {\n\t\tcolor: #ffa500;\n\t}\n}\n.u-item-icon {\n\t.pr;\n\t.dbi;\n\n\t.u-border,\n\t.u-border-quest {\n\t\t.pa;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\t.w(100%);\n\t\t.h(100%);\n\t\tbox-sizing: border-box;\n\t\tbackground-size: contain;\n\t\t.z(2);\n\t}\n\n\t.u-border-quest {\n\t\t.z(3);\n\t}\n\n\t.u-item-icon {\n\t\t.pr;\n\t\t.db;\n\t\t.w(36px);\n\t\t.h(auto);\n\t\tmax-height: 36px;\n\t\t.z(1);\n\t}\n}\n</style>\n","import { render, staticRenderFns } from \"./publish_icon.vue?vue&type=template&id=409202d7&scoped=true&\"\nimport script from \"./publish_icon.vue?vue&type=script&lang=js&\"\nexport * from \"./publish_icon.vue?vue&type=script&lang=js&\"\nimport style0 from \"./publish_icon.vue?vue&type=style&index=0&id=409202d7&prod&lang=less&\"\nimport style1 from \"./publish_icon.vue?vue&type=style&index=1&id=409202d7&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"409202d7\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.source)?_c('el-popover',{attrs:{\"placement\":\"right-start\",\"width\":\"auto\",\"trigger\":_vm.click_trigger ? 'click' : 'hover',\"disabled\":_vm.dishoverable,\"popper-class\":\"m-item-icon-popup\",\"visible-arrow\":false,\"transition\":\"none\",\"close-delay\":0},on:{\"show\":_vm.show}},[_c('template',{slot:\"reference\"},[_c('div',{staticClass:\"m-item-icon\"},[_c('div',{staticClass:\"u-item-icon\"},[_c('div',{staticClass:\"u-border\",style:({ backgroundImage: _vm.item_border(_vm.source), opacity: _vm.source.Quality == 5 ? 0.9 : 1 })}),_c('div',{staticClass:\"u-border-quest\",style:({ backgroundImage: _vm.item_border_quest(_vm.source) })}),_c('img',{staticClass:\"u-item-icon\",attrs:{\"src\":_vm.icon_url(_vm.source.IconID)}})]),_c('div',{staticClass:\"u-name\",class:`quality-${_vm.source.Quality}`},[_vm._v(_vm._s(_vm.source.Name))])])]),_c('jx3-item',{attrs:{\"item\":_vm.source}})],2):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"m-publish-box\">\n\t\t<!-- 返回 -->\n\t\t<publish-header name=\"物品清单\" :localDraft=\"false\">\n\t\t\t<slot name=\"header\"></slot>\n\t\t</publish-header>\n\t\t<!-- 表单 -->\n\t\t<el-form class=\"u-form\" label-position=\"left\" label-width=\"80px\">\n\t\t\t<!-- 清单名称 -->\n\t\t\t<el-form-item label=\"标题\">\n\t\t\t\t<el-input v-model=\"data.title\" placeholder=\"请输入物品清单的标题\" maxlength=\"20\" show-word-limit></el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item label=\"可见性\">\n\t\t\t\t<el-radio v-model=\"data.public\" :label=\"1\">公开</el-radio>\n\t\t\t\t<el-radio v-model=\"data.public\" :label=\"0\">私有</el-radio>\n\t\t\t</el-form-item>\n\t\t\t<!-- 清单描述 -->\n\t\t\t<el-form-item label=\"描述\">\n\t\t\t\t<el-input type=\"textarea\" :rows=\"3\" v-model=\"data.description\" placeholder=\"简单说明一下你的物品清单\" :maxlength=\"2000\" show-word-limit></el-input>\n\t\t\t</el-form-item>\n\t\t\t<!-- 清单类型 -->\n\t\t\t<el-form-item label=\"类型\">\n\t\t\t\t<el-radio-group v-model=\"data.type\" size=\"medium\" @change=\"resetPages\">\n\t\t\t\t\t<el-radio-button label=\"1\">道具清单</el-radio-button>\n\t\t\t\t\t<el-radio-button label=\"2\">装备清单</el-radio-button>\n\t\t\t\t</el-radio-group>\n\t\t\t\t<el-button class=\"u-add-plan\" size=\"medium\" icon=\"el-icon-plus\" @click=\"addRelation\">新增清单</el-button>\n\t\t\t</el-form-item>\n\t\t\t<!-- 制作清单 -->\n\t\t\t<el-form-item label=\"清单\">\n\t\t\t\t<div class=\"m-plan-list\">\n\t\t\t\t\t<!-- 搜索物品 -->\n\t\t\t\t\t<div class=\"u-list-search\" v-if=\"searchList.length\">\n\t\t\t\t\t\t<el-input class=\"u-title\" placeholder=\"请输入物品名称（可适配中括号）\" prefix-icon=\"el-icon-search\" v-model.lazy.trim=\"keyword\"></el-input>\n\t\t\t\t\t\t<draggable v-model=\"searchList\" draggable=\".u-change\" :move=\"moveHandle\" :group=\"{ name: 'draggable-item', pull: 'clone', put: false }\">\n\t\t\t\t\t\t\t<jx3-item-simple class=\"u-change\" v-for=\"(item, index) in searchList\" :key=\"index\" :item=\"item\" />\n\t\t\t\t\t\t</draggable>\n\n\t\t\t\t\t\t<el-pagination small class=\"m-archive-pages\" background layout=\"prev, pager, next, jumper\" :hide-on-single-page=\"true\" :page-size=\"per\" :total=\"total\" :current-page.sync=\"page\" size=\"mini\"></el-pagination>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- 物品子清单 -->\n\t\t\t\t\t<el-row v-if=\"data.type == '1'\" class=\"u-list-box\" :gutter=\"20\">\n\t\t\t\t\t\t<el-col v-for=\"(relation, index) in data.relation\" :key=\"index\" :span=\"6\">\n\t\t\t\t\t\t\t<div class=\"u-list\">\n\t\t\t\t\t\t\t\t<i class=\"u-list-close el-icon-circle-close\" @click=\"data.relation.splice(index, 1)\"></i>\n\t\t\t\t\t\t\t\t<el-input class=\"u-title\" type=\"text\" placeholder=\"子清单标题（选填）\" v-model=\"relation.title\" maxlength=\"20\" show-word-limit></el-input>\n\t\t\t\t\t\t\t\t<draggable class=\"u-item-drag\" :list=\"relation.data\" group=\"draggable-item\" ghost-class=\"ghost\">\n\t\t\t\t\t\t\t\t\t<template v-if=\"relation.data && relation.data.length\">\n\t\t\t\t\t\t\t\t\t\t<div v-for=\"(item, key) in relation.data\" :key=\"key\" class=\"u-selected u-selected-item u-selected-count\">\n\t\t\t\t\t\t\t\t\t\t\t<itemIcon class=\"u-icon\" :item_id=\"item.id\" />\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"u-count\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span>数量：</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<el-input-number size=\"mini\" v-model.number=\"item.count\" :min=\"1\" label=\"数字\"></el-input-number>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"u-close el-icon-circle-close\" @click=\"relation.data.splice(key, 1)\"></i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<div class=\"u-normal\" v-else>拖拽所需道具到此处</div>\n\t\t\t\t\t\t\t\t</draggable>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-col>\n\t\t\t\t\t</el-row>\n\t\t\t\t\t<!-- 装备子清单 -->\n\t\t\t\t\t<el-row v-else class=\"u-list-box u-list-equip\" :gutter=\"20\">\n\t\t\t\t\t\t<el-col v-for=\"(equip, index) in equipList\" :key=\"index\" :span=\"6\">\n\t\t\t\t\t\t\t<div v-for=\"(eq, key) in equip\" :key=\"key\" class=\"u-list\">\n\t\t\t\t\t\t\t\t<div class=\"u-title\">{{ eq.label }}</div>\n\t\t\t\t\t\t\t\t<draggable :list=\"eq.list\" :move=\"moveHandle\" :data-AucGenre=\"eq.AucGenre\" :data-AucSubType=\"eq.AucSubType\" group=\"draggable-item\" ghost-class=\"ghost\">\n\t\t\t\t\t\t\t\t\t<template v-if=\"eq.list && eq.list.length\">\n\t\t\t\t\t\t\t\t\t\t<div v-for=\"(item, key) in eq.list\" :key=\"key\" class=\"u-selected u-selected-item u-selected-equip\">\n\t\t\t\t\t\t\t\t\t\t\t<itemIcon class=\"u-icon\" v-if=\"typeof item == 'string'\" :item_id=\"item\" />\n\t\t\t\t\t\t\t\t\t\t\t<itemIcon class=\"u-icon\" v-if=\"typeof item == 'object'\" :item=\"item\" />\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"u-close el-icon-circle-close\" @click=\"eq.list.splice(key, 1)\"></i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<div class=\"u-normal\" v-else>拖拽所需道具到此处</div>\n\t\t\t\t\t\t\t\t</draggable>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-col>\n\t\t\t\t\t</el-row>\n\t\t\t\t</div>\n\t\t\t</el-form-item>\n\t\t\t<!-- 提交表单 -->\n\t\t\t<el-form-item>\n\t\t\t\t<el-button class=\"u-publish\" icon=\"el-icon-s-promotion\" type=\"primary\" @click=\"submit\" :loading=\"loading\">提交物品清单</el-button>\n\t\t\t</el-form-item>\n\t\t</el-form>\n\t</div>\n</template>\n<script>\nimport header from \"@/components/publish_header.vue\";\nimport ItemSimple from \"@jx3box/jx3box-editor/src/ItemSimple\";\nimport itemIcon from \"@/components/publish_icon.vue\";\nimport draggable from \"vuedraggable\";\nimport { searchItems } from \"../service/item\";\nimport { getPlanByID, postMyPlans, addMyPlans } from \"../service/item_plan\";\nimport { iconLink } from \"@jx3box/jx3box-common/js/utils\";\nconst default_plan = {\n\tid: \"\",\n\ttitle: \"\",\n\tpublic: 1,\n\ttype: \"1\",\n\tdescription: \"\",\n\trelation: [],\n};\nconst default_equip = [\n\t[\n\t\t{ title: \"melee_weapon\", label: \"武器\", AucGenre: 1, list: [] },\n\t\t{ title: \"range_weapon\", label: \"暗器\", AucGenre: 2, list: [] },\n\t],\n\t[\n\t\t{ title: \"helm\", label: \"帽子\", AucGenre: 3, AucSubType: 2, list: [] },\n\t\t{ title: \"chest\", label: \"上衣\", AucGenre: 3, AucSubType: 1, list: [] },\n\t\t{ title: \"waist\", label: \"腰带\", AucGenre: 3, AucSubType: 3, list: [] },\n\t],\n\t[\n\t\t{ title: \"bangle\", label: \"护腕\", AucGenre: 3, AucSubType: 6, list: [] },\n\t\t{ title: \"pants\", label: \"下装\", AucGenre: 3, AucSubType: 4, list: [] },\n\t\t{ title: \"boots\", label: \"鞋子\", AucGenre: 3, AucSubType: 5, list: [] },\n\t],\n\t[\n\t\t{ title: \"amulet\", label: \"项链\", AucGenre: 4, AucSubType: 1, list: [] },\n\t\t{ title: \"pendant\", label: \"腰坠\", AucGenre: 4, AucSubType: 3, list: [] },\n\t\t{ title: \"ring_1\", label: \"戒指\", AucGenre: 4, AucSubType: 2, list: [] },\n\t\t{ title: \"ring_2\", label: \"戒指\", AucGenre: 4, AucSubType: 2, list: [] },\n\t],\n];\nexport default {\n\tname: \"plan\",\n\tcomponents: {\n\t\tdraggable,\n\t\t\"publish-header\": header,\n\t\t\"jx3-item-simple\": ItemSimple,\n\t\titemIcon,\n\t},\n\tdata: function () {\n\t\treturn {\n\t\t\t// 清单\n\t\t\tdata: Object.assign({}, default_plan),\n\n\t\t\trelationList: [],\n\t\t\tequipList: [...default_equip],\n\n\t\t\t// 物品\n\t\t\tloading: false,\n\t\t\tkeyword: \"\",\n\t\t\tper: 15,\n\t\t\tpage: 1,\n\t\t\ttotal: 1,\n\t\t\tsearchList: [],\n\n\t\t\titem_id: \"\",\n\t\t};\n\t},\n\tcomputed: {\n\t\tplan_id() {\n\t\t\treturn this.$route.params.plan_id;\n\t\t},\n\t\t// 搜索参数\n\t\tsearch_params() {\n\t\t\tlet params = {\n\t\t\t\tpage: this.page,\n\t\t\t\tlimit: this.per,\n\t\t\t\tis_equip: this.data.type == 2 ? 1 : 0,\n\t\t\t\tfields: [\"id\", \"UiID\", \"Name\", \"IconID\", \"Quality\", \"AucGenre\", \"AucSubType\", \"DescHtml\"],\n\t\t\t\tapply: 1,\n\t\t\t};\n\t\t\tif (this.keyword) params.keyword = this.keyword;\n\t\t\treturn params;\n\t\t},\n\t},\n\twatch: {\n\t\t// 搜索物品重置\n\t\tkeyword() {\n\t\t\tthis.resetPages();\n\t\t},\n\t\t// 重新搜索\n\t\tsearch_params: {\n\t\t\timmediate: true,\n\t\t\tdeep: true,\n\t\t\thandler: function () {\n\t\t\t\tthis.loadItems();\n\t\t\t},\n\t\t},\n\t},\n\n\tmethods: {\n\t\t// 物品\n\t\t// ===================================\n\t\t// 物品搜索\n\t\tloadItems() {\n\t\t\tsearchItems(this.search_params).then((res) => {\n\t\t\t\tres.data.map((item) => (item.count = 1));\n\t\t\t\tthis.searchList = res.data;\n\t\t\t\tthis.total = res.total;\n\t\t\t});\n\t\t},\n\t\t// 重置分页\n\t\tresetPages() {\n\t\t\tthis.page = 1;\n\t\t},\n\t\t// 物品id转图片链接\n\t\ticonLink,\n\n\t\t// 清单\n\t\t// ===================================\n\t\t// 新增清单\n\t\taddRelation() {\n\t\t\tthis.data.relation.unshift({\n\t\t\t\ttitle: \"\",\n\t\t\t\tdata: [],\n\t\t\t});\n\t\t},\n\t\t// 装备清单的移动\n\t\tmoveHandle(e) {\n\t\t\tif (e.to.classList.contains(\"u-item-drag\")) return;\n\t\t\tlet AucGenre = e.to.getAttribute(\"data-AucGenre\");\n\t\t\tlet AucSubType = e.to.getAttribute(\"data-AucSubType\");\n\t\t\tlet result = e.draggedContext.element.AucGenre == AucGenre;\n\t\t\tif (AucSubType !== null) result = result && e.draggedContext.element.AucSubType == AucSubType;\n\t\t\treturn result;\n\t\t},\n\n\t\t// 数据处理\n\t\t// ===================================\n\t\t// 获取plan_id的数据\n\t\tgetPlanData() {\n\t\t\tgetPlanByID(this.plan_id).then((res) => {\n\t\t\t\tres = this.extractID(res);\n\t\t\t\tconsole.log(res);\n\t\t\t\tthis.data = res;\n\t\t\t\tif (this.data.type == 2) this.toEquipList(this.data.relation);\n\t\t\t});\n\t\t},\n\t\t//处理旧数据\n\t\textractID(data) {\n\t\t\tif (data.type == 1) {\n\t\t\t\tdata.relation = data.relation.map((item) => {\n\t\t\t\t\titem.data = item.data.map((el) => {\n\t\t\t\t\t\tif (typeof el == \"string\") el = { id: el, count: 1 };\n\t\t\t\t\t\tif (typeof el == \"object\") el = { id: el.id, count: el.count };\n\t\t\t\t\t\treturn el;\n\t\t\t\t\t});\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdata.relation = this.equipItem(data.relation);\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\t\t// 将装备object转换为string\n\t\tequipItem(data) {\n\t\t\tfor (const key in data) {\n\t\t\t\tdata[key] = data[key].map((item) => {\n\t\t\t\t\tif (typeof item == \"object\") item = item.id;\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn data;\n\t\t},\n\t\t// 装备分组\n\t\ttoEquipList(_obj) {\n\t\t\tthis.equipList.map((list) => {\n\t\t\t\tlist.map((el) => {\n\t\t\t\t\tif (_obj.hasOwnProperty(el.title)) {\n\t\t\t\t\t\tel.list = _obj[el.title];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t// 装备提交数据转换\n\t\ttoEquip() {\n\t\t\tlet obj = {};\n\t\t\tthis.equipList.forEach((list) => {\n\t\t\t\tlist.forEach((el) => {\n\t\t\t\t\tobj[el.title] = el.list;\n\t\t\t\t});\n\t\t\t});\n\t\t\tobj = this.equipItem(obj);\n\t\t\tthis.data.relation = obj;\n\t\t},\n\n\t\t// --提交清单-------\n\t\tsubmit() {\n\t\t\tif (this.data.type == 2) this.toEquip();\n\n\t\t\tthis.loading = true;\n\t\t\tthis.plan_id\n\t\t\t\t? postMyPlans(this.plan_id, this.data)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.$message({ message: \"物品清单修改成功\", type: \"success\" });\n\t\t\t\t\t\t\tthis.$router.push({ name: \"bucket\", params: { type: \"item_plan\" } });\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\t})\n\t\t\t\t: addMyPlans(this.data)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.$message({ message: \"物品清单提交成功\", type: \"success\" });\n\t\t\t\t\t\t\tthis.$router.push({ name: \"bucket\", params: { type: \"item_plan\" } });\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\t});\n\t\t},\n\t},\n\tcreated: function () {\n\t\tif (this.plan_id) this.getPlanData();\n\t},\n};\n</script>\n<style scoped lang=\"less\">\n@import \"../assets/css/item_plan.less\";\n.el-col {\n\tmin-width: 260px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./item_plan.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./item_plan.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./item_plan.vue?vue&type=template&id=2678cd78&scoped=true&\"\nimport script from \"./item_plan.vue?vue&type=script&lang=js&\"\nexport * from \"./item_plan.vue?vue&type=script&lang=js&\"\nimport style0 from \"./item_plan.vue?vue&type=style&index=0&id=2678cd78&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2678cd78\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-box\"},[_c('publish-header',{attrs:{\"name\":\"物品清单\",\"localDraft\":false}},[_vm._t(\"header\")],2),_c('el-form',{staticClass:\"u-form\",attrs:{\"label-position\":\"left\",\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入物品清单的标题\",\"maxlength\":\"20\",\"show-word-limit\":\"\"},model:{value:(_vm.data.title),callback:function ($$v) {_vm.$set(_vm.data, \"title\", $$v)},expression:\"data.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"可见性\"}},[_c('el-radio',{attrs:{\"label\":1},model:{value:(_vm.data.public),callback:function ($$v) {_vm.$set(_vm.data, \"public\", $$v)},expression:\"data.public\"}},[_vm._v(\"公开\")]),_c('el-radio',{attrs:{\"label\":0},model:{value:(_vm.data.public),callback:function ($$v) {_vm.$set(_vm.data, \"public\", $$v)},expression:\"data.public\"}},[_vm._v(\"私有\")])],1),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":3,\"placeholder\":\"简单说明一下你的物品清单\",\"maxlength\":2000,\"show-word-limit\":\"\"},model:{value:(_vm.data.description),callback:function ($$v) {_vm.$set(_vm.data, \"description\", $$v)},expression:\"data.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"类型\"}},[_c('el-radio-group',{attrs:{\"size\":\"medium\"},on:{\"change\":_vm.resetPages},model:{value:(_vm.data.type),callback:function ($$v) {_vm.$set(_vm.data, \"type\", $$v)},expression:\"data.type\"}},[_c('el-radio-button',{attrs:{\"label\":\"1\"}},[_vm._v(\"道具清单\")]),_c('el-radio-button',{attrs:{\"label\":\"2\"}},[_vm._v(\"装备清单\")])],1),_c('el-button',{staticClass:\"u-add-plan\",attrs:{\"size\":\"medium\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addRelation}},[_vm._v(\"新增清单\")])],1),_c('el-form-item',{attrs:{\"label\":\"清单\"}},[_c('div',{staticClass:\"m-plan-list\"},[(_vm.searchList.length)?_c('div',{staticClass:\"u-list-search\"},[_c('el-input',{staticClass:\"u-title\",attrs:{\"placeholder\":\"请输入物品名称（可适配中括号）\",\"prefix-icon\":\"el-icon-search\"},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"keyword\"}}),_c('draggable',{attrs:{\"draggable\":\".u-change\",\"move\":_vm.moveHandle,\"group\":{ name: 'draggable-item', pull: 'clone', put: false }},model:{value:(_vm.searchList),callback:function ($$v) {_vm.searchList=$$v},expression:\"searchList\"}},_vm._l((_vm.searchList),function(item,index){return _c('jx3-item-simple',{key:index,staticClass:\"u-change\",attrs:{\"item\":item}})}),1),_c('el-pagination',{staticClass:\"m-archive-pages\",attrs:{\"small\":\"\",\"background\":\"\",\"layout\":\"prev, pager, next, jumper\",\"hide-on-single-page\":true,\"page-size\":_vm.per,\"total\":_vm.total,\"current-page\":_vm.page,\"size\":\"mini\"},on:{\"update:currentPage\":function($event){_vm.page=$event},\"update:current-page\":function($event){_vm.page=$event}}})],1):_vm._e(),(_vm.data.type == '1')?_c('el-row',{staticClass:\"u-list-box\",attrs:{\"gutter\":20}},_vm._l((_vm.data.relation),function(relation,index){return _c('el-col',{key:index,attrs:{\"span\":6}},[_c('div',{staticClass:\"u-list\"},[_c('i',{staticClass:\"u-list-close el-icon-circle-close\",on:{\"click\":function($event){return _vm.data.relation.splice(index, 1)}}}),_c('el-input',{staticClass:\"u-title\",attrs:{\"type\":\"text\",\"placeholder\":\"子清单标题（选填）\",\"maxlength\":\"20\",\"show-word-limit\":\"\"},model:{value:(relation.title),callback:function ($$v) {_vm.$set(relation, \"title\", $$v)},expression:\"relation.title\"}}),_c('draggable',{staticClass:\"u-item-drag\",attrs:{\"list\":relation.data,\"group\":\"draggable-item\",\"ghost-class\":\"ghost\"}},[(relation.data && relation.data.length)?_vm._l((relation.data),function(item,key){return _c('div',{key:key,staticClass:\"u-selected u-selected-item u-selected-count\"},[_c('itemIcon',{staticClass:\"u-icon\",attrs:{\"item_id\":item.id}}),_c('div',{staticClass:\"u-count\"},[_c('span',[_vm._v(\"数量：\")]),_c('el-input-number',{attrs:{\"size\":\"mini\",\"min\":1,\"label\":\"数字\"},model:{value:(item.count),callback:function ($$v) {_vm.$set(item, \"count\", _vm._n($$v))},expression:\"item.count\"}})],1),_c('i',{staticClass:\"u-close el-icon-circle-close\",on:{\"click\":function($event){return relation.data.splice(key, 1)}}})],1)}):_c('div',{staticClass:\"u-normal\"},[_vm._v(\"拖拽所需道具到此处\")])],2)],1)])}),1):_c('el-row',{staticClass:\"u-list-box u-list-equip\",attrs:{\"gutter\":20}},_vm._l((_vm.equipList),function(equip,index){return _c('el-col',{key:index,attrs:{\"span\":6}},_vm._l((equip),function(eq,key){return _c('div',{key:key,staticClass:\"u-list\"},[_c('div',{staticClass:\"u-title\"},[_vm._v(_vm._s(eq.label))]),_c('draggable',{attrs:{\"list\":eq.list,\"move\":_vm.moveHandle,\"data-AucGenre\":eq.AucGenre,\"data-AucSubType\":eq.AucSubType,\"group\":\"draggable-item\",\"ghost-class\":\"ghost\"}},[(eq.list && eq.list.length)?_vm._l((eq.list),function(item,key){return _c('div',{key:key,staticClass:\"u-selected u-selected-item u-selected-equip\"},[(typeof item == 'string')?_c('itemIcon',{staticClass:\"u-icon\",attrs:{\"item_id\":item}}):_vm._e(),(typeof item == 'object')?_c('itemIcon',{staticClass:\"u-icon\",attrs:{\"item\":item}}):_vm._e(),_c('i',{staticClass:\"u-close el-icon-circle-close\",on:{\"click\":function($event){return eq.list.splice(key, 1)}}})],1)}):_c('div',{staticClass:\"u-normal\"},[_vm._v(\"拖拽所需道具到此处\")])],2)],1)}),0)}),1)],1)]),_c('el-form-item',[_c('el-button',{staticClass:\"u-publish\",attrs:{\"icon\":\"el-icon-s-promotion\",\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.submit}},[_vm._v(\"提交物品清单\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"m-publish-header\">\n        <el-page-header @back=\"goBack\" :content=\"name\"></el-page-header>\n        <slot></slot>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"publish_header\",\n    props: [\"name\"],\n    data: function() {\n        return {\n        };\n    },\n    computed: {},\n    methods: {\n        goBack: function() {\n            if(window.history.length){\n                this.$router.go(-1);\n            }else{\n                this.$router.push('/')\n            }\n        },\n    },\n    mounted: function() {},\n    components: {\n    },\n};\n</script>\n\n<style lang=\"less\">\n    .m-publish-header{\n        .pr;\n    }\n    \n</style>","import { render, staticRenderFns } from \"./publish_header.vue?vue&type=template&id=36319e52&\"\nimport script from \"./publish_header.vue?vue&type=script&lang=js&\"\nexport * from \"./publish_header.vue?vue&type=script&lang=js&\"\nimport style0 from \"./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-header\"},[_c('el-page-header',{attrs:{\"content\":_vm.name},on:{\"back\":_vm.goBack}}),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_icon.vue?vue&type=style&index=1&id=409202d7&prod&lang=less&scoped=true&\""],"sourceRoot":""}