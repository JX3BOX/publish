{"version":3,"sources":["webpack:///./src/service/collection.js","webpack:///./src/service/community.js","webpack:///./src/components/publish_header.vue?4823","webpack:///./src/post/collection.vue?5ff8","webpack:///./src/components/publish_header.vue?6f8c","webpack:///src/components/publish_header.vue","webpack:///./src/components/publish_header.vue?3a87","webpack:///./src/components/publish_header.vue","webpack:///./src/post/collection.vue?ab1c","webpack:///src/post/collection.vue","webpack:///./src/post/collection.vue?5d07","webpack:///./src/post/collection.vue"],"names":["get_my_collections","params","$cms","method","url","createCollection","data","post","updateCollection","id","put","concat","remove_collection","collection_id","delete","appendToCollection","post_type","post_id","post_collection","title","post_title","getCollectionRaw","push","$next","update","getMyList","get","del","pull","getAllCommunity","getMyReplyList","getMyReply","deleteMyReply","updateMyReply","getMyCommentList","deleteMyComment","name","props","computed","methods","goBack","window","history","length","$router","go","mounted","components","component","_c","this","_self","staticClass","attrs","on","_t","source_types","Object","assign","custom","__postType","community","jx3dat","notice","public","CollectionPublic","collection","image","description","tags","posts","tag","legal_tags","show_description","processing","onlyMine","$route","icons","key","xfid","value","label","schoolid","tags_filters","query","_step","output","_iterator","_createForOfIteratorHelper","s","n","done","split","err","e","f","title_fill","item","add_posts_item","type","custom_title","icon","search_handle","queryString","includes","then","res","_res$data$data$list2","list","reduce","acc","cur","getMyPosts","_res$data$data$list","ID","_res$data$data$list4","getAllPosts","_res$data$data$list3","init","_this","i","$message","message","submit","_this2","JSON","parse","stringify","forEach","index","sort","fn","lodash","pick","omit","setTimeout","location","href","getLink","finally","showPostType","iconUrl","replace","__imgPath","watch","immediate","handler","val","Tinymce","draggable","header","publish_banner","_vm","_v","model","callback","$$v","$set","expression","PUBLIC","_n","PRIVATE","staticStyle","_l","$event","splice","k","visible","_s","_e","trim","_icon","scopedSlots","_u","proxy","directives","rawName"],"mappings":"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","file":"js/chunk-643e446b.805153a4.js","sourcesContent":["import { $cms } from \"@jx3box/jx3box-common/js/https.js\";\n\nfunction get_my_collections(params) {\n    return $cms()({\n        method: \"GET\",\n        url: `/api/cms/post/collection/mine`,\n        params: params,\n    });\n}\n\n\nfunction createCollection(data){\n    return $cms().post(`/api/cms/post/collection`, data);\n}\n\nfunction updateCollection(id, data){\n    return $cms().put(`/api/cms/post/collection/${id}`, data);\n}\n\nfunction remove_collection(collection_id) {\n    return $cms().delete(`/api/cms/post/collection/${collection_id}`);\n}\n\nfunction appendToCollection(data) {\n    return $cms().post(`/api/cms/post/${data.post_type}-${data.post_id}/append-to-collection/${data.post_collection}`, {\n        title: data.post_title,\n    });\n}\n\nfunction getCollectionRaw(collection_id) {\n    return $cms()({\n        method: \"GET\",\n        url: `/api/cms/post/collection/${collection_id}/raw`,\n    });\n}\n\nexport { get_my_collections, remove_collection, appendToCollection, createCollection, updateCollection, getCollectionRaw };\n","import { $next } from \"@jx3box/jx3box-common/js/https\";\n\nconst API_PREFIX = `/api/next2`;\n// 发布\nfunction push(params) {\n    return $next().post(`${API_PREFIX}/community/discussion/topic`, params);\n}\n\nfunction update(id, params) {\n    return $next().put(`${API_PREFIX}/community/discussion/my/topic/item/${id}`, params);\n}\n\nfunction getMyList(params) {\n    return $next().get(`${API_PREFIX}/community/discussion/my/topic/list`, { params });\n}\nfunction del(id) {\n    return $next().delete(`${API_PREFIX}/community/discussion/my/topic/item/${id}`);\n}\n\nfunction pull(id) {\n    return $next().get(`${API_PREFIX}/community/discussion/my/topic/item/${id}`);\n}\n\nfunction getAllCommunity(params) {\n    return $next().get(`${API_PREFIX}/community/discussion/topic/list`, { params });\n}\n\n// =============  我的回帖 =============\n\n// 获取回帖列表\nfunction getMyReplyList(params) {\n    return $next().get(`${API_PREFIX}/community/discussion/my/reply/list`, { params });\n}\n\n// 获取我的回帖\nfunction getMyReply(id) {\n    return $next().get(`${API_PREFIX}/community/discussion/my/reply/item/${id}`);\n}\n\n// 删除我的回帖\nfunction deleteMyReply(id) {\n    return $next().delete(`${API_PREFIX}/community/discussion/my/reply/item/${id}`);\n}\n\n// 更新我的回帖\nfunction updateMyReply(id, data) {\n    return $next().put(`${API_PREFIX}/community/discussion/my/reply/item/${id}`, data);\n}\n\n// =============  我的评论 =============\n\n// 获取评论列表\nfunction getMyCommentList(params) {\n    return $next().get(`${API_PREFIX}/community/discussion/my/comment/list`, { params });\n}\n\n// 删除我的评论\nfunction deleteMyComment(id) {\n    return $next().delete(`${API_PREFIX}/community/discussion/my/comment/item/${id}`);\n}\n\nexport {\n    push,\n    getMyList,\n    getAllCommunity,\n    del,\n    pull,\n    update,\n    getMyReplyList,\n    getMyReply,\n    deleteMyReply,\n    updateMyReply,\n    getMyCommentList,\n    deleteMyComment,\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection.vue?vue&type=style&index=0&id=246deeb2&prod&lang=less\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./publish_header.vue?vue&type=script&lang=js\"","<template>\n    <div class=\"m-publish-header\">\n        <el-page-header @back=\"goBack\" :content=\"name\"></el-page-header>\n        <slot></slot>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"publish_header\",\n    props: [\"name\"],\n    data: function() {\n        return {\n        };\n    },\n    computed: {},\n    methods: {\n        goBack: function() {\n            if(window.history.length){\n                this.$router.go(-1);\n            }else{\n                this.$router.push('/')\n            }\n        },\n    },\n    mounted: function() {},\n    components: {\n    },\n};\n</script>\n\n<style lang=\"less\">\n    .m-publish-header{\n        .pr;\n    }\n    \n</style>","import { render, staticRenderFns } from \"./publish_header.vue?vue&type=template&id=36319e52\"\nimport script from \"./publish_header.vue?vue&type=script&lang=js\"\nexport * from \"./publish_header.vue?vue&type=script&lang=js\"\nimport style0 from \"./publish_header.vue?vue&type=style&index=0&id=36319e52&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-header\"},[_c('el-page-header',{attrs:{\"content\":_vm.name},on:{\"back\":_vm.goBack}}),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection.vue?vue&type=script&lang=js\"","<template>\n    <div class=\"m-publish-box\">\n        <!-- 头部 -->\n        <publish-header name=\"剑三小册\" :localDraft=\"false\">\n            <slot name=\"header\"></slot>\n        </publish-header>\n\n        <el-form label-position=\"left\" class=\"m-publish-collection\">\n            <!-- 💛 栏目字段 -->\n            <div class=\"m-publish-title\">\n                <el-divider content-position=\"left\">标题</el-divider>\n                <el-input\n                    v-model=\"collection.title\"\n                    placeholder=\"请输入小册标题\"\n                    maxlength=\"30\"\n                    show-word-limit\n                ></el-input>\n            </div>\n\n            <div class=\"m-publish-primary\">\n                <div class=\"m-publish-primary-block\">\n                    <el-divider content-position=\"left\">可见性</el-divider>\n                    <el-radio v-model.number=\"collection.public\" :label=\"this.public.PUBLIC\">公开</el-radio>\n                    <el-radio v-model.number=\"collection.public\" :label=\"this.public.PRIVATE\">私有</el-radio>\n                    <el-tooltip content=\"私有仅使该小册不出现在公开小册大厅中\" placement=\"top\">\n                        <i class=\"el-icon-info\"></i>\n                    </el-tooltip>\n                </div>\n                <div class=\"m-publish-primary-block m-publish-collection-posts\">\n                    <el-divider content-position=\"left\"\n                        >内容\n                        <el-checkbox v-model=\"onlyMine\" style=\"margin-left: 12px\"\n                            >仅从自己作品中</el-checkbox\n                        ></el-divider\n                    >\n                    <draggable\n                        class=\"m-list-style\"\n                        tag=\"ul\"\n                        v-if=\"collection.posts && collection.posts.length\"\n                        :list=\"collection.posts\"\n                        handle=\".u-move\"\n                    >\n                        <li v-for=\"(item, key) in collection.posts\" :key=\"key\" class=\"c-posts-item\">\n                            <i class=\"u-move el-icon-more\"></i>\n                            <i class=\"u-delete el-icon-close\" @click=\"collection.posts.splice(key, 1)\"></i>\n                            <el-row class=\"m-posts-item\" :gutter=\"10\">\n                                <el-col :span=\"4\" class=\"u-collection-type\">\n                                    <el-select class=\"u-item-key\" v-model=\"item.type\" placeholder=\"请选择作品类型\">\n                                        <el-option\n                                            v-for=\"(type, k) in source_types\"\n                                            :label=\"type\"\n                                            :key=\"k\"\n                                            :value=\"k\"\n                                        ></el-option>\n                                    </el-select>\n                                </el-col>\n                                <el-col :span=\"20\" class=\"u-collection-id\">\n                                    <el-select\n                                        v-if=\"item.type !== 'custom'\"\n                                        class=\"u-item-value\"\n                                        v-model=\"item.id\"\n                                        filterable\n                                        remote\n                                        placeholder=\"通过输入作品标题进行搜索\"\n                                        :remote-method=\"\n                                            (query) => {\n                                                search_handle(query, item);\n                                            }\n                                        \"\n                                        @change=\"\n                                            (post_id) => {\n                                                title_fill(post_id, item);\n                                            }\n                                        \"\n                                        :disabled=\"!item.type\"\n                                        @visible-change=\"\n                                            (visible) => {\n                                                if (visible) {\n                                                    search_handle(null, item);\n                                                }\n                                            }\n                                        \"\n                                    >\n                                        <template v-for=\"post in item.posts\">\n                                            <el-option\n                                                v-if=\"post.id && post.title\"\n                                                :key=\"post.id\"\n                                                :value=\"post.id\"\n                                                :label=\"post.title\"\n                                            >\n                                                <div>\n                                                    <el-tag size=\"small\" v-if=\"post.post_type\">{{\n                                                        showPostType(post.post_type)\n                                                    }}</el-tag>\n                                                    {{ post.title }}\n                                                </div>\n                                            </el-option>\n                                        </template>\n                                    </el-select>\n                                    <el-input\n                                        class=\"u-item-value\"\n                                        placeholder=\"请输入完整网页链接（需以HTTP或HTTPS开头）\"\n                                        v-else\n                                        v-model.trim=\"item.url\"\n                                    ></el-input>\n                                    <div class=\"w-select\">\n                                        <div class=\"u-select-label\">图标</div>\n                                        <el-select v-model=\"item.icon\" filterable clearable popper-class=\"m-collection-icon__select\">\n                                            <el-option v-for=\"_icon in icons\" :key=\"_icon.value\" :value=\"_icon.value\" :label=\"_icon.label\">\n                                                <div class=\"u-collection-icon\">\n                                                    <img class=\"u-icon\" :src=\"iconUrl(_icon.value)\" alt=\"\">\n                                                    {{ _icon.label }}\n                                                </div>\n                                            </el-option>\n                                        </el-select>\n                                    </div>\n                                    <el-input v-model=\"item.custom_title\">\n                                        <template #prepend>自定义标题</template>\n                                    </el-input>\n                                </el-col>\n                                <!-- <el-col :span=\"12\" class=\"u-collection-url\" v-if=\"item.url && item.type == 'custom'\">\n                                    <el-input v-model=\"item.title\" placeholder=\"请输入自定义标题\"></el-input>\n                                </el-col> -->\n                            </el-row>\n                        </li>\n                    </draggable>\n                    <div v-else class=\"u-posts-items-empty\">暂无作品信息，请进行作品添加</div>\n                    <div class=\"u-posts-add\" @click=\"add_posts_item\">\n                        <i class=\"el-icon-plus\"></i>\n                        <span>添加作品</span>\n                    </div>\n                </div>\n\n                <div class=\"m-publish-primary-block m-publish-description\">\n                    <el-divider content-position=\"left\" @click=\"show_description = !show_description\"\n                        >描述（选填）</el-divider\n                    >\n                    <span v-if=\"!show_description\" @click=\"show_description = true\" class=\"u-show\">▼ 展开</span>\n                    <span v-if=\"show_description\" @click=\"show_description = false\" class=\"u-hide\">▲ 收起</span>\n                    <Tinymce\n                        v-show=\"show_description\"\n                        v-model=\"collection.description\"\n                        :attachmentEnable=\"true\"\n                        :resourceEnable=\"true\"\n                        :height=\"300\"\n                    />\n                </div>\n\n                <!-- 其它 -->\n                <div class=\"m-publish-other\">\n                    <publish-banner\n                        v-model=\"collection.image\"\n                        :size=\"[128, 168]\"\n                        info=\"小册的封面尺寸为 372 * 532 ，支持JPG,PNG上传\"\n                    ></publish-banner>\n                </div>\n            </div>\n            <div class=\"m-publish-collection-publish\">\n                <el-button class=\"u-button\" type=\"primary\" @click=\"submit\" :loading=\"processing\" :disabled=\"processing\"\n                    >发 &nbsp;&nbsp; 布</el-button\n                >\n            </div>\n        </el-form>\n    </div>\n</template>\n\n<script>\nimport { __Root, __postType, __wikiType, __appType, __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport Tinymce from \"@jx3box/jx3box-editor/src/Tinymce\";\nimport CollectionPublic from \"@jx3box/jx3box-editor/service/enum/CollectionPublic\";\nimport header from \"@/components/publish_header.vue\";\nimport publish_banner from \"@/components/publish_banner.vue\";\nimport draggable from \"vuedraggable\";\n\n// 本地依赖\nimport { createCollection, updateCollection, getCollectionRaw } from \"../service/collection\";\nimport { getMyPosts, getAllPosts } from \"@/service/cms\";\nimport { getMyList, getAllCommunity } from \"@/service/community\";\nimport { getLink } from \"@jx3box/jx3box-common/js/utils\";\nimport lodash from \"lodash\";\nimport xfid from \"@jx3box/jx3box-data/data/xf/xfid.json\";\nimport schoolid from \"@jx3box/jx3box-data/data/xf/schoolid.json\";\n\nexport default {\n    name: \"collection\",\n    props: [],\n    data() {\n        // 作品类型加载\n        let source_types = Object.assign({ custom: \"自定义\" }, __postType, { community: \"论坛\" });\n        delete source_types.jx3dat;\n        delete source_types.notice;\n\n        return {\n            source_types: source_types,\n            public: CollectionPublic,\n            // 剑三小册主体\n            collection: {\n                id: \"\",\n                title: \"\",\n                public: 1,\n                image: \"\",\n                description: \"\",\n                tags: [],\n                posts: [],\n            },\n            tag: \"\",\n            legal_tags: null,\n            show_description: true,\n            processing: false,\n\n            onlyMine: true,\n        };\n    },\n    computed: {\n        id: function () {\n            return this.$route.params.collection_id;\n        },\n        icons: function() {\n            const icons = [];\n            for (let key in xfid) {\n                icons.push({\n                    value: `xf_${key}`,\n                    label: xfid[key],\n\n                });\n            }\n            for (let key in schoolid) {\n                icons.push({\n                    value: `school_${key}`,\n                    label: schoolid[key],\n                });\n            }\n            return icons;\n        }\n    },\n    methods: {\n        tags_filters(query) {\n            let output = [];\n            for (let tag of this.legal_tags) {\n                if (tag.split(query).length > 1) output.push({ value: tag });\n            }\n            return output;\n        },\n        // 帖子标题填充\n        title_fill(post_id, item) {\n            let post = item.posts[post_id];\n            item.title = post && post.title ? post.title : \"\";\n            item.post_type = post && post.post_type ? post.post_type : \"\";\n        },\n        add_posts_item() {\n            this.collection.posts.push({\n                title: \"\",\n                type: \"\",\n                id: \"\",\n                url: \"\",\n                posts: null,\n                post_type: \"\",\n                custom_title: \"\",\n                icon: \"\",\n            });\n        },\n        search_handle(queryString, item) {\n            if (queryString === null) item.id = queryString = \"\";\n            if (this.onlyMine) {\n                const params = {};\n                if (queryString) {\n                    params.title = queryString;\n                }\n                if (![\"custom\", \"community\"].includes(item.type)) {\n                    item.type !== \"custom\" && (params.type = item.type);\n                    getMyPosts(params).then((res) => {\n                        item.posts =\n                            res.data.data.list?.reduce((acc, cur) => {\n                                acc[cur.ID] = {\n                                    id: cur.ID,\n                                    title: cur.post_title,\n                                    post_type: cur.post_type,\n                                };\n                                return acc;\n                            }, {}) || {};\n                    });\n                } else if (item.type === \"community\") {\n                    getMyList(params).then((res) => {\n                        item.posts =\n                            res.data.data.list?.reduce((acc, cur) => {\n                                acc[cur.id] = {\n                                    id: cur.id,\n                                    title: cur.title,\n                                    post_type: \"community\",\n                                };\n                                return acc;\n                            }, {}) || {};\n                    });\n                }\n            } else {\n                const params = {};\n                if (queryString) {\n                    params.title = queryString;\n                }\n                if (![\"custom\", \"community\"].includes(item.type)) {\n                    item.type !== \"custom\" && (params.type = item.type);\n                    getAllPosts(params).then((res) => {\n                        item.posts =\n                            res.data.data.list?.reduce((acc, cur) => {\n                                acc[cur.ID] = {\n                                    id: cur.ID,\n                                    title: cur.post_title,\n                                    post_type: cur.post_type,\n                                };\n                                return acc;\n                            }, {}) || {};\n                    });\n                } else if (item.type === \"community\") {\n                    getAllCommunity(params).then((res) => {\n                        item.posts =\n                            res.data.data.list?.reduce((acc, cur) => {\n                                acc[cur.id] = {\n                                    id: cur.id,\n                                    title: cur.title,\n                                    post_type: \"community\",\n                                };\n                                return acc;\n                            }, {}) || {};\n                    });\n                }\n            }\n        },\n        init: function () {\n            getCollectionRaw(this.id).then((res) => {\n                let collection = res.data.data;\n                if (collection) {\n                    for (let i in collection.posts) {\n                        let item = collection.posts[i];\n                        collection.posts[i].posts =\n                            item.type === \"custom\"\n                                ? null\n                                : [{ id: item.id, title: item.title, post_type: item.post_type }];\n                        // if (!['mine','all','custom'].includes(item.type)) {\n                        //     item.type = 'all';\n                        //     item.post_type = item.post_type;\n                        // }\n                    }\n                    this.collection = collection;\n                } else {\n                    this.$message({\n                        message: \"该剑三小册已被删除或无权限访问\",\n                        type: \"warning\",\n                    });\n                }\n            });\n        },\n        submit: function () {\n            let collection = JSON.parse(JSON.stringify(this.collection));\n\n            if (!collection.posts) {\n                collection.posts = [];\n            }\n\n            // 校验posts\n            let message = \"\";\n            for (const i in collection.posts) {\n                const item = collection.posts[i];\n                if (!item.type) {\n                    message = \"文章类型不能为空哦\";\n                    break;\n                }\n                if (item.type === \"custom\") {\n                    if (!item.url) {\n                        message = \"请填写正确的小册文章链接（http或https开头）\";\n                        break;\n                    }\n                    if (!item.title) {\n                        message = \"请填写自定义链接的标题\";\n                        break;\n                    }\n                } else {\n                    if (!item.id) {\n                        message = \"请选择对应的文章\";\n                        break;\n                    }\n                }\n            }\n            // 更新sort字段\n            collection.posts.forEach((item, index) => {\n                item.sort = index;\n            });\n            if (message) {\n                this.$message({\n                    message: message,\n                    type: \"warning\",\n                });\n                return;\n            }\n\n            // 去除多余字段\n            for (let i in collection.posts) delete collection.posts[i].posts;\n            collection.posts = JSON.stringify(collection.posts);\n\n            this.processing = true;\n            let fn = \"\";\n            if (this.id) {\n                collection = lodash.pick(collection, [\"title\", \"public\", \"image\", \"description\", \"mark\", \"posts\"]);\n                fn = updateCollection(this.id, collection);\n            } else {\n                collection = lodash.omit(collection, [\"id\", \"tags\"]);\n                fn = createCollection(collection);\n            }\n            fn.then((res) => {\n                this.$message({\n                    message: this.id ? \"更新成功\" : \"创建成功\",\n                    type: \"success\",\n                });\n                let id = this.id || res.data.data.id;\n                setTimeout(() => {\n                    location.href = getLink(\"collection\", id);\n                }, 500);\n            }).finally(() => {\n                this.processing = false;\n            });\n        },\n\n        showPostType: function (type) {\n            return this.source_types[type];\n        },\n        iconUrl: function (icon) {\n            const key = icon.replace(\"_\", '/')\n            return `${__imgPath}image/${key}.png`;\n        },\n    },\n    watch: {\n        id: {\n            immediate: true,\n            handler: function (val) {\n                val && this.init();\n                // if (!val) {\n                //     this.source_types = {\n                //         mine: '我的作品',\n                //         all: '全部作品',\n                //         custom: '自定义',\n                //     }\n                // }\n            },\n        },\n    },\n    components: {\n        Tinymce,\n        draggable,\n        \"publish-header\": header,\n        \"publish-banner\": publish_banner,\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/collection.less\";\n</style>\n","import { render, staticRenderFns } from \"./collection.vue?vue&type=template&id=246deeb2\"\nimport script from \"./collection.vue?vue&type=script&lang=js\"\nexport * from \"./collection.vue?vue&type=script&lang=js\"\nimport style0 from \"./collection.vue?vue&type=style&index=0&id=246deeb2&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-publish-box\"},[_c('publish-header',{attrs:{\"name\":\"剑三小册\",\"localDraft\":false}},[_vm._t(\"header\")],2),_c('el-form',{staticClass:\"m-publish-collection\",attrs:{\"label-position\":\"left\"}},[_c('div',{staticClass:\"m-publish-title\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"标题\")]),_c('el-input',{attrs:{\"placeholder\":\"请输入小册标题\",\"maxlength\":\"30\",\"show-word-limit\":\"\"},model:{value:(_vm.collection.title),callback:function ($$v) {_vm.$set(_vm.collection, \"title\", $$v)},expression:\"collection.title\"}})],1),_c('div',{staticClass:\"m-publish-primary\"},[_c('div',{staticClass:\"m-publish-primary-block\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"可见性\")]),_c('el-radio',{attrs:{\"label\":this.public.PUBLIC},model:{value:(_vm.collection.public),callback:function ($$v) {_vm.$set(_vm.collection, \"public\", _vm._n($$v))},expression:\"collection.public\"}},[_vm._v(\"公开\")]),_c('el-radio',{attrs:{\"label\":this.public.PRIVATE},model:{value:(_vm.collection.public),callback:function ($$v) {_vm.$set(_vm.collection, \"public\", _vm._n($$v))},expression:\"collection.public\"}},[_vm._v(\"私有\")]),_c('el-tooltip',{attrs:{\"content\":\"私有仅使该小册不出现在公开小册大厅中\",\"placement\":\"top\"}},[_c('i',{staticClass:\"el-icon-info\"})])],1),_c('div',{staticClass:\"m-publish-primary-block m-publish-collection-posts\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"内容 \"),_c('el-checkbox',{staticStyle:{\"margin-left\":\"12px\"},model:{value:(_vm.onlyMine),callback:function ($$v) {_vm.onlyMine=$$v},expression:\"onlyMine\"}},[_vm._v(\"仅从自己作品中\")])],1),(_vm.collection.posts && _vm.collection.posts.length)?_c('draggable',{staticClass:\"m-list-style\",attrs:{\"tag\":\"ul\",\"list\":_vm.collection.posts,\"handle\":\".u-move\"}},_vm._l((_vm.collection.posts),function(item,key){return _c('li',{key:key,staticClass:\"c-posts-item\"},[_c('i',{staticClass:\"u-move el-icon-more\"}),_c('i',{staticClass:\"u-delete el-icon-close\",on:{\"click\":function($event){return _vm.collection.posts.splice(key, 1)}}}),_c('el-row',{staticClass:\"m-posts-item\",attrs:{\"gutter\":10}},[_c('el-col',{staticClass:\"u-collection-type\",attrs:{\"span\":4}},[_c('el-select',{staticClass:\"u-item-key\",attrs:{\"placeholder\":\"请选择作品类型\"},model:{value:(item.type),callback:function ($$v) {_vm.$set(item, \"type\", $$v)},expression:\"item.type\"}},_vm._l((_vm.source_types),function(type,k){return _c('el-option',{key:k,attrs:{\"label\":type,\"value\":k}})}),1)],1),_c('el-col',{staticClass:\"u-collection-id\",attrs:{\"span\":20}},[(item.type !== 'custom')?_c('el-select',{staticClass:\"u-item-value\",attrs:{\"filterable\":\"\",\"remote\":\"\",\"placeholder\":\"通过输入作品标题进行搜索\",\"remote-method\":(query) => {\n                                            _vm.search_handle(query, item);\n                                        },\"disabled\":!item.type},on:{\"change\":(post_id) => {\n                                            _vm.title_fill(post_id, item);\n                                        },\"visible-change\":(visible) => {\n                                            if (visible) {\n                                                _vm.search_handle(null, item);\n                                            }\n                                        }},model:{value:(item.id),callback:function ($$v) {_vm.$set(item, \"id\", $$v)},expression:\"item.id\"}},[_vm._l((item.posts),function(post){return [(post.id && post.title)?_c('el-option',{key:post.id,attrs:{\"value\":post.id,\"label\":post.title}},[_c('div',[(post.post_type)?_c('el-tag',{attrs:{\"size\":\"small\"}},[_vm._v(_vm._s(_vm.showPostType(post.post_type)))]):_vm._e(),_vm._v(\" \"+_vm._s(post.title)+\" \")],1)]):_vm._e()]})],2):_c('el-input',{staticClass:\"u-item-value\",attrs:{\"placeholder\":\"请输入完整网页链接（需以HTTP或HTTPS开头）\"},model:{value:(item.url),callback:function ($$v) {_vm.$set(item, \"url\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"item.url\"}}),_c('div',{staticClass:\"w-select\"},[_c('div',{staticClass:\"u-select-label\"},[_vm._v(\"图标\")]),_c('el-select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"popper-class\":\"m-collection-icon__select\"},model:{value:(item.icon),callback:function ($$v) {_vm.$set(item, \"icon\", $$v)},expression:\"item.icon\"}},_vm._l((_vm.icons),function(_icon){return _c('el-option',{key:_icon.value,attrs:{\"value\":_icon.value,\"label\":_icon.label}},[_c('div',{staticClass:\"u-collection-icon\"},[_c('img',{staticClass:\"u-icon\",attrs:{\"src\":_vm.iconUrl(_icon.value),\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(_icon.label)+\" \")])])}),1)],1),_c('el-input',{scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_vm._v(\"自定义标题\")]},proxy:true}],null,true),model:{value:(item.custom_title),callback:function ($$v) {_vm.$set(item, \"custom_title\", $$v)},expression:\"item.custom_title\"}})],1)],1)],1)}),0):_c('div',{staticClass:\"u-posts-items-empty\"},[_vm._v(\"暂无作品信息，请进行作品添加\")]),_c('div',{staticClass:\"u-posts-add\",on:{\"click\":_vm.add_posts_item}},[_c('i',{staticClass:\"el-icon-plus\"}),_c('span',[_vm._v(\"添加作品\")])])],1),_c('div',{staticClass:\"m-publish-primary-block m-publish-description\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"},on:{\"click\":function($event){_vm.show_description = !_vm.show_description}}},[_vm._v(\"描述（选填）\")]),(!_vm.show_description)?_c('span',{staticClass:\"u-show\",on:{\"click\":function($event){_vm.show_description = true}}},[_vm._v(\"▼ 展开\")]):_vm._e(),(_vm.show_description)?_c('span',{staticClass:\"u-hide\",on:{\"click\":function($event){_vm.show_description = false}}},[_vm._v(\"▲ 收起\")]):_vm._e(),_c('Tinymce',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show_description),expression:\"show_description\"}],attrs:{\"attachmentEnable\":true,\"resourceEnable\":true,\"height\":300},model:{value:(_vm.collection.description),callback:function ($$v) {_vm.$set(_vm.collection, \"description\", $$v)},expression:\"collection.description\"}})],1),_c('div',{staticClass:\"m-publish-other\"},[_c('publish-banner',{attrs:{\"size\":[128, 168],\"info\":\"小册的封面尺寸为 372 * 532 ，支持JPG,PNG上传\"},model:{value:(_vm.collection.image),callback:function ($$v) {_vm.$set(_vm.collection, \"image\", $$v)},expression:\"collection.image\"}})],1)]),_c('div',{staticClass:\"m-publish-collection-publish\"},[_c('el-button',{staticClass:\"u-button\",attrs:{\"type\":\"primary\",\"loading\":_vm.processing,\"disabled\":_vm.processing},on:{\"click\":_vm.submit}},[_vm._v(\"发    布\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}